import{R as n,j as e}from"./index-Rp7MF6v_.js";import{t as Q,s as V,a as W,i as u}from"./register_all_kernels-CjX0k5XN.js";import{u as a}from"./hooks-C1o0WK0_.js";import{f as X,t as l}from"./browser-DxYYMxyZ.js";function se(){const[z,y]=n.useState(null),[N,T]=n.useState(null),[R,_]=n.useState(null),[q,B]=n.useState(null),[S,U]=n.useState(null),[C,F]=n.useState(null),[E,b]=n.useState(null),[P,L]=n.useState(null),c=a(z),h=a(N),x=a(R),f=a(q),j=a(S),w=a(C),I=a(E),v=a(P);return n.useEffect(()=>{if(!c)return;const i=document.createElement("img");i.src=c,i.onload=()=>{Q(()=>{const r=X(i).asType("float32").expandDims(),[k,D,M]=V(r.squeeze(),3,2),p=k.mul(.299).add(D.mul(.587)).add(M.mul(.114)),O=W([p,p,p],2),o=[i.height,i.width,1],A=r.squeeze().slice([0,0,0],o),G=r.squeeze().slice([0,0,1],o),H=r.squeeze().slice([0,0,2],o),J=u.resizeNearestNeighbor(r,[i.height*4,i.width*4],!0),K=u.resizeBilinear(r,[i.height*4,i.width*4],!0),t=document.createElement("canvas"),m=document.createElement("canvas"),d=document.createElement("canvas"),g=document.createElement("canvas");t.width=o[1],t.height=o[0],d.width=i.width*4,d.height=i.height*4,g.width=i.width*4,g.height=i.height*4,m.width=i.width,m.height=i.height,l(O.squeeze().asType("int32"),t).then(()=>{t.toBlob(s=>{s&&U(new File([s],"loaded.png",{type:"image/png"}))})}),l(A.squeeze().asType("int32"),t).then(()=>{t.toBlob(s=>{s&&T(new File([s],"loaded.png",{type:"image/png"}))})}),l(G.squeeze().asType("int32"),t).then(()=>{t.toBlob(s=>{s&&_(new File([s],"loaded.png",{type:"image/png"}))})}),l(H.squeeze().asType("int32"),t).then(()=>{t.toBlob(s=>{s&&B(new File([s],"loaded.png",{type:"image/png"}))})}),l(u.flipLeftRight(r).squeeze().asType("int32"),m).then(()=>{m.toBlob(s=>{s&&F(new File([s],"flipped.png",{type:"image/png"}))})}),l(J.squeeze().asType("int32"),d).then(()=>{d.toBlob(s=>{s&&b(new File([s],"nn-resized.png",{type:"image/png"}))})}),l(K.squeeze().asType("int32"),g).then(()=>{g.toBlob(s=>{s&&L(new File([s],"bilinear-resized.png",{type:"image/png"}))})})})}},[c]),e.jsxs("section",{className:"max-w-6xl mx-auto flex flex-col justify-center items-center gap-2 w-full p-2",children:[e.jsx("div",{className:"prose",children:e.jsx("h2",{children:"Manipulating with images"})}),e.jsx("input",{type:"file",onChange:i=>y(i.target.files?.[0]??null),className:"file-input min-h-max"}),!!c&&e.jsxs("div",{className:"max-h-[75vh] grid grid-cols-12 grid-rows-12 gap-4 [&>*]:col-span-6 [&>*]:row-span-12 [&>*]:flex [&>*]:items-center [&_img]:object-contain [&_img]:max-h-full [&_img]:max-w-full",children:[e.jsx("div",{className:"justify-end",children:e.jsx("img",{src:c})}),e.jsx("div",{children:!!w&&e.jsx("img",{src:w})})]}),!!I&&e.jsxs("div",{className:"max-h-[75vh] grid grid-cols-12 grid-rows-12 gap-4 [&>*]:col-span-6 [&>*]:row-span-12 [&>*]:flex [&>*]:items-center [&_img]:object-contain [&_img]:max-h-full [&_img]:max-w-full",children:[e.jsx("div",{className:"justify-end",children:e.jsx("img",{src:I})}),e.jsx("div",{children:!!v&&e.jsx("img",{src:v})})]}),!!h&&e.jsxs("div",{className:"max-h-[75vh] grid grid-cols-12 grid-rows-12 gap-4 [&>*]:col-span-6 [&>*]:row-span-12 [&>*]:flex [&>*]:items-center [&_img]:object-contain [&_img]:max-h-full [&_img]:max-w-full",children:[e.jsx("div",{className:"justify-end",children:e.jsx("img",{src:h})}),e.jsx("div",{children:!!x&&e.jsx("img",{src:x})})]}),!!f&&e.jsxs("div",{className:"max-h-[75vh] grid grid-cols-12 grid-rows-12 gap-4 [&>*]:col-span-6 [&>*]:row-span-12 [&>*]:flex [&>*]:items-center [&_img]:object-contain [&_img]:max-h-full [&_img]:max-w-full",children:[e.jsx("div",{className:"justify-end",children:e.jsx("img",{src:f})}),e.jsx("div",{children:!!j&&e.jsx("img",{src:j})})]})]})}export{se as default};
