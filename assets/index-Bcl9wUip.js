import{R as _t,j as $,r as K1,b as Wc,g as Q1,a as Ae}from"./index-qOZqXyW5.js";import{G as Z1}from"./iconBase-B1ag1pEk.js";import{c as io}from"./helpers-Cs5YJYh0.js";import{a as J1}from"./hooks-tg-nlY-M.js";import{M as F1}from"./view-CsJ7CpAI.js";import{u as k1,Q as W1}from"./view-ql5VOHnI.js";import{t as I1,i as $1,T as td,d9 as ed,dd as cc}from"./register_all_kernels-YBgeH-G1.js";import{f as ad}from"./browser-B_FScVPB.js";var Gr,fc;function nd(){if(fc)return Gr;fc=1;var u={linear:function(t,n,s,l){var o=s-n;return o*t/l+n},easeInQuad:function(t,n,s,l){var o=s-n;return o*(t/=l)*t+n},easeOutQuad:function(t,n,s,l){var o=s-n;return-o*(t/=l)*(t-2)+n},easeInOutQuad:function(t,n,s,l){var o=s-n;return(t/=l/2)<1?o/2*t*t+n:-o/2*(--t*(t-2)-1)+n},easeInCubic:function(t,n,s,l){var o=s-n;return o*(t/=l)*t*t+n},easeOutCubic:function(t,n,s,l){var o=s-n;return o*((t=t/l-1)*t*t+1)+n},easeInOutCubic:function(t,n,s,l){var o=s-n;return(t/=l/2)<1?o/2*t*t*t+n:o/2*((t-=2)*t*t+2)+n},easeInQuart:function(t,n,s,l){var o=s-n;return o*(t/=l)*t*t*t+n},easeOutQuart:function(t,n,s,l){var o=s-n;return-o*((t=t/l-1)*t*t*t-1)+n},easeInOutQuart:function(t,n,s,l){var o=s-n;return(t/=l/2)<1?o/2*t*t*t*t+n:-o/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(t,n,s,l){var o=s-n;return o*(t/=l)*t*t*t*t+n},easeOutQuint:function(t,n,s,l){var o=s-n;return o*((t=t/l-1)*t*t*t*t+1)+n},easeInOutQuint:function(t,n,s,l){var o=s-n;return(t/=l/2)<1?o/2*t*t*t*t*t+n:o/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(t,n,s,l){var o=s-n;return-o*Math.cos(t/l*(Math.PI/2))+o+n},easeOutSine:function(t,n,s,l){var o=s-n;return o*Math.sin(t/l*(Math.PI/2))+n},easeInOutSine:function(t,n,s,l){var o=s-n;return-o/2*(Math.cos(Math.PI*t/l)-1)+n},easeInExpo:function(t,n,s,l){var o=s-n;return t==0?n:o*Math.pow(2,10*(t/l-1))+n},easeOutExpo:function(t,n,s,l){var o=s-n;return t==l?n+o:o*(-Math.pow(2,-10*t/l)+1)+n},easeInOutExpo:function(t,n,s,l){var o=s-n;return t===0?n:t===l?n+o:(t/=l/2)<1?o/2*Math.pow(2,10*(t-1))+n:o/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(t,n,s,l){var o=s-n;return-o*(Math.sqrt(1-(t/=l)*t)-1)+n},easeOutCirc:function(t,n,s,l){var o=s-n;return o*Math.sqrt(1-(t=t/l-1)*t)+n},easeInOutCirc:function(t,n,s,l){var o=s-n;return(t/=l/2)<1?-o/2*(Math.sqrt(1-t*t)-1)+n:o/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(t,n,s,l){var o=s-n,h,f,g;return g=1.70158,f=0,h=o,t===0?n:(t/=l)===1?n+o:(f||(f=l*.3),h<Math.abs(o)?(h=o,g=f/4):g=f/(2*Math.PI)*Math.asin(o/h),-(h*Math.pow(2,10*(t-=1))*Math.sin((t*l-g)*(2*Math.PI)/f))+n)},easeOutElastic:function(t,n,s,l){var o=s-n,h,f,g;return g=1.70158,f=0,h=o,t===0?n:(t/=l)===1?n+o:(f||(f=l*.3),h<Math.abs(o)?(h=o,g=f/4):g=f/(2*Math.PI)*Math.asin(o/h),h*Math.pow(2,-10*t)*Math.sin((t*l-g)*(2*Math.PI)/f)+o+n)},easeInOutElastic:function(t,n,s,l){var o=s-n,h,f,g;return g=1.70158,f=0,h=o,t===0?n:(t/=l/2)===2?n+o:(f||(f=l*(.3*1.5)),h<Math.abs(o)?(h=o,g=f/4):g=f/(2*Math.PI)*Math.asin(o/h),t<1?-.5*(h*Math.pow(2,10*(t-=1))*Math.sin((t*l-g)*(2*Math.PI)/f))+n:h*Math.pow(2,-10*(t-=1))*Math.sin((t*l-g)*(2*Math.PI)/f)*.5+o+n)},easeInBack:function(t,n,s,l,o){var h=s-n;return o===void 0&&(o=1.70158),h*(t/=l)*t*((o+1)*t-o)+n},easeOutBack:function(t,n,s,l,o){var h=s-n;return o===void 0&&(o=1.70158),h*((t=t/l-1)*t*((o+1)*t+o)+1)+n},easeInOutBack:function(t,n,s,l,o){var h=s-n;return o===void 0&&(o=1.70158),(t/=l/2)<1?h/2*(t*t*(((o*=1.525)+1)*t-o))+n:h/2*((t-=2)*t*(((o*=1.525)+1)*t+o)+2)+n},easeInBounce:function(t,n,s,l){var o=s-n,h;return h=u.easeOutBounce(l-t,0,o,l),o-h+n},easeOutBounce:function(t,n,s,l){var o=s-n;return(t/=l)<1/2.75?o*(7.5625*t*t)+n:t<2/2.75?o*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?o*(7.5625*(t-=2.25/2.75)*t+.9375)+n:o*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(t,n,s,l){var o=s-n,h;return t<l/2?(h=u.easeInBounce(t*2,0,o,l),h*.5+n):(h=u.easeOutBounce(t*2-l,0,o,l),h*.5+o*.5+n)}};return Gr=u,Gr}var id=nd();function sd(u){return u*Math.PI/180}function me(u,t){return u+Math.random()*(t-u)}function ld(u,t){return Math.floor(u+Math.random()*(t-u+1))}var Mi;(function(u){u[u.Circle=0]="Circle",u[u.Square=1]="Square",u[u.Strip=2]="Strip"})(Mi||(Mi={}));var Ma;(function(u){u[u.Positive=1]="Positive",u[u.Negative=-1]="Negative"})(Ma||(Ma={}));const rd=1e3/60;class od{constructor(t,n,s,l){this.getOptions=n;const{colors:o,initialVelocityX:h,initialVelocityY:f}=this.getOptions();this.context=t,this.x=s,this.y=l,this.w=me(5,20),this.h=me(5,20),this.radius=me(5,10),this.vx=typeof h=="number"?me(-h,h):me(h.min,h.max),this.vy=typeof f=="number"?me(-f,0):me(f.min,f.max),this.shape=ld(0,2),this.angle=sd(me(0,360)),this.angularSpin=me(-.2,.2),this.color=o[Math.floor(Math.random()*o.length)],this.rotateY=me(0,1),this.rotationDirection=me(0,1)?Ma.Positive:Ma.Negative}update(t){const{gravity:n,wind:s,friction:l,opacity:o,drawShape:h}=this.getOptions(),f=t/rd;this.x+=this.vx*f,this.y+=this.vy*f,this.vy+=n*f,this.vx+=s*f,this.vx*=l**f,this.vy*=l**f,this.rotateY>=1&&this.rotationDirection===Ma.Positive?this.rotationDirection=Ma.Negative:this.rotateY<=-1&&this.rotationDirection===Ma.Negative&&(this.rotationDirection=Ma.Positive);const g=.1*this.rotationDirection*f;if(this.rotateY+=g,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=o,this.context.lineCap="round",this.context.lineWidth=2,h&&typeof h=="function")h.call(this,this.context);else switch(this.shape){case Mi.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case Mi.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case Mi.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class ud{constructor(t,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=l=>{this.particles.splice(l,1)},this.getParticle=()=>{const l=me(this.x,this.w+this.x),o=me(this.y,this.h+this.y);return new od(this.context,this.getOptions,l,o)},this.animate=l=>{const{canvas:o,context:h,particlesGenerated:f,lastNumberOfPieces:g}=this,{run:p,recycle:m,numberOfPieces:S,debug:y,tweenFunction:b,tweenDuration:_}=this.getOptions();if(!p)return!1;const G=this.particles.length,N=m?G:f;if(N<S){g!==S&&(this.tweenProgress=0,this.tweenFrom=N,this.lastNumberOfPieces=S),this.tweenProgress=Math.min(_,Math.max(0,this.tweenProgress+l));const O=b(this.tweenProgress,this.tweenFrom,S,_),A=Math.round(O-N);for(let z=0;z<A;z++)this.particles.push(this.getParticle());this.particlesGenerated+=A}y&&(h.font="12px sans-serif",h.fillStyle="#333",h.textAlign="right",h.fillText(`Particles: ${G}`,o.width-10,o.height-20));for(let O=this.particles.length-1;O>=0;O--){const A=this.particles[O];A.update(l),(A.y>o.height||A.y<-100||A.x>o.width+100||A.x<-100)&&(m&&N<=S?this.particles[O]=this.getParticle():this.removeParticleAt(O))}return G>0||N<S},this.canvas=t;const s=this.canvas.getContext("2d");if(!s)throw new Error("Could not get canvas context");this.context=s,this.getOptions=n}}const so={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:id.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class hd{constructor(t,n){this.lastFrameTime=0,this.setOptionsWithDefaults=l=>{const o={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...o,...so,...l},Object.assign(this,l.confettiSource)},this.update=(l=0)=>{const{options:{run:o,onConfettiComplete:h,frameRate:f},canvas:g,context:p}=this,m=Math.min(l-this.lastFrameTime,50);if(f&&m<1e3/f){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=l-(f?m%f:0),o&&(p.fillStyle="white",p.clearRect(0,0,g.width,g.height)),this.generator.animate(m)?this.rafId=requestAnimationFrame(this.update):(h&&typeof h=="function"&&this.generator.particlesGenerated>0&&h.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=t;const s=this.canvas.getContext("2d");if(!s)throw new Error("Could not get canvas context");this.context=s,this.generator=new ud(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(t){const n=this._options?.run,s=this._options?.recycle;this.setOptionsWithDefaults(t),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof t.recycle=="boolean"&&t.recycle&&s===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof t.run=="boolean"&&t.run&&n===!1&&this.update()}}const cd=_t.createRef();class lo extends _t.Component{constructor(t){super(t),this.canvas=_t.createRef(),this.canvas=t.canvasRef||cd}componentDidMount(){if(this.canvas.current){const t=zr(this.props)[0];this.confetti=new hd(this.canvas.current,t)}}componentDidUpdate(){const t=zr(this.props)[0];this.confetti&&(this.confetti.options=t)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[t,n]=zr(this.props),s={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return $.jsx("canvas",{width:t.width,height:t.height,ref:this.canvas,...n,style:s})}}lo.defaultProps={...so};lo.displayName="ReactConfetti";function zr(u){const t={},n={},s={},l=[...Object.keys(so),"confettiSource","drawShape","onConfettiComplete","frameRate"],o=["canvasRef"];for(const h in u){const f=u[h];l.includes(h)?t[h]=f:o.includes(h)?o[h]=f:s[h]=f}return[t,s,n]}const fd=_t.forwardRef((u,t)=>$.jsx(lo,{canvasRef:t,...u}));function dd(u){return Z1({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",strokeWidth:"2",d:"M8,3 L3,8 L8,13 M12,20 L15,20 C18.3137085,20 21,17.3137085 21,14 C21,10.6862915 18.3137085,8 15,8 L4,8"},child:[]}]})(u)}const gd=Math.PI/180;function pd(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Ja=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},X={_global:Ja,version:"10.0.2",isBrowser:pd(),isUnminified:/param/.test((function(u){}).toString()),dblClickWindow:400,getAngle(u){return X.angleDeg?u*gd:u},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return X.DD.isDragging},isTransforming(){var u,t;return(t=(u=X.Transformer)===null||u===void 0?void 0:u.isTransforming())!==null&&t!==void 0?t:!1},isDragReady(){return!!X.DD.node},releaseCanvasOnDestroy:!0,document:Ja.document,_injectGlobal(u){typeof Ja.Konva<"u"&&console.error("Severa Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),Ja.Konva=u}},Gt=u=>{X[u.prototype.getClassName()]=u};X._injectGlobal(X);const md=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,dc=()=>{if(typeof document>"u")throw new Error(md)};class ve{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new ve(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){const n=this.m;return{x:n[0]*t.x+n[2]*t.y+n[4],y:n[1]*t.x+n[3]*t.y+n[5]}}translate(t,n){return this.m[4]+=this.m[0]*t+this.m[2]*n,this.m[5]+=this.m[1]*t+this.m[3]*n,this}scale(t,n){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=n,this.m[3]*=n,this}rotate(t){const n=Math.cos(t),s=Math.sin(t),l=this.m[0]*n+this.m[2]*s,o=this.m[1]*n+this.m[3]*s,h=this.m[0]*-s+this.m[2]*n,f=this.m[1]*-s+this.m[3]*n;return this.m[0]=l,this.m[1]=o,this.m[2]=h,this.m[3]=f,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,n){const s=this.m[0]+this.m[2]*n,l=this.m[1]+this.m[3]*n,o=this.m[2]+this.m[0]*t,h=this.m[3]+this.m[1]*t;return this.m[0]=s,this.m[1]=l,this.m[2]=o,this.m[3]=h,this}multiply(t){const n=this.m[0]*t.m[0]+this.m[2]*t.m[1],s=this.m[1]*t.m[0]+this.m[3]*t.m[1],l=this.m[0]*t.m[2]+this.m[2]*t.m[3],o=this.m[1]*t.m[2]+this.m[3]*t.m[3],h=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],f=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=n,this.m[1]=s,this.m[2]=l,this.m[3]=o,this.m[4]=h,this.m[5]=f,this}invert(){const t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),n=this.m[3]*t,s=-this.m[1]*t,l=-this.m[2]*t,o=this.m[0]*t,h=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),f=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=n,this.m[1]=s,this.m[2]=l,this.m[3]=o,this.m[4]=h,this.m[5]=f,this}getMatrix(){return this.m}decompose(){const t=this.m[0],n=this.m[1],s=this.m[2],l=this.m[3],o=this.m[4],h=this.m[5],f=t*l-n*s,g={x:o,y:h,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!=0||n!=0){const p=Math.sqrt(t*t+n*n);g.rotation=n>0?Math.acos(t/p):-Math.acos(t/p),g.scaleX=p,g.scaleY=f/p,g.skewX=(t*s+n*l)/f,g.skewY=0}else if(s!=0||l!=0){const p=Math.sqrt(s*s+l*l);g.rotation=Math.PI/2-(l>0?Math.acos(-s/p):-Math.acos(s/p)),g.scaleX=f/p,g.scaleY=p,g.skewX=0,g.skewY=(t*s+n*l)/f}return g.rotation=T._getRotation(g.rotation),g}}const vd="[object Array]",yd="[object Number]",Sd="[object String]",_d="[object Boolean]",Ed=Math.PI/180,Cd=180/Math.PI,Hr="#",bd="",xd="0",Td="Konva warning: ",gc="Konva error: ",Md="rgb(",Br={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},Ad=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let Rs=[];const Rd=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(u){setTimeout(u,60)},T={_isElement(u){return!!(u&&u.nodeType==1)},_isFunction(u){return!!(u&&u.constructor&&u.call&&u.apply)},_isPlainObject(u){return!!u&&u.constructor===Object},_isArray(u){return Object.prototype.toString.call(u)===vd},_isNumber(u){return Object.prototype.toString.call(u)===yd&&!isNaN(u)&&isFinite(u)},_isString(u){return Object.prototype.toString.call(u)===Sd},_isBoolean(u){return Object.prototype.toString.call(u)===_d},isObject(u){return u instanceof Object},isValidSelector(u){if(typeof u!="string")return!1;const t=u[0];return t==="#"||t==="."||t===t.toUpperCase()},_sign(u){return u===0||u>0?1:-1},requestAnimFrame(u){Rs.push(u),Rs.length===1&&Rd(function(){const t=Rs;Rs=[],t.forEach(function(n){n()})})},createCanvasElement(){dc();const u=document.createElement("canvas");try{u.style=u.style||{}}catch{}return u},createImageElement(){return dc(),document.createElement("img")},_isInDocument(u){for(;u=u.parentNode;)if(u==document)return!0;return!1},_urlToImage(u,t){const n=T.createImageElement();n.onload=function(){t(n)},n.src=u},_rgbToHex(u,t,n){return((1<<24)+(u<<16)+(t<<8)+n).toString(16).slice(1)},_hexToRgb(u){u=u.replace(Hr,bd);const t=parseInt(u,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},getRandomColor(){let u=(Math.random()*16777215<<0).toString(16);for(;u.length<6;)u=xd+u;return Hr+u},getRGB(u){let t;return u in Br?(t=Br[u],{r:t[0],g:t[1],b:t[2]}):u[0]===Hr?this._hexToRgb(u.substring(1)):u.substr(0,4)===Md?(t=Ad.exec(u.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA(u){return u=u||"black",T._namedColorToRBA(u)||T._hex3ColorToRGBA(u)||T._hex4ColorToRGBA(u)||T._hex6ColorToRGBA(u)||T._hex8ColorToRGBA(u)||T._rgbColorToRGBA(u)||T._rgbaColorToRGBA(u)||T._hslColorToRGBA(u)},_namedColorToRBA(u){const t=Br[u.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(u){if(u.indexOf("rgb(")===0){u=u.match(/rgb\(([^)]+)\)/)[1];const t=u.split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(u){if(u.indexOf("rgba(")===0){u=u.match(/rgba\(([^)]+)\)/)[1];const t=u.split(/ *, */).map((n,s)=>n.slice(-1)==="%"?s===3?parseInt(n)/100:parseInt(n)/100*255:Number(n));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(u){if(u[0]==="#"&&u.length===9)return{r:parseInt(u.slice(1,3),16),g:parseInt(u.slice(3,5),16),b:parseInt(u.slice(5,7),16),a:parseInt(u.slice(7,9),16)/255}},_hex6ColorToRGBA(u){if(u[0]==="#"&&u.length===7)return{r:parseInt(u.slice(1,3),16),g:parseInt(u.slice(3,5),16),b:parseInt(u.slice(5,7),16),a:1}},_hex4ColorToRGBA(u){if(u[0]==="#"&&u.length===5)return{r:parseInt(u[1]+u[1],16),g:parseInt(u[2]+u[2],16),b:parseInt(u[3]+u[3],16),a:parseInt(u[4]+u[4],16)/255}},_hex3ColorToRGBA(u){if(u[0]==="#"&&u.length===4)return{r:parseInt(u[1]+u[1],16),g:parseInt(u[2]+u[2],16),b:parseInt(u[3]+u[3],16),a:1}},_hslColorToRGBA(u){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(u)){const[t,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(u),s=Number(n[0])/360,l=Number(n[1])/100,o=Number(n[2])/100;let h,f,g;if(l===0)return g=o*255,{r:Math.round(g),g:Math.round(g),b:Math.round(g),a:1};o<.5?h=o*(1+l):h=o+l-o*l;const p=2*o-h,m=[0,0,0];for(let S=0;S<3;S++)f=s+1/3*-(S-1),f<0&&f++,f>1&&f--,6*f<1?g=p+(h-p)*6*f:2*f<1?g=h:3*f<2?g=p+(h-p)*(2/3-f)*6:g=p,m[S]=g*255;return{r:Math.round(m[0]),g:Math.round(m[1]),b:Math.round(m[2]),a:1}}},haveIntersection(u,t){return!(t.x>u.x+u.width||t.x+t.width<u.x||t.y>u.y+u.height||t.y+t.height<u.y)},cloneObject(u){const t={};for(const n in u)this._isPlainObject(u[n])?t[n]=this.cloneObject(u[n]):this._isArray(u[n])?t[n]=this.cloneArray(u[n]):t[n]=u[n];return t},cloneArray(u){return u.slice(0)},degToRad(u){return u*Ed},radToDeg(u){return u*Cd},_degToRad(u){return T.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),T.degToRad(u)},_radToDeg(u){return T.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),T.radToDeg(u)},_getRotation(u){return X.angleDeg?T.radToDeg(u):u},_capitalize(u){return u.charAt(0).toUpperCase()+u.slice(1)},throw(u){throw new Error(gc+u)},error(u){console.error(gc+u)},warn(u){X.showWarnings&&console.warn(Td+u)},each(u,t){for(const n in u)t(n,u[n])},_inRange(u,t,n){return t<=u&&u<n},_getProjectionToSegment(u,t,n,s,l,o){let h,f,g;const p=(u-n)*(u-n)+(t-s)*(t-s);if(p==0)h=u,f=t,g=(l-n)*(l-n)+(o-s)*(o-s);else{const m=((l-u)*(n-u)+(o-t)*(s-t))/p;m<0?(h=u,f=t,g=(u-l)*(u-l)+(t-o)*(t-o)):m>1?(h=n,f=s,g=(n-l)*(n-l)+(s-o)*(s-o)):(h=u+m*(n-u),f=t+m*(s-t),g=(h-l)*(h-l)+(f-o)*(f-o))}return[h,f,g]},_getProjectionToLine(u,t,n){const s=T.cloneObject(u);let l=Number.MAX_VALUE;return t.forEach(function(o,h){if(!n&&h===t.length-1)return;const f=t[(h+1)%t.length],g=T._getProjectionToSegment(o.x,o.y,f.x,f.y,u.x,u.y),p=g[0],m=g[1],S=g[2];S<l&&(s.x=p,s.y=m,l=S)}),s},_prepareArrayForTween(u,t,n){const s=[],l=[];if(u.length>t.length){const h=t;t=u,u=h}for(let h=0;h<u.length;h+=2)s.push({x:u[h],y:u[h+1]});for(let h=0;h<t.length;h+=2)l.push({x:t[h],y:t[h+1]});const o=[];return l.forEach(function(h){const f=T._getProjectionToLine(h,s,n);o.push(f.x),o.push(f.y)}),o},_prepareToStringify(u){let t;u.visitedByCircularReferenceRemoval=!0;for(const n in u)if(u.hasOwnProperty(n)&&u[n]&&typeof u[n]=="object"){if(t=Object.getOwnPropertyDescriptor(u,n),u[n].visitedByCircularReferenceRemoval||T._isElement(u[n]))if(t.configurable)delete u[n];else return null;else if(T._prepareToStringify(u[n])===null)if(t.configurable)delete u[n];else return null}return delete u.visitedByCircularReferenceRemoval,u},_assign(u,t){for(const n in t)u[n]=t[n];return u},_getFirstPointerId(u){return u.touches?u.changedTouches[0].identifier:u.pointerId||999},releaseCanvas(...u){X.releaseCanvasOnDestroy&&u.forEach(t=>{t.width=0,t.height=0})},drawRoundedRectPath(u,t,n,s){let l=t<0?t:0,o=n<0?n:0;t=Math.abs(t),n=Math.abs(n);let h=0,f=0,g=0,p=0;typeof s=="number"?h=f=g=p=Math.min(s,t/2,n/2):(h=Math.min(s[0]||0,t/2,n/2),f=Math.min(s[1]||0,t/2,n/2),p=Math.min(s[2]||0,t/2,n/2),g=Math.min(s[3]||0,t/2,n/2)),u.moveTo(l+h,o),u.lineTo(l+t-f,o),u.arc(l+t-f,o+f,f,Math.PI*3/2,0,!1),u.lineTo(l+t,o+n-p),u.arc(l+t-p,o+n-p,p,0,Math.PI/2,!1),u.lineTo(l+g,o+n),u.arc(l+g,o+n-g,g,Math.PI/2,Math.PI,!1),u.lineTo(l,o+h),u.arc(l+h,o+h,h,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(u,t,n,s,l){s=Math.abs(s);for(let o=0;o<n;o++){const h=t[(o-1+n)%n],f=t[o],g=t[(o+1)%n],p={x:f.x-h.x,y:f.y-h.y},m={x:g.x-f.x,y:g.y-f.y},S=Math.hypot(p.x,p.y),y=Math.hypot(m.x,m.y);let b;typeof l=="number"?b=l:b=o<l.length?l[o]:0,b=s*Math.cos(Math.PI/n)*Math.min(1,b/s*2);const G={x:p.x/S,y:p.y/S},N={x:m.x/y,y:m.y/y},O={x:f.x-G.x*b,y:f.y-G.y*b},A={x:f.x+N.x*b,y:f.y+N.y*b};o===0?u.moveTo(O.x,O.y):u.lineTo(O.x,O.y),u.arcTo(f.x,f.y,A.x,A.y,b)}}};function Nd(u){const t=[],n=u.length,s=T;for(let l=0;l<n;l++){let o=u[l];s._isNumber(o)?o=Math.round(o*1e3)/1e3:s._isString(o)||(o=o+""),t.push(o)}return t}const pc=",",Od="(",Dd=")",Gd="([",zd="])",Hd=";",Bd="()",Ud="=",mc=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Ld=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],wd=100;let Ns=null;function vc(){if(Ns!==null)return Ns;try{const t=T.createCanvasElement().getContext("2d");return t?!!t&&"filter"in t:(Ns=!1,!1)}catch{return Ns=!1,!1}}class Vs{constructor(t){this.canvas=t,X.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,n){let s=this.traceArr,l=s.length,o="",h,f,g,p;for(h=0;h<l;h++)f=s[h],g=f.method,g?(p=f.args,o+=g,t?o+=Bd:T._isArray(p[0])?o+=Gd+p.join(pc)+zd:(n&&(p=p.map(m=>typeof m=="number"?Math.floor(m):m)),o+=Od+p.join(pc)+Dd)):(o+=f.property,t||(o+=Ud+f.val)),o+=Hd;return o}clearTrace(){this.traceArr=[]}_trace(t){let n=this.traceArr,s;n.push(t),s=n.length,s>=wd&&n.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const n=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(t){const n=t.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(t){const n=t.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(t){const n=t.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}_applyMiterLimit(t){const n=t.attrs.miterLimit;n!=null&&this.setAttr("miterLimit",n)}setAttr(t,n){this._context[t]=n}arc(t,n,s,l,o,h){this._context.arc(t,n,s,l,o,h)}arcTo(t,n,s,l,o){this._context.arcTo(t,n,s,l,o)}beginPath(){this._context.beginPath()}bezierCurveTo(t,n,s,l,o,h){this._context.bezierCurveTo(t,n,s,l,o,h)}clearRect(t,n,s,l){this._context.clearRect(t,n,s,l)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,n){const s=arguments;if(s.length===2)return this._context.createImageData(t,n);if(s.length===1)return this._context.createImageData(t)}createLinearGradient(t,n,s,l){return this._context.createLinearGradient(t,n,s,l)}createPattern(t,n){return this._context.createPattern(t,n)}createRadialGradient(t,n,s,l,o,h){return this._context.createRadialGradient(t,n,s,l,o,h)}drawImage(t,n,s,l,o,h,f,g,p){const m=arguments,S=this._context;m.length===3?S.drawImage(t,n,s):m.length===5?S.drawImage(t,n,s,l,o):m.length===9&&S.drawImage(t,n,s,l,o,h,f,g,p)}ellipse(t,n,s,l,o,h,f,g){this._context.ellipse(t,n,s,l,o,h,f,g)}isPointInPath(t,n,s,l){return s?this._context.isPointInPath(s,t,n,l):this._context.isPointInPath(t,n,l)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,n,s,l){this._context.fillRect(t,n,s,l)}strokeRect(t,n,s,l){this._context.strokeRect(t,n,s,l)}fillText(t,n,s,l){l?this._context.fillText(t,n,s,l):this._context.fillText(t,n,s)}measureText(t){return this._context.measureText(t)}getImageData(t,n,s,l){return this._context.getImageData(t,n,s,l)}lineTo(t,n){this._context.lineTo(t,n)}moveTo(t,n){this._context.moveTo(t,n)}rect(t,n,s,l){this._context.rect(t,n,s,l)}roundRect(t,n,s,l,o){this._context.roundRect(t,n,s,l,o)}putImageData(t,n,s){this._context.putImageData(t,n,s)}quadraticCurveTo(t,n,s,l){this._context.quadraticCurveTo(t,n,s,l)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,n){this._context.scale(t,n)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,n,s,l,o,h){this._context.setTransform(t,n,s,l,o,h)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,n,s,l){this._context.strokeText(t,n,s,l)}transform(t,n,s,l,o,h){this._context.transform(t,n,s,l,o,h)}translate(t,n){this._context.translate(t,n)}_enableTrace(){let t=this,n=mc.length,s=this.setAttr,l,o;const h=function(f){let g=t[f],p;t[f]=function(){return o=Nd(Array.prototype.slice.call(arguments,0)),p=g.apply(t,arguments),t._trace({method:f,args:o}),p}};for(l=0;l<n;l++)h(mc[l]);t.setAttr=function(){s.apply(t,arguments);const f=arguments[0];let g=arguments[1];(f==="shadowOffsetX"||f==="shadowOffsetY"||f==="shadowBlur")&&(g=g/this.canvas.getPixelRatio()),t._trace({property:f,val:g})}}_applyGlobalCompositeOperation(t){const n=t.attrs.globalCompositeOperation;!n||n==="source-over"||this.setAttr("globalCompositeOperation",n)}}Ld.forEach(function(u){Object.defineProperty(Vs.prototype,u,{get(){return this._context[u]},set(t){this._context[u]=t}})});class Yd extends Vs{constructor(t,{willReadFrequently:n=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(t){const n=t.fill();this.setAttr("fillStyle",n),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const n=t._getLinearGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))}_fillRadialGradient(t){const n=t._getRadialGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))}_fill(t){const n=t.fill(),s=t.getFillPriority();if(n&&s==="color"){this._fillColor(t);return}const l=t.getFillPatternImage();if(l&&s==="pattern"){this._fillPattern(t);return}const o=t.getFillLinearGradientColorStops();if(o&&s==="linear-gradient"){this._fillLinearGradient(t);return}const h=t.getFillRadialGradientColorStops();if(h&&s==="radial-gradient"){this._fillRadialGradient(t);return}n?this._fillColor(t):l?this._fillPattern(t):o?this._fillLinearGradient(t):h&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const n=t.getStrokeLinearGradientStartPoint(),s=t.getStrokeLinearGradientEndPoint(),l=t.getStrokeLinearGradientColorStops(),o=this.createLinearGradient(n.x,n.y,s.x,s.y);if(l){for(let h=0;h<l.length;h+=2)o.addColorStop(l[h],l[h+1]);this.setAttr("strokeStyle",o)}}_stroke(t){const n=t.dash(),s=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!s){this.save();const o=this.getCanvas().getPixelRatio();this.setTransform(o,0,0,o,0,0)}this._applyLineCap(t),n&&t.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),s||this.restore()}}_applyShadow(t){var n,s,l;const o=(n=t.getShadowRGBA())!==null&&n!==void 0?n:"black",h=(s=t.getShadowBlur())!==null&&s!==void 0?s:5,f=(l=t.getShadowOffset())!==null&&l!==void 0?l:{x:0,y:0},g=t.getAbsoluteScale(),p=this.canvas.getPixelRatio(),m=g.x*p,S=g.y*p;this.setAttr("shadowColor",o),this.setAttr("shadowBlur",h*Math.min(Math.abs(m),Math.abs(S))),this.setAttr("shadowOffsetX",f.x*m),this.setAttr("shadowOffsetY",f.y*S)}}class qd extends Vs{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const n=t.getStrokeScaleEnabled();if(!n){this.save();const o=this.getCanvas().getPixelRatio();this.setTransform(o,0,0,o,0,0)}this._applyLineCap(t);const s=t.hitStrokeWidth(),l=s==="auto"?t.strokeWidth():s;this.setAttr("lineWidth",l),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),n||this.restore()}}}let Os;function Xd(){if(Os)return Os;const u=T.createCanvasElement(),t=u.getContext("2d");return Os=(function(){const n=X._global.devicePixelRatio||1,s=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/s})(),T.releaseCanvas(u),Os}let ro=class{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const s=(t||{}).pixelRatio||X.pixelRatio||Xd();this.pixelRatio=s,this._canvas=T.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const n=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,n){this.setWidth(t||0),this.setHeight(n||0)}toDataURL(t,n){try{return this._canvas.toDataURL(t,n)}catch{try{return this._canvas.toDataURL()}catch(l){return T.error("Unable to get data URL. "+l.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};class Aa extends ro{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new Yd(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}function yc(){const u=T.createCanvasElement();u.width=1,u.height=1;const t=u.getContext("2d",{willReadFrequently:!0});t.clearRect(0,0,1,1),t.fillStyle="rgba(255,0,255,1)",t.fillRect(0,0,1,1);const n=t.getImageData(0,0,1,1).data;return!(n[0]===255&&n[1]===0&&n[2]===255&&n[3]===255)}function Sc(){var u,t;return typeof navigator>"u"?!1:(t=(u=navigator.brave)===null||u===void 0?void 0:u.isBrave())!==null&&t!==void 0?t:!1}let _c=!1;function jd(){return Sc()&&yc()&&!_c&&(_c=!0,T.error('Looks like you have "Brave shield" enabled in your browser. It breaks KonvaJS internals. Please disable it. You may need to ask your users to do the same.')),Sc()&&yc()}class oo extends ro{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new qd(this),this.setSize(t.width,t.height),jd()}}const St={get isDragging(){let u=!1;return St._dragElements.forEach(t=>{t.dragStatus==="dragging"&&(u=!0)}),u},justDragged:!1,get node(){let u;return St._dragElements.forEach(t=>{u=t.node}),u},_dragElements:new Map,_drag(u){const t=[];St._dragElements.forEach((n,s)=>{const{node:l}=n,o=l.getStage();o.setPointersPositions(u),n.pointerId===void 0&&(n.pointerId=T._getFirstPointerId(u));const h=o._changedPointerPositions.find(f=>f.id===n.pointerId);if(h){if(n.dragStatus!=="dragging"){const f=l.dragDistance();if(Math.max(Math.abs(h.x-n.startPointerPos.x),Math.abs(h.y-n.startPointerPos.y))<f||(l.startDrag({evt:u}),!l.isDragging()))return}l._setDragPosition(u,n),t.push(l)}}),t.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:u},!0)})},_endDragBefore(u){const t=[];St._dragElements.forEach(n=>{const{node:s}=n,l=s.getStage();if(u&&l.setPointersPositions(u),!l._changedPointerPositions.find(f=>f.id===n.pointerId))return;(n.dragStatus==="dragging"||n.dragStatus==="stopped")&&(St.justDragged=!0,X._mouseListenClick=!1,X._touchListenClick=!1,X._pointerListenClick=!1,n.dragStatus="stopped");const h=n.node.getLayer()||n.node instanceof X.Stage&&n.node;h&&t.indexOf(h)===-1&&t.push(h)}),t.forEach(n=>{n.draw()})},_endDragAfter(u){St._dragElements.forEach((t,n)=>{t.dragStatus==="stopped"&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:u},!0),t.dragStatus!=="dragging"&&St._dragElements.delete(n)})}};X.isBrowser&&(window.addEventListener("mouseup",St._endDragBefore,!0),window.addEventListener("touchend",St._endDragBefore,!0),window.addEventListener("touchcancel",St._endDragBefore,!0),window.addEventListener("mousemove",St._drag),window.addEventListener("touchmove",St._drag),window.addEventListener("mouseup",St._endDragAfter,!1),window.addEventListener("touchend",St._endDragAfter,!1),window.addEventListener("touchcancel",St._endDragAfter,!1));function Ra(u){return T._isString(u)?'"'+u+'"':Object.prototype.toString.call(u)==="[object Number]"||T._isBoolean(u)?u:Object.prototype.toString.call(u)}function Ic(u){return u>255?255:u<0?0:Math.round(u)}function q(){if(X.isUnminified)return function(u,t){return T._isNumber(u)||T.warn(Ra(u)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),u}}function Ks(u){if(X.isUnminified)return function(t,n){let s=T._isNumber(t),l=T._isArray(t)&&t.length==u;return!s&&!l&&T.warn(Ra(t)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+u+")"),t}}function uo(){if(X.isUnminified)return function(u,t){return T._isNumber(u)||u==="auto"||T.warn(Ra(u)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),u}}function Fa(){if(X.isUnminified)return function(u,t){return T._isString(u)||T.warn(Ra(u)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),u}}function $c(){if(X.isUnminified)return function(u,t){const n=T._isString(u),s=Object.prototype.toString.call(u)==="[object CanvasGradient]"||u&&u.addColorStop;return n||s||T.warn(Ra(u)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),u}}function Pd(){if(X.isUnminified)return function(u,t){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&u instanceof n||(T._isArray(u)?u.forEach(function(s){T._isNumber(s)||T.warn('"'+t+'" attribute has non numeric element '+s+". Make sure that all elements are numbers.")}):T.warn(Ra(u)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),u}}function ze(){if(X.isUnminified)return function(u,t){return u===!0||u===!1||T.warn(Ra(u)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),u}}function Vd(u){if(X.isUnminified)return function(t,n){return t==null||T.isObject(t)||T.warn(Ra(t)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+u),t}}const yi="get",Si="set",E={addGetterSetter(u,t,n,s,l){E.addGetter(u,t,n),E.addSetter(u,t,s,l),E.addOverloadedGetterSetter(u,t)},addGetter(u,t,n){const s=yi+T._capitalize(t);u.prototype[s]=u.prototype[s]||function(){const l=this.attrs[t];return l===void 0?n:l}},addSetter(u,t,n,s){const l=Si+T._capitalize(t);u.prototype[l]||E.overWriteSetter(u,t,n,s)},overWriteSetter(u,t,n,s){const l=Si+T._capitalize(t);u.prototype[l]=function(o){return n&&o!==void 0&&o!==null&&(o=n.call(this,o,t)),this._setAttr(t,o),s&&s.call(this),this}},addComponentsGetterSetter(u,t,n,s,l){const o=n.length,h=T._capitalize,f=yi+h(t),g=Si+h(t);u.prototype[f]=function(){const m={};for(let S=0;S<o;S++){const y=n[S];m[y]=this.getAttr(t+h(y))}return m};const p=Vd(n);u.prototype[g]=function(m){const S=this.attrs[t];s&&(m=s.call(this,m,t)),p&&p.call(this,m,t);for(const y in m)m.hasOwnProperty(y)&&this._setAttr(t+h(y),m[y]);return m||n.forEach(y=>{this._setAttr(t+h(y),void 0)}),this._fireChangeEvent(t,S,m),l&&l.call(this),this},E.addOverloadedGetterSetter(u,t)},addOverloadedGetterSetter(u,t){const n=T._capitalize(t),s=Si+n,l=yi+n;u.prototype[t]=function(){return arguments.length?(this[s](arguments[0]),this):this[l]()}},addDeprecatedGetterSetter(u,t,n,s){T.error("Adding deprecated "+t);const l=yi+T._capitalize(t),o=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";u.prototype[l]=function(){T.error(o);const h=this.attrs[t];return h===void 0?n:h},E.addSetter(u,t,s,function(){T.error(o)}),E.addOverloadedGetterSetter(u,t)},backCompat(u,t){T.each(t,function(n,s){const l=u.prototype[s],o=yi+T._capitalize(n),h=Si+T._capitalize(n);function f(){l.apply(this,arguments),T.error('"'+n+'" method is deprecated and will be removed soon. Use ""'+s+'" instead.')}u.prototype[n]=f,u.prototype[o]=f,u.prototype[h]=f})},afterSetFilter(){this._filterUpToDate=!1}};function Kd(u){const t=/(\w+)\(([^)]+)\)/g;let n;for(;(n=t.exec(u))!==null;){const[,s,l]=n;switch(s){case"blur":{const o=parseFloat(l.replace("px",""));return function(h){this.blurRadius(o*.5);const f=X.Filters;f&&f.Blur&&f.Blur.call(this,h)}}case"brightness":{const o=l.includes("%")?parseFloat(l)/100:parseFloat(l);return function(h){this.brightness(o);const f=X.Filters;f&&f.Brightness&&f.Brightness.call(this,h)}}case"contrast":{const o=parseFloat(l);return function(h){const f=100*(Math.sqrt(o)-1);this.contrast(f);const g=X.Filters;g&&g.Contrast&&g.Contrast.call(this,h)}}case"grayscale":return function(o){const h=X.Filters;h&&h.Grayscale&&h.Grayscale.call(this,o)};case"sepia":return function(o){const h=X.Filters;h&&h.Sepia&&h.Sepia.call(this,o)};case"invert":return function(o){const h=X.Filters;h&&h.Invert&&h.Invert.call(this,o)};default:T.warn(`CSS filter "${s}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const qs="absoluteOpacity",Ds="allEventListeners",$e="absoluteTransform",Ec="absoluteScale",Za="canvas",Qd="Change",Zd="children",Jd="konva",Zr="listening",Fd="mouseenter",kd="mouseleave",Wd="pointerenter",Id="pointerleave",$d="touchenter",t2="touchleave",Cc="set",bc="Shape",Xs=" ",xc="stage",xa="transform",e2="Stage",Jr="visible",a2=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Xs);let n2=1;class Y{constructor(t){this._id=n2++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===xa||t===$e)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,n){let s=this._cache.get(t);return(s===void 0||(t===xa||t===$e)&&s.dirty===!0)&&(s=n.call(this),this._cache.set(t,s)),s}_calculate(t,n,s){if(!this._attachedDepsListeners.get(t)){const l=n.map(o=>o+"Change.konva").join(Xs);this.on(l,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,s)}_getCanvasCache(){return this._cache.get(Za)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===$e&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Za)){const{scene:t,filter:n,hit:s,buffer:l}=this._cache.get(Za);T.releaseCanvas(t,n,s,l),this._cache.delete(Za)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const n=t||{};let s={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(s=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let l=Math.ceil(n.width||s.width),o=Math.ceil(n.height||s.height),h=n.pixelRatio,f=n.x===void 0?Math.floor(s.x):n.x,g=n.y===void 0?Math.floor(s.y):n.y,p=n.offset||0,m=n.drawBorder||!1,S=n.hitCanvasPixelRatio||1;if(!l||!o){T.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const y=Math.abs(Math.round(s.x)-f)>.5?1:0,b=Math.abs(Math.round(s.y)-g)>.5?1:0;l+=p*2+y,o+=p*2+b,f-=p,g-=p;const _=new Aa({pixelRatio:h,width:l,height:o}),G=new Aa({pixelRatio:h,width:0,height:0,willReadFrequently:!0}),N=new oo({pixelRatio:S,width:l,height:o}),O=_.getContext(),A=N.getContext(),z=new Aa({width:_.width/_.pixelRatio+Math.abs(f),height:_.height/_.pixelRatio+Math.abs(g),pixelRatio:_.pixelRatio}),H=z.getContext();return N.isCache=!0,_.isCache=!0,this._cache.delete(Za),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(_.getContext()._context.imageSmoothingEnabled=!1,G.getContext()._context.imageSmoothingEnabled=!1),O.save(),A.save(),H.save(),O.translate(-f,-g),A.translate(-f,-g),H.translate(-f,-g),z.x=f,z.y=g,this._isUnderCache=!0,this._clearSelfAndDescendantCache(qs),this._clearSelfAndDescendantCache(Ec),this.drawScene(_,this,z),this.drawHit(N,this),this._isUnderCache=!1,O.restore(),A.restore(),m&&(O.save(),O.beginPath(),O.rect(0,0,l,o),O.closePath(),O.setAttr("strokeStyle","red"),O.setAttr("lineWidth",5),O.stroke(),O.restore()),this._cache.set(Za,{scene:_,filter:G,hit:N,buffer:z,x:f,y:g}),this._requestDraw(),this}isCached(){return this._cache.has(Za)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,n){const s=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let l=1/0,o=1/0,h=-1/0,f=-1/0;const g=this.getAbsoluteTransform(n);return s.forEach(function(p){const m=g.point(p);l===void 0&&(l=h=m.x,o=f=m.y),l=Math.min(l,m.x),o=Math.min(o,m.y),h=Math.max(h,m.x),f=Math.max(f,m.y)}),{x:l,y:o,width:h-l,height:f-o}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();t.translate(n.x,n.y);const s=this._getCachedSceneCanvas(),l=s.pixelRatio;t.drawImage(s._canvas,0,0,s.width/l,s.height/l),t.restore()}_drawCachedHitCanvas(t){const n=this._getCanvasCache(),s=n.hit;t.save(),t.translate(n.x,n.y),t.drawImage(s._canvas,0,0,s.width/s.pixelRatio,s.height/s.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t=this.filters(),n=this._getCanvasCache(),s=n.scene,l=n.filter,o=l.getContext(),h,f,g,p;if(!t||t.length===0)return s;if(this._filterUpToDate)return l;let m=!0;for(let y=0;y<t.length;y++)if(typeof t[y]=="string"&&vc(),typeof t[y]!="string"||!vc()){m=!1;break}const S=s.pixelRatio;if(l.setSize(s.width/s.pixelRatio,s.height/s.pixelRatio),m){const y=t.join(" ");return o.save(),o.setAttr("filter",y),o.drawImage(s._canvas,0,0,s.getWidth()/S,s.getHeight()/S),o.restore(),this._filterUpToDate=!0,l}try{for(h=t.length,o.clear(),o.drawImage(s._canvas,0,0,s.getWidth()/S,s.getHeight()/S),f=o.getImageData(0,0,l.getWidth(),l.getHeight()),g=0;g<h;g++)p=t[g],typeof p=="string"&&(p=Kd(p)),p.call(this,f),o.putImageData(f,0,0)}catch(y){T.error("Unable to apply filter. "+y.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,l}on(t,n){if(this._cache&&this._cache.delete(Ds),arguments.length===3)return this._delegate.apply(this,arguments);const s=t.split(Xs);for(let l=0;l<s.length;l++){const h=s[l].split("."),f=h[0],g=h[1]||"";this.eventListeners[f]||(this.eventListeners[f]=[]),this.eventListeners[f].push({name:g,handler:n})}return this}off(t,n){let s=(t||"").split(Xs),l=s.length,o,h,f,g,p,m;if(this._cache&&this._cache.delete(Ds),!t)for(h in this.eventListeners)this._off(h);for(o=0;o<l;o++)if(f=s[o],g=f.split("."),p=g[0],m=g[1],p)this.eventListeners[p]&&this._off(p,m,n);else for(h in this.eventListeners)this._off(h,m,n);return this}dispatchEvent(t){const n={target:this,type:t.type,evt:t};return this.fire(t.type,n),this}addEventListener(t,n){return this.on(t,function(s){n.call(this,s.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,n,s){const l=this;this.on(t,function(o){const h=o.target.findAncestors(n,!0,l);for(let f=0;f<h.length;f++)o=T.cloneObject(o),o.currentTarget=h[f],s.call(h[f],o)})}remove(){return this.isDragging()&&this.stopDrag(),St._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache($e),this._clearSelfAndDescendantCache(qs),this._clearSelfAndDescendantCache(Ec),this._clearSelfAndDescendantCache(xc),this._clearSelfAndDescendantCache(Jr),this._clearSelfAndDescendantCache(Zr)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const n="get"+T._capitalize(t);return T._isFunction(this[n])?this[n]():this.attrs[t]}getAncestors(){let t=this.getParent(),n=[];for(;t;)n.push(t),t=t.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{let n,s;if(!t)return this;for(n in t)n!==Zd&&(s=Cc+T._capitalize(n),T._isFunction(this[s])?this[s](t[n]):this._setAttr(n,t[n]))}),this}isListening(){return this._getCache(Zr,this._isListening)}_isListening(t){if(!this.listening())return!1;const s=this.getParent();return s&&s!==t&&this!==t?s._isListening(t):!0}isVisible(){return this._getCache(Jr,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const s=this.getParent();return s&&s!==t&&this!==t?s._isVisible(t):!0}shouldDrawHit(t,n=!1){if(t)return this._isVisible(t)&&this._isListening(t);const s=this.getLayer();let l=!1;St._dragElements.forEach(h=>{h.dragStatus==="dragging"&&(h.node.nodeType==="Stage"||h.node.getLayer()===s)&&(l=!0)});const o=!n&&!X.hitOnDragEnabled&&(l||X.isTransforming());return this.isListening()&&this.isVisible()&&!o}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t=this.getDepth(),n=this,s=0,l,o,h,f;function g(m){for(l=[],o=m.length,h=0;h<o;h++)f=m[h],s++,f.nodeType!==bc&&(l=l.concat(f.getChildren().slice())),f._id===n._id&&(h=o);l.length>0&&l[0].getDepth()<=t&&g(l)}const p=this.getStage();return n.nodeType!==e2&&p&&g(p.getChildren()),s}getDepth(){let t=0,n=this.parent;for(;n;)t++,n=n.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(xa),this._clearSelfAndDescendantCache($e)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const n=t.getPointerPosition();if(!n)return null;const s=this.getAbsoluteTransform().copy();return s.invert(),s.point(n)}getAbsolutePosition(t){let n=!1,s=this.parent;for(;s;){if(s.isCached()){n=!0;break}s=s.parent}n&&!t&&(t=!0);const l=this.getAbsoluteTransform(t).getMatrix(),o=new ve,h=this.offset();return o.m=l.slice(),o.translate(h.x,h.y),o.getTranslation()}setAbsolutePosition(t){const{x:n,y:s,...l}=this._clearTransform();this.attrs.x=n,this.attrs.y=s,this._clearCache(xa);const o=this._getAbsoluteTransform().copy();return o.invert(),o.translate(t.x,t.y),t={x:this.attrs.x+o.getTranslation().x,y:this.attrs.y+o.getTranslation().y},this._setTransform(l),this.setPosition({x:t.x,y:t.y}),this._clearCache(xa),this._clearSelfAndDescendantCache($e),this}_setTransform(t){let n;for(n in t)this.attrs[n]=t[n]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let n=t.x,s=t.y,l=this.x(),o=this.y();return n!==void 0&&(l+=n),s!==void 0&&(o+=s),this.setPosition({x:l,y:o}),this}_eachAncestorReverse(t,n){let s=[],l=this.getParent(),o,h;if(!(n&&n._id===this._id)){for(s.unshift(this);l&&(!n||l._id!==n._id);)s.unshift(l),l=l.parent;for(o=s.length,h=0;h<o;h++)t(s[h])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return T.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index,n=this.parent.getChildren().length;return t<n-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return T.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index,n=this.parent.getChildren().length;return t<n-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return T.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return T.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return T.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&T.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(qs,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const n=this.getParent();return n&&!n._isUnderCache&&(t*=n.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t=this.getAttrs(),n,s,l,o,h;const f={attrs:{},className:this.getClassName()};for(n in t)s=t[n],h=T.isObject(s)&&!T._isPlainObject(s)&&!T._isArray(s),!h&&(l=typeof this[n]=="function"&&this[n],delete t[n],o=l?l.call(this):null,t[n]=s,o!==s&&(f.attrs[n]=s));return T._prepareToStringify(f)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,n,s){const l=[];n&&this._isMatch(t)&&l.push(this);let o=this.parent;for(;o;){if(o===s)return l;o._isMatch(t)&&l.push(o),o=o.parent}return l}isAncestorOf(t){return!1}findAncestor(t,n,s){return this.findAncestors(t,n,s)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);let n=t.replace(/ /g,"").split(","),s=n.length,l,o;for(l=0;l<s;l++)if(o=n[l],T.isValidSelector(o)||(T.warn('Selector "'+o+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),T.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),T.warn("Konva is awesome, right?")),o.charAt(0)==="#"){if(this.id()===o.slice(1))return!0}else if(o.charAt(0)==="."){if(this.hasName(o.slice(1)))return!0}else if(this.className===o||this.nodeType===o)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(xc,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,n={},s){return n.target=n.target||this,s?this._fireAndBubble(t,n):this._fire(t,n),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache($e,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let n;if(t)return n=new ve,this._eachAncestorReverse(function(s){const l=s.transformsEnabled();l==="all"?n.multiply(s.getTransform()):l==="position"&&n.translate(s.x()-s.offsetX(),s.y()-s.offsetY())},t),n;{n=this._cache.get($e)||new ve,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();const s=this.transformsEnabled();if(s==="all")n.multiply(this.getTransform());else if(s==="position"){const l=this.attrs.x||0,o=this.attrs.y||0,h=this.attrs.offsetX||0,f=this.attrs.offsetY||0;n.translate(l-h,o-f)}return n.dirty=!1,n}}getAbsoluteScale(t){let n=this;for(;n;)n._isUnderCache&&(t=n),n=n.getParent();const l=this.getAbsoluteTransform(t).decompose();return{x:l.scaleX,y:l.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(xa,this._getTransform)}_getTransform(){var t,n;const s=this._cache.get(xa)||new ve;s.reset();const l=this.x(),o=this.y(),h=X.getAngle(this.rotation()),f=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,g=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,p=this.attrs.skewX||0,m=this.attrs.skewY||0,S=this.attrs.offsetX||0,y=this.attrs.offsetY||0;return(l!==0||o!==0)&&s.translate(l,o),h!==0&&s.rotate(h),(p!==0||m!==0)&&s.skew(p,m),(f!==1||g!==1)&&s.scale(f,g),(S!==0||y!==0)&&s.translate(-1*S,-1*y),s.dirty=!1,s}clone(t){let n=T.cloneObject(this.attrs),s,l,o,h,f;for(s in t)n[s]=t[s];const g=new this.constructor(n);for(s in this.eventListeners)for(l=this.eventListeners[s],o=l.length,h=0;h<o;h++)f=l[h],f.name.indexOf(Jd)<0&&(g.eventListeners[s]||(g.eventListeners[s]=[]),g.eventListeners[s].push(f));return g}_toKonvaCanvas(t){t=t||{};const n=this.getClientRect(),s=this.getStage(),l=t.x!==void 0?t.x:Math.floor(n.x),o=t.y!==void 0?t.y:Math.floor(n.y),h=t.pixelRatio||1,f=new Aa({width:t.width||Math.ceil(n.width)||(s?s.width():0),height:t.height||Math.ceil(n.height)||(s?s.height():0),pixelRatio:h}),g=f.getContext(),p=new Aa({width:f.width/f.pixelRatio+Math.abs(l),height:f.height/f.pixelRatio+Math.abs(o),pixelRatio:f.pixelRatio});return t.imageSmoothingEnabled===!1&&(g._context.imageSmoothingEnabled=!1),g.save(),(l||o)&&g.translate(-1*l,-1*o),this.drawScene(f,void 0,p),g.restore(),f}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};const n=t.mimeType||null,s=t.quality||null,l=this._toKonvaCanvas(t).toDataURL(n,s);return t.callback&&t.callback(l),l}toImage(t){return new Promise((n,s)=>{try{const l=t?.callback;l&&delete t.callback,T._urlToImage(this.toDataURL(t),function(o){n(o),l?.(o)})}catch(l){s(l)}})}toBlob(t){return new Promise((n,s)=>{try{const l=t?.callback;l&&delete t.callback,this.toCanvas(t).toBlob(o=>{n(o),l?.(o)},t?.mimeType,t?.quality)}catch(l){s(l)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():X.dragDistance}_off(t,n,s){let l=this.eventListeners[t],o,h,f;for(o=0;o<l.length;o++)if(h=l[o].name,f=l[o].handler,(h!=="konva"||n==="konva")&&(!n||h===n)&&(!s||s===f)){if(l.splice(o,1),l.length===0){delete this.eventListeners[t];break}o--}}_fireChangeEvent(t,n,s){this._fire(t+Qd,{oldVal:n,newVal:s})}addName(t){if(!this.hasName(t)){const n=this.name(),s=n?n+" "+t:t;this.name(s)}return this}hasName(t){if(!t)return!1;const n=this.name();return n?(n||"").split(/\s/g).indexOf(t)!==-1:!1}removeName(t){const n=(this.name()||"").split(/\s/g),s=n.indexOf(t);return s!==-1&&(n.splice(s,1),this.name(n.join(" "))),this}setAttr(t,n){const s=this[Cc+T._capitalize(t)];return T._isFunction(s)?s.call(this,n):this._setAttr(t,n),this}_requestDraw(){if(X.autoDrawEnabled){const t=this.getLayer()||this.getStage();t?.batchDraw()}}_setAttr(t,n){const s=this.attrs[t];s===n&&!T.isObject(n)||(n==null?delete this.attrs[t]:this.attrs[t]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(t,s,n),this._requestDraw())}_setComponentAttr(t,n,s){let l;s!==void 0&&(l=this.attrs[t],l||(this.attrs[t]=this.getAttr(t)),this.attrs[t][n]=s,this._fireChangeEvent(t,l,s))}_fireAndBubble(t,n,s){n&&this.nodeType===bc&&(n.target=this);const l=[Fd,kd,Wd,Id,$d,t2];if(!(l.indexOf(t)!==-1&&(s&&(this===s||this.isAncestorOf&&this.isAncestorOf(s))||this.nodeType==="Stage"&&!s))){this._fire(t,n);const h=l.indexOf(t)!==-1&&s&&s.isAncestorOf&&s.isAncestorOf(this)&&!s.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!h&&(s&&s.parent?this._fireAndBubble.call(this.parent,t,n,s):this._fireAndBubble.call(this.parent,t,n))}}_getProtoListeners(t){var n,s,l;const o=(n=this._cache.get(Ds))!==null&&n!==void 0?n:{};let h=o?.[t];if(h===void 0){h=[];let f=Object.getPrototypeOf(this);for(;f;){const g=(l=(s=f.eventListeners)===null||s===void 0?void 0:s[t])!==null&&l!==void 0?l:[];h.push(...g),f=Object.getPrototypeOf(f)}o[t]=h,this._cache.set(Ds,o)}return h}_fire(t,n){n=n||{},n.currentTarget=this,n.type=t;const s=this._getProtoListeners(t);if(s)for(let o=0;o<s.length;o++)s[o].handler.call(this,n);const l=this.eventListeners[t];if(l)for(let o=0;o<l.length;o++)l[o].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const n=t?t.pointerId:void 0,s=this.getStage(),l=this.getAbsolutePosition();if(!s)return;const o=s._getPointerById(n)||s._changedPointerPositions[0]||l;St._dragElements.set(this._id,{node:this,startPointerPos:o,offset:{x:o.x-l.x,y:o.y-l.y},dragStatus:"ready",pointerId:n})}startDrag(t,n=!0){St._dragElements.has(this._id)||this._createDragElement(t);const s=St._dragElements.get(this._id);s.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},n)}_setDragPosition(t,n){const s=this.getStage()._getPointerById(n.pointerId);if(!s)return;let l={x:s.x-n.offset.x,y:s.y-n.offset.y};const o=this.dragBoundFunc();if(o!==void 0){const h=o.call(this,l,t);h?l=h:T.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==l.x||this._lastPos.y!==l.y)&&(this.setAbsolutePosition(l),this._requestDraw()),this._lastPos=l}stopDrag(t){const n=St._dragElements.get(this._id);n&&(n.dragStatus="stopped"),St._endDragBefore(t),St._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=St._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(!(t.evt.button!==void 0)||X.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())return;let l=!1;St._dragElements.forEach(o=>{this.isAncestorOf(o.node)&&(l=!0)}),l||this._createDragElement(t)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const n=St._dragElements.get(this._id),s=n&&n.dragStatus==="dragging",l=n&&n.dragStatus==="ready";s?this.stopDrag():l&&St._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const n=this.getStage();if(!n)return!1;const s={x:-t.x,y:-t.y,width:n.width()+2*t.x,height:n.height()+2*t.y};return T.haveIntersection(s,this.getClientRect())}static create(t,n){return T._isString(t)&&(t=JSON.parse(t)),this._createNode(t,n)}static _createNode(t,n){let s=Y.prototype.getClassName.call(t),l=t.children,o,h,f;n&&(t.attrs.container=n),X[s]||(T.warn('Can not find a node with class name "'+s+'". Fallback to "Shape".'),s="Shape");const g=X[s];if(o=new g(t.attrs),l)for(h=l.length,f=0;f<h;f++)o.add(Y._createNode(l[f]));return o}}Y.prototype.nodeType="Node";Y.prototype._attrsAffectingSize=[];Y.prototype.eventListeners={};Y.prototype.on.call(Y.prototype,a2,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(xa),this._clearSelfAndDescendantCache($e)});Y.prototype.on.call(Y.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Jr)});Y.prototype.on.call(Y.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Zr)});Y.prototype.on.call(Y.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(qs)});const xt=E.addGetterSetter;xt(Y,"zIndex");xt(Y,"absolutePosition");xt(Y,"position");xt(Y,"x",0,q());xt(Y,"y",0,q());xt(Y,"globalCompositeOperation","source-over",Fa());xt(Y,"opacity",1,q());xt(Y,"name","",Fa());xt(Y,"id","",Fa());xt(Y,"rotation",0,q());E.addComponentsGetterSetter(Y,"scale",["x","y"]);xt(Y,"scaleX",1,q());xt(Y,"scaleY",1,q());E.addComponentsGetterSetter(Y,"skew",["x","y"]);xt(Y,"skewX",0,q());xt(Y,"skewY",0,q());E.addComponentsGetterSetter(Y,"offset",["x","y"]);xt(Y,"offsetX",0,q());xt(Y,"offsetY",0,q());xt(Y,"dragDistance",void 0,q());xt(Y,"width",0,q());xt(Y,"height",0,q());xt(Y,"listening",!0,ze());xt(Y,"preventDefault",!0,ze());xt(Y,"filters",void 0,function(u){return this._filterUpToDate=!1,u});xt(Y,"visible",!0,ze());xt(Y,"transformsEnabled","all",Fa());xt(Y,"size");xt(Y,"dragBoundFunc");xt(Y,"draggable",!1,ze());E.backCompat(Y,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class ye extends Y{constructor(){super(...arguments),this.children=[]}getChildren(t){const n=this.children||[];return t?n.filter(t):n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(let s=0;s<t.length;s++)this.add(t[s]);return this}const n=t[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const n=this._generalFind(t,!0);return n.length>0?n[0]:void 0}_generalFind(t,n){const s=[];return this._descendants(l=>{const o=l._isMatch(t);return o&&s.push(l),!!(o&&n)}),s}_descendants(t){let n=!1;const s=this.getChildren();for(const l of s){if(n=t(l),n)return!0;if(l.hasChildren()&&(n=l._descendants(t),n))return!0}return!1}toObject(){const t=Y.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(n=>{t.children.push(n.toObject())}),t}isAncestorOf(t){let n=t.getParent();for(;n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(t){const n=Y.prototype.clone.call(this,t);return this.getChildren().forEach(function(s){n.add(s.clone())}),n}getAllIntersections(t){const n=[];return this.find("Shape").forEach(s=>{s.isVisible()&&s.intersects(t)&&n.push(s)}),n}_clearSelfAndDescendantCache(t){var n;super._clearSelfAndDescendantCache(t),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(s){s._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(n,s){n.index=s}),this._requestDraw()}drawScene(t,n,s){const l=this.getLayer(),o=t||l&&l.getCanvas(),h=o&&o.getContext(),f=this._getCanvasCache(),g=f&&f.scene,p=o&&o.isCache;if(!this.isVisible()&&!p)return this;if(g){h.save();const m=this.getAbsoluteTransform(n).getMatrix();h.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedSceneCanvas(h),h.restore()}else this._drawChildren("drawScene",o,n,s);return this}drawHit(t,n){if(!this.shouldDrawHit(n))return this;const s=this.getLayer(),l=t||s&&s.hitCanvas,o=l&&l.getContext(),h=this._getCanvasCache();if(h&&h.hit){o.save();const g=this.getAbsoluteTransform(n).getMatrix();o.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedHitCanvas(o),o.restore()}else this._drawChildren("drawHit",l,n);return this}_drawChildren(t,n,s,l){var o;const h=n&&n.getContext(),f=this.clipWidth(),g=this.clipHeight(),p=this.clipFunc(),m=typeof f=="number"&&typeof g=="number"||p,S=s===this;if(m){h.save();const b=this.getAbsoluteTransform(s);let _=b.getMatrix();h.transform(_[0],_[1],_[2],_[3],_[4],_[5]),h.beginPath();let G;if(p)G=p.call(this,h,this);else{const N=this.clipX(),O=this.clipY();h.rect(N||0,O||0,f,g)}h.clip.apply(h,G),_=b.copy().invert().getMatrix(),h.transform(_[0],_[1],_[2],_[3],_[4],_[5])}const y=!S&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";y&&(h.save(),h._applyGlobalCompositeOperation(this)),(o=this.children)===null||o===void 0||o.forEach(function(b){b[t](n,s,l)}),y&&h.restore(),m&&h.restore()}getClientRect(t={}){var n;const s=t.skipTransform,l=t.relativeTo;let o,h,f,g,p={x:1/0,y:1/0,width:0,height:0};const m=this;(n=this.children)===null||n===void 0||n.forEach(function(b){if(!b.visible())return;const _=b.getClientRect({relativeTo:m,skipShadow:t.skipShadow,skipStroke:t.skipStroke});_.width===0&&_.height===0||(o===void 0?(o=_.x,h=_.y,f=_.x+_.width,g=_.y+_.height):(o=Math.min(o,_.x),h=Math.min(h,_.y),f=Math.max(f,_.x+_.width),g=Math.max(g,_.y+_.height)))});const S=this.find("Shape");let y=!1;for(let b=0;b<S.length;b++)if(S[b]._isVisible(this)){y=!0;break}return y&&o!==void 0?p={x:o,y:h,width:f-o,height:g-h}:p={x:0,y:0,width:0,height:0},s?p:this._transformedRect(p,l)}}E.addComponentsGetterSetter(ye,"clip",["x","y","width","height"]);E.addGetterSetter(ye,"clipX",void 0,q());E.addGetterSetter(ye,"clipY",void 0,q());E.addGetterSetter(ye,"clipWidth",void 0,q());E.addGetterSetter(ye,"clipHeight",void 0,q());E.addGetterSetter(ye,"clipFunc");const Di=new Map,t0=X._global.PointerEvent!==void 0;function Ur(u){return Di.get(u)}function ho(u){return{evt:u,pointerId:u.pointerId}}function e0(u,t){return Di.get(u)===t}function a0(u,t){Ai(u),t.getStage()&&(Di.set(u,t),t0&&t._fire("gotpointercapture",ho(new PointerEvent("gotpointercapture"))))}function Ai(u,t){const n=Di.get(u);if(!n)return;const s=n.getStage();s&&s.content,Di.delete(u),t0&&n._fire("lostpointercapture",ho(new PointerEvent("lostpointercapture")))}const i2="Stage",s2="string",Tc="px",l2="mouseout",n0="mouseleave",i0="mouseover",s0="mouseenter",l0="mousemove",r0="mousedown",o0="mouseup",Ei="pointermove",Ci="pointerdown",Un="pointerup",bi="pointercancel",r2="lostpointercapture",Gs="pointerout",xi="pointerleave",zs="pointerover",Hs="pointerenter",Fr="contextmenu",u0="touchstart",h0="touchend",c0="touchmove",f0="touchcancel",kr="wheel",o2=5,u2=[[s0,"_pointerenter"],[r0,"_pointerdown"],[l0,"_pointermove"],[o0,"_pointerup"],[n0,"_pointerleave"],[u0,"_pointerdown"],[c0,"_pointermove"],[h0,"_pointerup"],[f0,"_pointercancel"],[i0,"_pointerover"],[kr,"_wheel"],[Fr,"_contextmenu"],[Ci,"_pointerdown"],[Ei,"_pointermove"],[Un,"_pointerup"],[bi,"_pointercancel"],[xi,"_pointerleave"],[r2,"_lostpointercapture"]],Lr={mouse:{[Gs]:l2,[xi]:n0,[zs]:i0,[Hs]:s0,[Ei]:l0,[Ci]:r0,[Un]:o0,[bi]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Gs]:"touchout",[xi]:"touchleave",[zs]:"touchover",[Hs]:"touchenter",[Ei]:c0,[Ci]:u0,[Un]:h0,[bi]:f0,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Gs]:Gs,[xi]:xi,[zs]:zs,[Hs]:Hs,[Ei]:Ei,[Ci]:Ci,[Un]:Un,[bi]:bi,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Ti=u=>u.indexOf("pointer")>=0?"pointer":u.indexOf("touch")>=0?"touch":"mouse",Gn=u=>{const t=Ti(u);if(t==="pointer")return X.pointerEventsEnabled&&Lr.pointer;if(t==="touch")return Lr.touch;if(t==="mouse")return Lr.mouse};function Mc(u={}){return(u.clipFunc||u.clipWidth||u.clipHeight)&&T.warn("Stage does not support clipping. Please use clip for Layers or Groups."),u}const h2="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",Ri=[];let Qs=class extends ye{constructor(t){super(Mc(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Ri.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Mc(this.attrs)}),this._checkVisibility()}_validateAdd(t){const n=t.getType()==="Layer",s=t.getType()==="FastLayer";n||s||T.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if(typeof t===s2){let n;if(t.charAt(0)==="."){const s=t.slice(1);t=document.getElementsByClassName(s)[0]}else t.charAt(0)!=="#"?n=t:n=t.slice(1),t=document.getElementById(n);if(!t)throw"Can not find container in document with id "+n}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const t=this.children,n=t.length;for(let s=0;s<n;s++)t[s].clear();return this}clone(t){return t||(t={}),t.container=typeof document<"u"&&document.createElement("div"),ye.prototype.clone.call(this,t)}destroy(){super.destroy();const t=this.content;t&&T._isInDocument(t)&&this.container().removeChild(t);const n=Ri.indexOf(this);return n>-1&&Ri.splice(n,1),T.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(T.warn(h2),null)}_getPointerById(t){return this._pointerPositions.find(n=>n.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){t={...t},t.x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();const n=new Aa({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),s=n.getContext()._context,l=this.children;return(t.x||t.y)&&s.translate(-1*t.x,-1*t.y),l.forEach(function(o){if(!o.isVisible())return;const h=o._toKonvaCanvas(t);s.drawImage(h._canvas,t.x,t.y,h.getWidth()/h.getPixelRatio(),h.getHeight()/h.getPixelRatio())}),n}getIntersection(t){if(!t)return null;const n=this.children,s=n.length,l=s-1;for(let o=l;o>=0;o--){const h=n[o].getIntersection(t);if(h)return h}return null}_resizeDOM(){const t=this.width(),n=this.height();this.content&&(this.content.style.width=t+Tc,this.content.style.height=n+Tc),this.bufferCanvas.setSize(t,n),this.bufferHitCanvas.setSize(t,n),this.children.forEach(s=>{s.setSize({width:t,height:n}),s.draw()})}add(t,...n){if(arguments.length>1){for(let l=0;l<arguments.length;l++)this.add(arguments[l]);return this}super.add(t);const s=this.children.length;return s>o2&&T.warn("The stage has "+s+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),X.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return e0(t,this)}setPointerCapture(t){a0(t,this)}releaseCapture(t){Ai(t)}getLayers(){return this.children}_bindContentEvents(){X.isBrowser&&u2.forEach(([t,n])=>{this.content.addEventListener(t,s=>{this[n](s)},{passive:!1})})}_pointerenter(t){this.setPointersPositions(t);const n=Gn(t.type);n&&this._fire(n.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const n=Gn(t.type);n&&this._fire(n.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let n=this[t+"targetShape"];return n&&!n.getStage()&&(n=null),n}_pointerleave(t){const n=Gn(t.type),s=Ti(t.type);if(!n)return;this.setPointersPositions(t);const l=this._getTargetShape(s),o=!(X.isDragging()||X.isTransforming())||X.hitOnDragEnabled;l&&o?(l._fireAndBubble(n.pointerout,{evt:t}),l._fireAndBubble(n.pointerleave,{evt:t}),this._fire(n.pointerleave,{evt:t,target:this,currentTarget:this}),this[s+"targetShape"]=null):o&&(this._fire(n.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(n.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(t){const n=Gn(t.type),s=Ti(t.type);if(!n)return;this.setPointersPositions(t);let l=!1;this._changedPointerPositions.forEach(o=>{const h=this.getIntersection(o);if(St.justDragged=!1,X["_"+s+"ListenClick"]=!0,!h||!h.isListening()){this[s+"ClickStartShape"]=void 0;return}X.capturePointerEventsEnabled&&h.setPointerCapture(o.id),this[s+"ClickStartShape"]=h,h._fireAndBubble(n.pointerdown,{evt:t,pointerId:o.id}),l=!0;const f=t.type.indexOf("touch")>=0;h.preventDefault()&&t.cancelable&&f&&t.preventDefault()}),l||this._fire(n.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(t){const n=Gn(t.type),s=Ti(t.type);if(!n)return;const l=t.type.indexOf("touch")>=0||t.pointerType==="touch";if(X.isDragging()&&St.node.preventDefault()&&t.cancelable&&l&&t.preventDefault(),this.setPointersPositions(t),!(!(X.isDragging()||X.isTransforming())||X.hitOnDragEnabled))return;const h={};let f=!1;const g=this._getTargetShape(s);this._changedPointerPositions.forEach(p=>{const m=Ur(p.id)||this.getIntersection(p),S=p.id,y={evt:t,pointerId:S},b=g!==m;if(b&&g&&(g._fireAndBubble(n.pointerout,{...y},m),g._fireAndBubble(n.pointerleave,{...y},m)),m){if(h[m._id])return;h[m._id]=!0}m&&m.isListening()?(f=!0,b&&(m._fireAndBubble(n.pointerover,{...y},g),m._fireAndBubble(n.pointerenter,{...y},g),this[s+"targetShape"]=m),m._fireAndBubble(n.pointermove,{...y})):g&&(this._fire(n.pointerover,{evt:t,target:this,currentTarget:this,pointerId:S}),this[s+"targetShape"]=null)}),f||this._fire(n.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const n=Gn(t.type),s=Ti(t.type);if(!n)return;this.setPointersPositions(t);const l=this[s+"ClickStartShape"],o=this[s+"ClickEndShape"],h={};let f=!1;this._changedPointerPositions.forEach(g=>{const p=Ur(g.id)||this.getIntersection(g);if(p){if(p.releaseCapture(g.id),h[p._id])return;h[p._id]=!0}const m=g.id,S={evt:t,pointerId:m};let y=!1;X["_"+s+"InDblClickWindow"]?(y=!0,clearTimeout(this[s+"DblTimeout"])):St.justDragged||(X["_"+s+"InDblClickWindow"]=!0,clearTimeout(this[s+"DblTimeout"])),this[s+"DblTimeout"]=setTimeout(function(){X["_"+s+"InDblClickWindow"]=!1},X.dblClickWindow),p&&p.isListening()?(f=!0,this[s+"ClickEndShape"]=p,p._fireAndBubble(n.pointerup,{...S}),X["_"+s+"ListenClick"]&&l&&l===p&&(p._fireAndBubble(n.pointerclick,{...S}),y&&o&&o===p&&p._fireAndBubble(n.pointerdblclick,{...S}))):(this[s+"ClickEndShape"]=null,f||(this._fire(n.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),f=!0),X["_"+s+"ListenClick"]&&this._fire(n.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:m}),y&&this._fire(n.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:m}))}),f||this._fire(n.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),X["_"+s+"ListenClick"]=!1,t.cancelable&&s!=="touch"&&s!=="pointer"&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);const n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(Fr,{evt:t}):this._fire(Fr,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);const n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(kr,{evt:t}):this._fire(kr,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const n=Ur(t.pointerId)||this.getIntersection(this.getPointerPosition());n&&n._fireAndBubble(Un,ho(t)),Ai(t.pointerId)}_lostpointercapture(t){Ai(t.pointerId)}setPointersPositions(t){const n=this._getContentPosition();let s=null,l=null;t=t||window.event,t.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,o=>{this._pointerPositions.push({id:o.identifier,x:(o.clientX-n.left)/n.scaleX,y:(o.clientY-n.top)/n.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,o=>{this._changedPointerPositions.push({id:o.identifier,x:(o.clientX-n.left)/n.scaleX,y:(o.clientY-n.top)/n.scaleY})})):(s=(t.clientX-n.left)/n.scaleX,l=(t.clientY-n.top)/n.scaleY,this.pointerPos={x:s,y:l},this._pointerPositions=[{x:s,y:l,id:T._getFirstPointerId(t)}],this._changedPointerPositions=[{x:s,y:l,id:T._getFirstPointerId(t)}])}_setPointerPosition(t){T.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Aa({width:this.width(),height:this.height()}),this.bufferHitCanvas=new oo({pixelRatio:1,width:this.width(),height:this.height()}),!X.isBrowser)return;const t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}cache(){return T.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}};Qs.prototype.nodeType=i2;Gt(Qs);E.addGetterSetter(Qs,"container");X.isBrowser&&document.addEventListener("visibilitychange",()=>{Ri.forEach(u=>{u.batchDraw()})});const d0="hasShadow",g0="shadowRGBA",p0="patternImage",m0="linearGradient",v0="radialGradient";let Bs;function wr(){return Bs||(Bs=T.createCanvasElement().getContext("2d"),Bs)}const Ni={};function c2(u){const t=this.attrs.fillRule;t?u.fill(t):u.fill()}function f2(u){u.stroke()}function d2(u){const t=this.attrs.fillRule;t?u.fill(t):u.fill()}function g2(u){u.stroke()}function p2(){this._clearCache(d0)}function m2(){this._clearCache(g0)}function v2(){this._clearCache(p0)}function y2(){this._clearCache(m0)}function S2(){this._clearCache(v0)}class U extends Y{constructor(t){super(t);let n;for(;n=T.getRandomColor(),!(n&&!(n in Ni)););this.colorKey=n,Ni[n]=this}getContext(){return T.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return T.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(d0,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(p0,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const n=wr().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(n&&n.setTransform){const s=new ve;s.translate(this.fillPatternX(),this.fillPatternY()),s.rotate(X.getAngle(this.fillPatternRotation())),s.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),s.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const l=s.getMatrix(),o=typeof DOMMatrix>"u"?{a:l[0],b:l[1],c:l[2],d:l[3],e:l[4],f:l[5]}:new DOMMatrix(l);n.setTransform(o)}return n}}_getLinearGradient(){return this._getCache(m0,this.__getLinearGradient)}__getLinearGradient(){const t=this.fillLinearGradientColorStops();if(t){const n=wr(),s=this.fillLinearGradientStartPoint(),l=this.fillLinearGradientEndPoint(),o=n.createLinearGradient(s.x,s.y,l.x,l.y);for(let h=0;h<t.length;h+=2)o.addColorStop(t[h],t[h+1]);return o}}_getRadialGradient(){return this._getCache(v0,this.__getRadialGradient)}__getRadialGradient(){const t=this.fillRadialGradientColorStops();if(t){const n=wr(),s=this.fillRadialGradientStartPoint(),l=this.fillRadialGradientEndPoint(),o=n.createRadialGradient(s.x,s.y,this.fillRadialGradientStartRadius(),l.x,l.y,this.fillRadialGradientEndRadius());for(let h=0;h<t.length;h+=2)o.addColorStop(t[h],t[h+1]);return o}}getShadowRGBA(){return this._getCache(g0,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const t=T.colorToRGBA(this.shadowColor());if(t)return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return t==="auto"?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){const n=this.getStage();if(!n)return!1;const s=n.bufferHitCanvas;return s.getContext().clear(),this.drawHit(s,void 0,!0),s.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return Y.prototype.destroy.call(this),delete Ni[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var n;if(!((n=this.attrs.perfectDrawEnabled)!==null&&n!==void 0?n:!0))return!1;const l=t||this.hasFill(),o=this.hasStroke(),h=this.getAbsoluteOpacity()!==1;if(l&&o&&h)return!0;const f=this.hasShadow(),g=this.shadowForStrokeEnabled();return!!(l&&o&&f&&g)}setStrokeHitEnabled(t){T.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){let n=!1,s=this.getParent();for(;s;){if(s.isCached()){n=!0;break}s=s.getParent()}const l=t.skipTransform,o=t.relativeTo||n&&this.getStage()||void 0,h=this.getSelfRect(),g=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,p=h.width+g,m=h.height+g,S=!t.skipShadow&&this.hasShadow(),y=S?this.shadowOffsetX():0,b=S?this.shadowOffsetY():0,_=p+Math.abs(y),G=m+Math.abs(b),N=S&&this.shadowBlur()||0,O=_+N*2,A=G+N*2,z={width:O,height:A,x:-(g/2+N)+Math.min(y,0)+h.x,y:-(g/2+N)+Math.min(b,0)+h.y};return l?z:this._transformedRect(z,o)}drawScene(t,n,s){const l=this.getLayer(),o=t||l.getCanvas(),h=o.getContext(),f=this._getCanvasCache(),g=this.getSceneFunc(),p=this.hasShadow();let m;const S=n===this;if(!this.isVisible()&&!S)return this;if(f){h.save();const y=this.getAbsoluteTransform(n).getMatrix();return h.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._drawCachedSceneCanvas(h),h.restore(),this}if(!g)return this;if(h.save(),this._useBufferCanvas()){m=this.getStage();const y=s||m.bufferCanvas,b=y.getContext();b.clear(),b.save(),b._applyLineJoin(this),b._applyMiterLimit(this);const _=this.getAbsoluteTransform(n).getMatrix();b.transform(_[0],_[1],_[2],_[3],_[4],_[5]),g.call(this,b,this),b.restore();const G=y.pixelRatio;p&&h._applyShadow(this),h._applyOpacity(this),h._applyGlobalCompositeOperation(this),h.drawImage(y._canvas,y.x||0,y.y||0,y.width/G,y.height/G)}else{if(h._applyLineJoin(this),h._applyMiterLimit(this),!S){const y=this.getAbsoluteTransform(n).getMatrix();h.transform(y[0],y[1],y[2],y[3],y[4],y[5]),h._applyOpacity(this),h._applyGlobalCompositeOperation(this)}p&&h._applyShadow(this),g.call(this,h,this)}return h.restore(),this}drawHit(t,n,s=!1){if(!this.shouldDrawHit(n,s))return this;const l=this.getLayer(),o=t||l.hitCanvas,h=o&&o.getContext(),f=this.hitFunc()||this.sceneFunc(),g=this._getCanvasCache(),p=g&&g.hit;if(this.colorKey||T.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),p){h.save();const S=this.getAbsoluteTransform(n).getMatrix();return h.transform(S[0],S[1],S[2],S[3],S[4],S[5]),this._drawCachedHitCanvas(h),h.restore(),this}if(!f)return this;if(h.save(),h._applyLineJoin(this),h._applyMiterLimit(this),!(this===n)){const S=this.getAbsoluteTransform(n).getMatrix();h.transform(S[0],S[1],S[2],S[3],S[4],S[5])}return f.call(this,h,this),h.restore(),this}drawHitFromCache(t=0){const n=this._getCanvasCache(),s=this._getCachedSceneCanvas(),l=n.hit,o=l.getContext(),h=l.getWidth(),f=l.getHeight();o.clear(),o.drawImage(s._canvas,0,0,h,f);try{const g=o.getImageData(0,0,h,f),p=g.data,m=p.length,S=T._hexToRgb(this.colorKey);for(let y=0;y<m;y+=4)p[y+3]>t?(p[y]=S.r,p[y+1]=S.g,p[y+2]=S.b,p[y+3]=255):p[y+3]=0;o.putImageData(g,0,0)}catch(g){T.error("Unable to draw hit graph from cached scene canvas. "+g.message)}return this}hasPointerCapture(t){return e0(t,this)}setPointerCapture(t){a0(t,this)}releaseCapture(t){Ai(t)}}U.prototype._fillFunc=c2;U.prototype._strokeFunc=f2;U.prototype._fillFuncHit=d2;U.prototype._strokeFuncHit=g2;U.prototype._centroid=!1;U.prototype.nodeType="Shape";Gt(U);U.prototype.eventListeners={};U.prototype.on.call(U.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",p2);U.prototype.on.call(U.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",m2);U.prototype.on.call(U.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",v2);U.prototype.on.call(U.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",y2);U.prototype.on.call(U.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",S2);E.addGetterSetter(U,"stroke",void 0,$c());E.addGetterSetter(U,"strokeWidth",2,q());E.addGetterSetter(U,"fillAfterStrokeEnabled",!1);E.addGetterSetter(U,"hitStrokeWidth","auto",uo());E.addGetterSetter(U,"strokeHitEnabled",!0,ze());E.addGetterSetter(U,"perfectDrawEnabled",!0,ze());E.addGetterSetter(U,"shadowForStrokeEnabled",!0,ze());E.addGetterSetter(U,"lineJoin");E.addGetterSetter(U,"lineCap");E.addGetterSetter(U,"miterLimit");E.addGetterSetter(U,"sceneFunc");E.addGetterSetter(U,"hitFunc");E.addGetterSetter(U,"dash");E.addGetterSetter(U,"dashOffset",0,q());E.addGetterSetter(U,"shadowColor",void 0,Fa());E.addGetterSetter(U,"shadowBlur",0,q());E.addGetterSetter(U,"shadowOpacity",1,q());E.addComponentsGetterSetter(U,"shadowOffset",["x","y"]);E.addGetterSetter(U,"shadowOffsetX",0,q());E.addGetterSetter(U,"shadowOffsetY",0,q());E.addGetterSetter(U,"fillPatternImage");E.addGetterSetter(U,"fill",void 0,$c());E.addGetterSetter(U,"fillPatternX",0,q());E.addGetterSetter(U,"fillPatternY",0,q());E.addGetterSetter(U,"fillLinearGradientColorStops");E.addGetterSetter(U,"strokeLinearGradientColorStops");E.addGetterSetter(U,"fillRadialGradientStartRadius",0);E.addGetterSetter(U,"fillRadialGradientEndRadius",0);E.addGetterSetter(U,"fillRadialGradientColorStops");E.addGetterSetter(U,"fillPatternRepeat","repeat");E.addGetterSetter(U,"fillEnabled",!0);E.addGetterSetter(U,"strokeEnabled",!0);E.addGetterSetter(U,"shadowEnabled",!0);E.addGetterSetter(U,"dashEnabled",!0);E.addGetterSetter(U,"strokeScaleEnabled",!0);E.addGetterSetter(U,"fillPriority","color");E.addComponentsGetterSetter(U,"fillPatternOffset",["x","y"]);E.addGetterSetter(U,"fillPatternOffsetX",0,q());E.addGetterSetter(U,"fillPatternOffsetY",0,q());E.addComponentsGetterSetter(U,"fillPatternScale",["x","y"]);E.addGetterSetter(U,"fillPatternScaleX",1,q());E.addGetterSetter(U,"fillPatternScaleY",1,q());E.addComponentsGetterSetter(U,"fillLinearGradientStartPoint",["x","y"]);E.addComponentsGetterSetter(U,"strokeLinearGradientStartPoint",["x","y"]);E.addGetterSetter(U,"fillLinearGradientStartPointX",0);E.addGetterSetter(U,"strokeLinearGradientStartPointX",0);E.addGetterSetter(U,"fillLinearGradientStartPointY",0);E.addGetterSetter(U,"strokeLinearGradientStartPointY",0);E.addComponentsGetterSetter(U,"fillLinearGradientEndPoint",["x","y"]);E.addComponentsGetterSetter(U,"strokeLinearGradientEndPoint",["x","y"]);E.addGetterSetter(U,"fillLinearGradientEndPointX",0);E.addGetterSetter(U,"strokeLinearGradientEndPointX",0);E.addGetterSetter(U,"fillLinearGradientEndPointY",0);E.addGetterSetter(U,"strokeLinearGradientEndPointY",0);E.addComponentsGetterSetter(U,"fillRadialGradientStartPoint",["x","y"]);E.addGetterSetter(U,"fillRadialGradientStartPointX",0);E.addGetterSetter(U,"fillRadialGradientStartPointY",0);E.addComponentsGetterSetter(U,"fillRadialGradientEndPoint",["x","y"]);E.addGetterSetter(U,"fillRadialGradientEndPointX",0);E.addGetterSetter(U,"fillRadialGradientEndPointY",0);E.addGetterSetter(U,"fillPatternRotation",0);E.addGetterSetter(U,"fillRule",void 0,Fa());E.backCompat(U,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const _2="#",E2="beforeDraw",C2="draw",y0=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],b2=y0.length;let ka=class extends ye{constructor(t){super(t),this.canvas=new Aa,this.hitCanvas=new oo({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),t<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[t+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Y.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Y.prototype.moveUp.call(this))return!1;const n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Y.prototype.moveDown.call(this)){const t=this.getStage();if(t){const n=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Y.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const n=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return Y.prototype.remove.call(this),t&&t.parentNode&&T._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:n}){return this.canvas.setSize(t,n),this.hitCanvas.setSize(t,n),this._setSmoothEnabled(),this}_validateAdd(t){const n=t.getType();n!=="Group"&&n!=="Shape"&&T.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t={...t},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),Y.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){T.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){T.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,T.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let n=1,s=!1;for(;;){for(let l=0;l<b2;l++){const o=y0[l],h=this._getIntersection({x:t.x+o.x*n,y:t.y+o.y*n}),f=h.shape;if(f)return f;if(s=!!h.antialiased,!h.antialiased)break}if(s)n+=1;else return null}}_getIntersection(t){const n=this.hitCanvas.pixelRatio,s=this.hitCanvas.context.getImageData(Math.round(t.x*n),Math.round(t.y*n),1,1).data,l=s[3];if(l===255){const o=T._rgbToHex(s[0],s[1],s[2]),h=Ni[_2+o];return h?{shape:h}:{antialiased:!0}}else if(l>0)return{antialiased:!0};return{}}drawScene(t,n,s){const l=this.getLayer(),o=t||l&&l.getCanvas();return this._fire(E2,{node:this}),this.clearBeforeDraw()&&o.getContext().clear(),ye.prototype.drawScene.call(this,o,n,s),this._fire(C2,{node:this}),this}drawHit(t,n){const s=this.getLayer(),l=t||s&&s.hitCanvas;return s&&s.clearBeforeDraw()&&s.getHitCanvas().getContext().clear(),ye.prototype.drawHit.call(this,l,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){T.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return T.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return T.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};ka.prototype.nodeType="Layer";Gt(ka);E.addGetterSetter(ka,"imageSmoothingEnabled",!0);E.addGetterSetter(ka,"clearBeforeDraw",!0);E.addGetterSetter(ka,"hitGraphEnabled",!0,ze());class co extends ka{constructor(t){super(t),this.listening(!1),T.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}co.prototype.nodeType="FastLayer";Gt(co);class Ln extends ye{_validateAdd(t){const n=t.getType();n!=="Group"&&n!=="Shape"&&T.throw("You may only add groups and shapes to groups.")}}Ln.prototype.nodeType="Group";Gt(Ln);const Yr=(function(){return Ja.performance&&Ja.performance.now?function(){return Ja.performance.now()}:function(){return new Date().getTime()}})();class Me{constructor(t,n){this.id=Me.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Yr(),frameRate:0},this.func=t,this.setLayers(n)}setLayers(t){let n=[];return t&&(n=Array.isArray(t)?t:[t]),this.layers=n,this}getLayers(){return this.layers}addLayer(t){const n=this.layers,s=n.length;for(let l=0;l<s;l++)if(n[l]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const n=Me.animations,s=n.length;for(let l=0;l<s;l++)if(n[l].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Yr(),Me._addAnimation(this),this}stop(){return Me._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const n=t.id,s=this.animations,l=s.length;for(let o=0;o<l;o++)if(s[o].id===n){this.animations.splice(o,1);break}}static _runFrames(){const t={},n=this.animations;for(let s=0;s<n.length;s++){const l=n[s],o=l.layers,h=l.func;l._updateFrameObject(Yr());const f=o.length;let g;if(h?g=h.call(l,l.frame)!==!1:g=!0,!!g)for(let p=0;p<f;p++){const m=o[p];m._id!==void 0&&(t[m._id]=m)}}for(const s in t)t.hasOwnProperty(s)&&t[s].batchDraw()}static _animationLoop(){const t=Me;t.animations.length?(t._runFrames(),T.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,T.requestAnimFrame(this._animationLoop))}}Me.animations=[];Me.animIdCounter=0;Me.animRunning=!1;const x2={node:1,duration:1,easing:1,onFinish:1,yoyo:1},T2=1,Ac=2,Rc=3,Nc=["fill","stroke","shadowColor"];let M2=0;class A2{constructor(t,n,s,l,o,h,f){this.prop=t,this.propFunc=n,this.begin=l,this._pos=l,this.duration=h,this._change=0,this.prevPos=0,this.yoyo=f,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=s,this._change=o-this.begin,this.pause()}fire(t){const n=this[t];n&&n()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return t===void 0&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=Ac,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=Rc,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const t=this.getTimer()-this._startTime;this.state===Ac?this.setTime(t):this.state===Rc&&this.setTime(this.duration-t)}pause(){this.state=T2,this.fire("onPause")}getTimer(){return new Date().getTime()}}class Mt{constructor(t){const n=this,s=t.node,l=s._id,o=t.easing||Oi.Linear,h=!!t.yoyo;let f,g;typeof t.duration>"u"?f=.3:t.duration===0?f=.001:f=t.duration,this.node=s,this._id=M2++;const p=s.getLayer()||(s instanceof X.Stage?s.getLayers():null);p||T.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Me(function(){n.tween.onEnterFrame()},p),this.tween=new A2(g,function(m){n._tweenFunc(m)},o,0,1,f*1e3,h),this._addListeners(),Mt.attrs[l]||(Mt.attrs[l]={}),Mt.attrs[l][this._id]||(Mt.attrs[l][this._id]={}),Mt.tweens[l]||(Mt.tweens[l]={});for(g in t)x2[g]===void 0&&this._addAttr(g,t[g]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,n){const s=this.node,l=s._id;let o,h,f,g,p;const m=Mt.tweens[l][t];m&&delete Mt.attrs[l][m][t];let S=s.getAttr(t);if(T._isArray(n))if(o=[],h=Math.max(n.length,S.length),t==="points"&&n.length!==S.length&&(n.length>S.length?(g=S,S=T._prepareArrayForTween(S,n,s.closed())):(f=n,n=T._prepareArrayForTween(n,S,s.closed()))),t.indexOf("fill")===0)for(let y=0;y<h;y++)if(y%2===0)o.push(n[y]-S[y]);else{const b=T.colorToRGBA(S[y]);p=T.colorToRGBA(n[y]),S[y]=b,o.push({r:p.r-b.r,g:p.g-b.g,b:p.b-b.b,a:p.a-b.a})}else for(let y=0;y<h;y++)o.push(n[y]-S[y]);else Nc.indexOf(t)!==-1?(S=T.colorToRGBA(S),p=T.colorToRGBA(n),o={r:p.r-S.r,g:p.g-S.g,b:p.b-S.b,a:p.a-S.a}):o=n-S;Mt.attrs[l][this._id][t]={start:S,diff:o,end:n,trueEnd:f,trueStart:g},Mt.tweens[l][t]=this._id}_tweenFunc(t){const n=this.node,s=Mt.attrs[n._id][this._id];let l,o,h,f,g,p,m,S;for(l in s){if(o=s[l],h=o.start,f=o.diff,S=o.end,T._isArray(h))if(g=[],m=Math.max(h.length,S.length),l.indexOf("fill")===0)for(p=0;p<m;p++)p%2===0?g.push((h[p]||0)+f[p]*t):g.push("rgba("+Math.round(h[p].r+f[p].r*t)+","+Math.round(h[p].g+f[p].g*t)+","+Math.round(h[p].b+f[p].b*t)+","+(h[p].a+f[p].a*t)+")");else for(p=0;p<m;p++)g.push((h[p]||0)+f[p]*t);else Nc.indexOf(l)!==-1?g="rgba("+Math.round(h.r+f.r*t)+","+Math.round(h.g+f.g*t)+","+Math.round(h.b+f.b*t)+","+(h.a+f.a*t)+")":g=h+f*t;n.setAttr(l,g)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const t=this.node,n=Mt.attrs[t._id][this._id];n.points&&n.points.trueEnd&&t.setAttr("points",n.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const t=this.node,n=Mt.attrs[t._id][this._id];n.points&&n.points.trueStart&&t.points(n.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(t*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const t=this.node._id,n=this._id,s=Mt.tweens[t];this.pause(),this.anim&&this.anim.stop();for(const l in s)delete Mt.tweens[t][l];delete Mt.attrs[t][n],Mt.tweens[t]&&(Object.keys(Mt.tweens[t]).length===0&&delete Mt.tweens[t],Object.keys(Mt.attrs[t]).length===0&&delete Mt.attrs[t])}}Mt.attrs={};Mt.tweens={};Y.prototype.to=function(u){const t=u.onFinish;u.node=this,u.onFinish=function(){this.destroy(),t&&t()},new Mt(u).play()};const Oi={BackEaseIn(u,t,n,s){return n*(u/=s)*u*((1.70158+1)*u-1.70158)+t},BackEaseOut(u,t,n,s){return n*((u=u/s-1)*u*((1.70158+1)*u+1.70158)+1)+t},BackEaseInOut(u,t,n,s){let l=1.70158;return(u/=s/2)<1?n/2*(u*u*(((l*=1.525)+1)*u-l))+t:n/2*((u-=2)*u*(((l*=1.525)+1)*u+l)+2)+t},ElasticEaseIn(u,t,n,s,l,o){let h=0;return u===0?t:(u/=s)===1?t+n:(o||(o=s*.3),!l||l<Math.abs(n)?(l=n,h=o/4):h=o/(2*Math.PI)*Math.asin(n/l),-(l*Math.pow(2,10*(u-=1))*Math.sin((u*s-h)*(2*Math.PI)/o))+t)},ElasticEaseOut(u,t,n,s,l,o){let h=0;return u===0?t:(u/=s)===1?t+n:(o||(o=s*.3),!l||l<Math.abs(n)?(l=n,h=o/4):h=o/(2*Math.PI)*Math.asin(n/l),l*Math.pow(2,-10*u)*Math.sin((u*s-h)*(2*Math.PI)/o)+n+t)},ElasticEaseInOut(u,t,n,s,l,o){let h=0;return u===0?t:(u/=s/2)===2?t+n:(o||(o=s*(.3*1.5)),!l||l<Math.abs(n)?(l=n,h=o/4):h=o/(2*Math.PI)*Math.asin(n/l),u<1?-.5*(l*Math.pow(2,10*(u-=1))*Math.sin((u*s-h)*(2*Math.PI)/o))+t:l*Math.pow(2,-10*(u-=1))*Math.sin((u*s-h)*(2*Math.PI)/o)*.5+n+t)},BounceEaseOut(u,t,n,s){return(u/=s)<1/2.75?n*(7.5625*u*u)+t:u<2/2.75?n*(7.5625*(u-=1.5/2.75)*u+.75)+t:u<2.5/2.75?n*(7.5625*(u-=2.25/2.75)*u+.9375)+t:n*(7.5625*(u-=2.625/2.75)*u+.984375)+t},BounceEaseIn(u,t,n,s){return n-Oi.BounceEaseOut(s-u,0,n,s)+t},BounceEaseInOut(u,t,n,s){return u<s/2?Oi.BounceEaseIn(u*2,0,n,s)*.5+t:Oi.BounceEaseOut(u*2-s,0,n,s)*.5+n*.5+t},EaseIn(u,t,n,s){return n*(u/=s)*u+t},EaseOut(u,t,n,s){return-n*(u/=s)*(u-2)+t},EaseInOut(u,t,n,s){return(u/=s/2)<1?n/2*u*u+t:-n/2*(--u*(u-2)-1)+t},StrongEaseIn(u,t,n,s){return n*(u/=s)*u*u*u*u+t},StrongEaseOut(u,t,n,s){return n*((u=u/s-1)*u*u*u*u+1)+t},StrongEaseInOut(u,t,n,s){return(u/=s/2)<1?n/2*u*u*u*u*u+t:n/2*((u-=2)*u*u*u*u+2)+t},Linear(u,t,n,s){return n*u/s+t}},wn=T._assign(X,{Util:T,Transform:ve,Node:Y,Container:ye,Stage:Qs,stages:Ri,Layer:ka,FastLayer:co,Group:Ln,DD:St,Shape:U,shapes:Ni,Animation:Me,Tween:Mt,Easings:Oi,Context:Vs,Canvas:ro});class ta extends U{_sceneFunc(t){const n=X.getAngle(this.angle()),s=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,n,s),t.arc(0,0,this.innerRadius(),n,0,!s),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),n=this.outerRadius(),s=this.clockwise(),l=X.getAngle(s?360-this.angle():this.angle()),o=Math.cos(Math.min(l,Math.PI)),h=1,f=Math.sin(Math.min(Math.max(Math.PI,l),3*Math.PI/2)),g=Math.sin(Math.min(l,Math.PI/2)),p=o*(o>0?t:n),m=h*n,S=f*(f>0?t:n),y=g*(g>0?n:t);return{x:p,y:s?-1*y:S,width:m-p,height:y-S}}}ta.prototype._centroid=!0;ta.prototype.className="Arc";ta.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];Gt(ta);E.addGetterSetter(ta,"innerRadius",0,q());E.addGetterSetter(ta,"outerRadius",0,q());E.addGetterSetter(ta,"angle",0,q());E.addGetterSetter(ta,"clockwise",!1,ze());function Wr(u,t,n,s,l,o,h){const f=Math.sqrt(Math.pow(n-u,2)+Math.pow(s-t,2)),g=Math.sqrt(Math.pow(l-n,2)+Math.pow(o-s,2)),p=h*f/(f+g),m=h*g/(f+g),S=n-p*(l-u),y=s-p*(o-t),b=n+m*(l-u),_=s+m*(o-t);return[S,y,b,_]}function Oc(u,t){const n=u.length,s=[];for(let l=2;l<n-2;l+=2){const o=Wr(u[l-2],u[l-1],u[l],u[l+1],u[l+2],u[l+3],t);isNaN(o[0])||(s.push(o[0]),s.push(o[1]),s.push(u[l]),s.push(u[l+1]),s.push(o[2]),s.push(o[3]))}return s}let ea=class extends U{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){const n=this.points(),s=n.length,l=this.tension(),o=this.closed(),h=this.bezier();if(!s)return;let f=0;if(t.beginPath(),t.moveTo(n[0],n[1]),l!==0&&s>4){const g=this.getTensionPoints(),p=g.length;for(f=o?0:4,o||t.quadraticCurveTo(g[0],g[1],g[2],g[3]);f<p-2;)t.bezierCurveTo(g[f++],g[f++],g[f++],g[f++],g[f++],g[f++]);o||t.quadraticCurveTo(g[p-2],g[p-1],n[s-2],n[s-1])}else if(h)for(f=2;f<s;)t.bezierCurveTo(n[f++],n[f++],n[f++],n[f++],n[f++],n[f++]);else for(f=2;f<s;f+=2)t.lineTo(n[f],n[f+1]);o?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():Oc(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),n=t.length,s=this.tension(),l=Wr(t[n-2],t[n-1],t[0],t[1],t[2],t[3],s),o=Wr(t[n-4],t[n-3],t[n-2],t[n-1],t[0],t[1],s),h=Oc(t,s);return[l[2],l[3]].concat(h).concat([o[0],o[1],t[n-2],t[n-1],o[2],o[3],l[0],l[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:t=this.points();let n=t[0],s=t[0],l=t[1],o=t[1],h,f;for(let g=0;g<t.length/2;g++)h=t[g*2],f=t[g*2+1],n=Math.min(n,h),s=Math.max(s,h),l=Math.min(l,f),o=Math.max(o,f);return{x:n,y:l,width:s-n,height:o-l}}};ea.prototype.className="Line";ea.prototype._attrsAffectingSize=["points","bezier","tension"];Gt(ea);E.addGetterSetter(ea,"closed",!1);E.addGetterSetter(ea,"bezier",!1);E.addGetterSetter(ea,"tension",0,q());E.addGetterSetter(ea,"points",[],Pd());const R2=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],N2=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],O2=[[1],[1,1],[1,2,1],[1,3,3,1]],Dc=(u,t,n)=>{let s,l;const h=n/2;s=0;for(let f=0;f<20;f++)l=h*R2[20][f]+h,s+=N2[20][f]*D2(u,t,l);return h*s},Gc=(u,t,n)=>{n===void 0&&(n=1);const s=u[0]-2*u[1]+u[2],l=t[0]-2*t[1]+t[2],o=2*u[1]-2*u[0],h=2*t[1]-2*t[0],f=4*(s*s+l*l),g=4*(s*o+l*h),p=o*o+h*h;if(f===0)return n*Math.sqrt(Math.pow(u[2]-u[0],2)+Math.pow(t[2]-t[0],2));const m=g/(2*f),S=p/f,y=n+m,b=S-m*m,_=y*y+b>0?Math.sqrt(y*y+b):0,G=m*m+b>0?Math.sqrt(m*m+b):0,N=m+Math.sqrt(m*m+b)!==0?b*Math.log(Math.abs((y+_)/(m+G))):0;return Math.sqrt(f)/2*(y*_-m*G+N)};function D2(u,t,n){const s=Ir(1,n,u),l=Ir(1,n,t),o=s*s+l*l;return Math.sqrt(o)}const Ir=(u,t,n)=>{const s=n.length-1;let l,o;if(s===0)return 0;if(u===0){o=0;for(let h=0;h<=s;h++)o+=O2[s][h]*Math.pow(1-t,s-h)*Math.pow(t,h)*n[h];return o}else{l=new Array(s);for(let h=0;h<s;h++)l[h]=s*(n[h+1]-n[h]);return Ir(u-1,t,l)}},zc=(u,t,n)=>{let s=1,l=u/t,o=(u-n(l))/t,h=0;for(;s>.001;){const f=n(l+o),g=Math.abs(u-f)/t;if(g<s)s=g,l+=o;else{const p=n(l-o),m=Math.abs(u-p)/t;m<s?(s=m,l-=o):o/=2}if(h++,h>500)break}return l};class At extends U{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=At.parsePathData(this.data()),this.pathLength=At.getPathLength(this.dataArray)}_sceneFunc(t){const n=this.dataArray;t.beginPath();let s=!1;for(let l=0;l<n.length;l++){const o=n[l].command,h=n[l].points;switch(o){case"L":t.lineTo(h[0],h[1]);break;case"M":t.moveTo(h[0],h[1]);break;case"C":t.bezierCurveTo(h[0],h[1],h[2],h[3],h[4],h[5]);break;case"Q":t.quadraticCurveTo(h[0],h[1],h[2],h[3]);break;case"A":const f=h[0],g=h[1],p=h[2],m=h[3],S=h[4],y=h[5],b=h[6],_=h[7],G=p>m?p:m,N=p>m?1:p/m,O=p>m?m/p:1;t.translate(f,g),t.rotate(b),t.scale(N,O),t.arc(0,0,G,S,S+y,1-_),t.scale(1/N,1/O),t.rotate(-b),t.translate(-f,-g);break;case"z":s=!0,t.closePath();break}}!s&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach(function(g){if(g.command==="A"){const p=g.points[4],m=g.points[5],S=g.points[4]+m;let y=Math.PI/180;if(Math.abs(p-S)<y&&(y=Math.abs(p-S)),m<0)for(let b=p-y;b>S;b-=y){const _=At.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],b,0);t.push(_.x,_.y)}else for(let b=p+y;b<S;b+=y){const _=At.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],b,0);t.push(_.x,_.y)}}else if(g.command==="C")for(let p=0;p<=1;p+=.01){const m=At.getPointOnCubicBezier(p,g.start.x,g.start.y,g.points[0],g.points[1],g.points[2],g.points[3],g.points[4],g.points[5]);t.push(m.x,m.y)}else t=t.concat(g.points)});let n=t[0],s=t[0],l=t[1],o=t[1],h,f;for(let g=0;g<t.length/2;g++)h=t[g*2],f=t[g*2+1],isNaN(h)||(n=Math.min(n,h),s=Math.max(s,h)),isNaN(f)||(l=Math.min(l,f),o=Math.max(o,f));return{x:n,y:l,width:s-n,height:o-l}}getLength(){return this.pathLength}getPointAtLength(t){return At.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,n,s,l){return Math.sqrt((s-t)*(s-t)+(l-n)*(l-n))}static getPathLength(t){let n=0;for(let s=0;s<t.length;++s)n+=t[s].pathLength;return n}static getPointAtLengthOfDataArray(t,n){let s,l=0,o=n.length;if(!o)return null;for(;l<o&&t>n[l].pathLength;)t-=n[l].pathLength,++l;if(l===o)return s=n[l-1].points.slice(-2),{x:s[0],y:s[1]};if(t<.01)return n[l].command==="M"?(s=n[l].points.slice(0,2),{x:s[0],y:s[1]}):{x:n[l].start.x,y:n[l].start.y};const h=n[l],f=h.points;switch(h.command){case"L":return At.getPointOnLine(t,h.start.x,h.start.y,f[0],f[1]);case"C":return At.getPointOnCubicBezier(zc(t,At.getPathLength(n),G=>Dc([h.start.x,f[0],f[2],f[4]],[h.start.y,f[1],f[3],f[5]],G)),h.start.x,h.start.y,f[0],f[1],f[2],f[3],f[4],f[5]);case"Q":return At.getPointOnQuadraticBezier(zc(t,At.getPathLength(n),G=>Gc([h.start.x,f[0],f[2]],[h.start.y,f[1],f[3]],G)),h.start.x,h.start.y,f[0],f[1],f[2],f[3]);case"A":const g=f[0],p=f[1],m=f[2],S=f[3],y=f[5],b=f[6];let _=f[4];return _+=y*t/h.pathLength,At.getPointOnEllipticalArc(g,p,m,S,_,b)}return null}static getPointOnLine(t,n,s,l,o,h,f){h=h??n,f=f??s;const g=this.getLineLength(n,s,l,o);if(g<1e-10)return{x:n,y:s};if(l===n)return{x:h,y:f+(o>s?t:-t)};const p=(o-s)/(l-n),m=Math.sqrt(t*t/(1+p*p))*(l<n?-1:1),S=p*m;if(Math.abs(f-s-p*(h-n))<1e-10)return{x:h+m,y:f+S};const y=((h-n)*(l-n)+(f-s)*(o-s))/(g*g),b=n+y*(l-n),_=s+y*(o-s),G=this.getLineLength(h,f,b,_),N=Math.sqrt(t*t-G*G),O=Math.sqrt(N*N/(1+p*p))*(l<n?-1:1),A=p*O;return{x:b+O,y:_+A}}static getPointOnCubicBezier(t,n,s,l,o,h,f,g,p){function m(N){return N*N*N}function S(N){return 3*N*N*(1-N)}function y(N){return 3*N*(1-N)*(1-N)}function b(N){return(1-N)*(1-N)*(1-N)}const _=g*m(t)+h*S(t)+l*y(t)+n*b(t),G=p*m(t)+f*S(t)+o*y(t)+s*b(t);return{x:_,y:G}}static getPointOnQuadraticBezier(t,n,s,l,o,h,f){function g(b){return b*b}function p(b){return 2*b*(1-b)}function m(b){return(1-b)*(1-b)}const S=h*g(t)+l*p(t)+n*m(t),y=f*g(t)+o*p(t)+s*m(t);return{x:S,y}}static getPointOnEllipticalArc(t,n,s,l,o,h){const f=Math.cos(h),g=Math.sin(h),p={x:s*Math.cos(o),y:l*Math.sin(o)};return{x:t+(p.x*f-p.y*g),y:n+(p.x*g+p.y*f)}}static parsePathData(t){if(!t)return[];let n=t;const s=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(let S=0;S<s.length;S++)n=n.replace(new RegExp(s[S],"g"),"|"+s[S]);const l=n.split("|"),o=[],h=[];let f=0,g=0;const p=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let m;for(let S=1;S<l.length;S++){let y=l[S],b=y.charAt(0);for(y=y.slice(1),h.length=0;m=p.exec(y);)h.push(m[0]);let _=[],G=b==="A"||b==="a"?0:-1;for(let N=0,O=h.length;N<O;N++){const A=h[N];if(A==="00"){_.push(0,0),G>=0&&(G+=2,G>=7&&(G-=7));continue}if(G>=0){if(G===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(A)){_.push(parseInt(A[0],10)),_.push(parseInt(A[1],10)),_.push(parseFloat(A.slice(2))),G+=3,G>=7&&(G-=7);continue}if(A==="11"||A==="10"||A==="01"){_.push(parseInt(A[0],10)),_.push(parseInt(A[1],10)),G+=2,G>=7&&(G-=7);continue}if(A==="0"||A==="1"){_.push(parseInt(A,10)),G+=1,G>=7&&(G-=7);continue}}else if(G===4){if(/^[01]\d+(?:\.\d+)?$/.test(A)){_.push(parseInt(A[0],10)),_.push(parseFloat(A.slice(1))),G+=2,G>=7&&(G-=7);continue}if(A==="0"||A==="1"){_.push(parseInt(A,10)),G+=1,G>=7&&(G-=7);continue}}const z=parseFloat(A);isNaN(z)?_.push(0):_.push(z),G+=1,G>=7&&(G-=7)}else{const z=parseFloat(A);isNaN(z)?_.push(0):_.push(z)}}for(;_.length>0&&!isNaN(_[0]);){let N="",O=[];const A=f,z=g;let H,V,j,K,Z,tt,it,ot,I,st;switch(b){case"l":f+=_.shift(),g+=_.shift(),N="L",O.push(f,g);break;case"L":f=_.shift(),g=_.shift(),O.push(f,g);break;case"m":const at=_.shift(),F=_.shift();if(f+=at,g+=F,N="M",o.length>2&&o[o.length-1].command==="z"){for(let J=o.length-2;J>=0;J--)if(o[J].command==="M"){f=o[J].points[0]+at,g=o[J].points[1]+F;break}}O.push(f,g),b="l";break;case"M":f=_.shift(),g=_.shift(),N="M",O.push(f,g),b="L";break;case"h":f+=_.shift(),N="L",O.push(f,g);break;case"H":f=_.shift(),N="L",O.push(f,g);break;case"v":g+=_.shift(),N="L",O.push(f,g);break;case"V":g=_.shift(),N="L",O.push(f,g);break;case"C":O.push(_.shift(),_.shift(),_.shift(),_.shift()),f=_.shift(),g=_.shift(),O.push(f,g);break;case"c":O.push(f+_.shift(),g+_.shift(),f+_.shift(),g+_.shift()),f+=_.shift(),g+=_.shift(),N="C",O.push(f,g);break;case"S":V=f,j=g,H=o[o.length-1],H.command==="C"&&(V=f+(f-H.points[2]),j=g+(g-H.points[3])),O.push(V,j,_.shift(),_.shift()),f=_.shift(),g=_.shift(),N="C",O.push(f,g);break;case"s":V=f,j=g,H=o[o.length-1],H.command==="C"&&(V=f+(f-H.points[2]),j=g+(g-H.points[3])),O.push(V,j,f+_.shift(),g+_.shift()),f+=_.shift(),g+=_.shift(),N="C",O.push(f,g);break;case"Q":O.push(_.shift(),_.shift()),f=_.shift(),g=_.shift(),O.push(f,g);break;case"q":O.push(f+_.shift(),g+_.shift()),f+=_.shift(),g+=_.shift(),N="Q",O.push(f,g);break;case"T":V=f,j=g,H=o[o.length-1],H.command==="Q"&&(V=f+(f-H.points[0]),j=g+(g-H.points[1])),f=_.shift(),g=_.shift(),N="Q",O.push(V,j,f,g);break;case"t":V=f,j=g,H=o[o.length-1],H.command==="Q"&&(V=f+(f-H.points[0]),j=g+(g-H.points[1])),f+=_.shift(),g+=_.shift(),N="Q",O.push(V,j,f,g);break;case"A":K=_.shift(),Z=_.shift(),tt=_.shift(),it=_.shift(),ot=_.shift(),I=f,st=g,f=_.shift(),g=_.shift(),N="A",O=this.convertEndpointToCenterParameterization(I,st,f,g,it,ot,K,Z,tt);break;case"a":K=_.shift(),Z=_.shift(),tt=_.shift(),it=_.shift(),ot=_.shift(),I=f,st=g,f+=_.shift(),g+=_.shift(),N="A",O=this.convertEndpointToCenterParameterization(I,st,f,g,it,ot,K,Z,tt);break}o.push({command:N||b,points:O,start:{x:A,y:z},pathLength:this.calcLength(A,z,N||b,O)})}(b==="z"||b==="Z")&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(t,n,s,l){let o,h,f,g;const p=At;switch(s){case"L":return p.getLineLength(t,n,l[0],l[1]);case"C":return Dc([t,l[0],l[2],l[4]],[n,l[1],l[3],l[5]],1);case"Q":return Gc([t,l[0],l[2]],[n,l[1],l[3]],1);case"A":o=0;const m=l[4],S=l[5],y=l[4]+S;let b=Math.PI/180;if(Math.abs(m-y)<b&&(b=Math.abs(m-y)),h=p.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],m,0),S<0)for(g=m-b;g>y;g-=b)f=p.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],g,0),o+=p.getLineLength(h.x,h.y,f.x,f.y),h=f;else for(g=m+b;g<y;g+=b)f=p.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],g,0),o+=p.getLineLength(h.x,h.y,f.x,f.y),h=f;return f=p.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],y,0),o+=p.getLineLength(h.x,h.y,f.x,f.y),o}return 0}static convertEndpointToCenterParameterization(t,n,s,l,o,h,f,g,p){const m=p*(Math.PI/180),S=Math.cos(m)*(t-s)/2+Math.sin(m)*(n-l)/2,y=-1*Math.sin(m)*(t-s)/2+Math.cos(m)*(n-l)/2,b=S*S/(f*f)+y*y/(g*g);b>1&&(f*=Math.sqrt(b),g*=Math.sqrt(b));let _=Math.sqrt((f*f*(g*g)-f*f*(y*y)-g*g*(S*S))/(f*f*(y*y)+g*g*(S*S)));o===h&&(_*=-1),isNaN(_)&&(_=0);const G=_*f*y/g,N=_*-g*S/f,O=(t+s)/2+Math.cos(m)*G-Math.sin(m)*N,A=(n+l)/2+Math.sin(m)*G+Math.cos(m)*N,z=function(it){return Math.sqrt(it[0]*it[0]+it[1]*it[1])},H=function(it,ot){return(it[0]*ot[0]+it[1]*ot[1])/(z(it)*z(ot))},V=function(it,ot){return(it[0]*ot[1]<it[1]*ot[0]?-1:1)*Math.acos(H(it,ot))},j=V([1,0],[(S-G)/f,(y-N)/g]),K=[(S-G)/f,(y-N)/g],Z=[(-1*S-G)/f,(-1*y-N)/g];let tt=V(K,Z);return H(K,Z)<=-1&&(tt=Math.PI),H(K,Z)>=1&&(tt=0),h===0&&tt>0&&(tt=tt-2*Math.PI),h===1&&tt<0&&(tt=tt+2*Math.PI),[O,A,f,g,j,tt,m,h]}}At.prototype.className="Path";At.prototype._attrsAffectingSize=["data"];Gt(At);E.addGetterSetter(At,"data");class Wa extends ea{_sceneFunc(t){super._sceneFunc(t);const n=Math.PI*2,s=this.points();let l=s;const o=this.tension()!==0&&s.length>4;o&&(l=this.getTensionPoints());const h=this.pointerLength(),f=s.length;let g,p;if(o){const y=[l[l.length-4],l[l.length-3],l[l.length-2],l[l.length-1],s[f-2],s[f-1]],b=At.calcLength(l[l.length-4],l[l.length-3],"C",y),_=At.getPointOnQuadraticBezier(Math.min(1,1-h/b),y[0],y[1],y[2],y[3],y[4],y[5]);g=s[f-2]-_.x,p=s[f-1]-_.y}else g=s[f-2]-s[f-4],p=s[f-1]-s[f-3];const m=(Math.atan2(p,g)+n)%n,S=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(s[f-2],s[f-1]),t.rotate(m),t.moveTo(0,0),t.lineTo(-h,S/2),t.lineTo(-h,-S/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(s[0],s[1]),o?(g=(l[0]+l[2])/2-s[0],p=(l[1]+l[3])/2-s[1]):(g=s[2]-s[0],p=s[3]-s[1]),t.rotate((Math.atan2(-p,-g)+n)%n),t.moveTo(0,0),t.lineTo(-h,S/2),t.lineTo(-h,-S/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),n=this.pointerWidth()/2;return{x:t.x,y:t.y-n,width:t.width,height:t.height+n*2}}}Wa.prototype.className="Arrow";Gt(Wa);E.addGetterSetter(Wa,"pointerLength",10,q());E.addGetterSetter(Wa,"pointerWidth",10,q());E.addGetterSetter(Wa,"pointerAtBeginning",!1);E.addGetterSetter(Wa,"pointerAtEnding",!0);class Yn extends U{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}Yn.prototype._centroid=!0;Yn.prototype.className="Circle";Yn.prototype._attrsAffectingSize=["radius"];Gt(Yn);E.addGetterSetter(Yn,"radius",0,q());class Na extends U{_sceneFunc(t){const n=this.radiusX(),s=this.radiusY();t.beginPath(),t.save(),n!==s&&t.scale(1,s/n),t.arc(0,0,n,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}Na.prototype.className="Ellipse";Na.prototype._centroid=!0;Na.prototype._attrsAffectingSize=["radiusX","radiusY"];Gt(Na);E.addComponentsGetterSetter(Na,"radius",["x","y"]);E.addGetterSetter(Na,"radiusX",0,q());E.addGetterSetter(Na,"radiusY",0,q());class Re extends U{constructor(t){super(t),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",n=>{this._removeImageLoad(n.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",this._loadListener)}_removeImageLoad(t){t&&t.removeEventListener&&t.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const t=!!this.cornerRadius(),n=this.hasShadow();return t&&n?!0:super._useBufferCanvas(!0)}_sceneFunc(t){const n=this.getWidth(),s=this.getHeight(),l=this.cornerRadius(),o=this.attrs.image;let h;if(o){const f=this.attrs.cropWidth,g=this.attrs.cropHeight;f&&g?h=[o,this.cropX(),this.cropY(),f,g,0,0,n,s]:h=[o,0,0,n,s]}(this.hasFill()||this.hasStroke()||l)&&(t.beginPath(),l?T.drawRoundedRectPath(t,n,s,l):t.rect(0,0,n,s),t.closePath(),t.fillStrokeShape(this)),o&&(l&&t.clip(),t.drawImage.apply(t,h))}_hitFunc(t){const n=this.width(),s=this.height(),l=this.cornerRadius();t.beginPath(),l?T.drawRoundedRectPath(t,n,s,l):t.rect(0,0,n,s),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,n;return(t=this.attrs.width)!==null&&t!==void 0?t:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var t,n;return(t=this.attrs.height)!==null&&t!==void 0?t:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(t,n,s=null){const l=T.createImageElement();l.onload=function(){const o=new Re({image:l});n(o)},l.onerror=s,l.crossOrigin="Anonymous",l.src=t}}Re.prototype.className="Image";Gt(Re);E.addGetterSetter(Re,"cornerRadius",0,Ks(4));E.addGetterSetter(Re,"image");E.addComponentsGetterSetter(Re,"crop",["x","y","width","height"]);E.addGetterSetter(Re,"cropX",0,q());E.addGetterSetter(Re,"cropY",0,q());E.addGetterSetter(Re,"cropWidth",0,q());E.addGetterSetter(Re,"cropHeight",0,q());const S0=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],G2="Change.konva",z2="none",$r="up",to="right",eo="down",ao="left",H2=S0.length;class fo extends Ln{constructor(t){super(t),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let n=this,s;const l=function(){n._sync()};for(s=0;s<H2;s++)t.on(S0[s]+G2,l)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t=this.getText(),n=this.getTag(),s,l,o,h,f,g,p;if(t&&n){switch(s=t.width(),l=t.height(),o=n.pointerDirection(),h=n.pointerWidth(),p=n.pointerHeight(),f=0,g=0,o){case $r:f=s/2,g=-1*p;break;case to:f=s+h,g=l/2;break;case eo:f=s/2,g=l+p;break;case ao:f=-1*h,g=l/2;break}n.setAttrs({x:-1*f,y:-1*g,width:s,height:l}),t.setAttrs({x:-1*f,y:-1*g})}}}fo.prototype.className="Label";Gt(fo);class Ia extends U{_sceneFunc(t){const n=this.width(),s=this.height(),l=this.pointerDirection(),o=this.pointerWidth(),h=this.pointerHeight(),f=this.cornerRadius();let g=0,p=0,m=0,S=0;typeof f=="number"?g=p=m=S=Math.min(f,n/2,s/2):(g=Math.min(f[0]||0,n/2,s/2),p=Math.min(f[1]||0,n/2,s/2),S=Math.min(f[2]||0,n/2,s/2),m=Math.min(f[3]||0,n/2,s/2)),t.beginPath(),t.moveTo(g,0),l===$r&&(t.lineTo((n-o)/2,0),t.lineTo(n/2,-1*h),t.lineTo((n+o)/2,0)),t.lineTo(n-p,0),t.arc(n-p,p,p,Math.PI*3/2,0,!1),l===to&&(t.lineTo(n,(s-h)/2),t.lineTo(n+o,s/2),t.lineTo(n,(s+h)/2)),t.lineTo(n,s-S),t.arc(n-S,s-S,S,0,Math.PI/2,!1),l===eo&&(t.lineTo((n+o)/2,s),t.lineTo(n/2,s+h),t.lineTo((n-o)/2,s)),t.lineTo(m,s),t.arc(m,s-m,m,Math.PI/2,Math.PI,!1),l===ao&&(t.lineTo(0,(s+h)/2),t.lineTo(-1*o,s/2),t.lineTo(0,(s-h)/2)),t.lineTo(0,g),t.arc(g,g,g,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,n=0,s=this.pointerWidth(),l=this.pointerHeight(),o=this.pointerDirection(),h=this.width(),f=this.height();return o===$r?(n-=l,f+=l):o===eo?f+=l:o===ao?(t-=s*1.5,h+=s):o===to&&(h+=s*1.5),{x:t,y:n,width:h,height:f}}}Ia.prototype.className="Tag";Gt(Ia);E.addGetterSetter(Ia,"pointerDirection",z2);E.addGetterSetter(Ia,"pointerWidth",0,q());E.addGetterSetter(Ia,"pointerHeight",0,q());E.addGetterSetter(Ia,"cornerRadius",0,Ks(4));let Gi=class extends U{_sceneFunc(t){const n=this.cornerRadius(),s=this.width(),l=this.height();t.beginPath(),n?T.drawRoundedRectPath(t,s,l,n):t.rect(0,0,s,l),t.closePath(),t.fillStrokeShape(this)}};Gi.prototype.className="Rect";Gt(Gi);E.addGetterSetter(Gi,"cornerRadius",0,Ks(4));class Oa extends U{_sceneFunc(t){const n=this._getPoints(),s=this.radius(),l=this.sides(),o=this.cornerRadius();if(t.beginPath(),o)T.drawRoundedPolygonPath(t,n,l,s,o);else{t.moveTo(n[0].x,n[0].y);for(let h=1;h<n.length;h++)t.lineTo(n[h].x,n[h].y)}t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,n=this.attrs.radius||0,s=[];for(let l=0;l<t;l++)s.push({x:n*Math.sin(l*2*Math.PI/t),y:-1*n*Math.cos(l*2*Math.PI/t)});return s}getSelfRect(){const t=this._getPoints();let n=t[0].x,s=t[0].y,l=t[0].x,o=t[0].y;return t.forEach(h=>{n=Math.min(n,h.x),s=Math.max(s,h.x),l=Math.min(l,h.y),o=Math.max(o,h.y)}),{x:n,y:l,width:s-n,height:o-l}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Oa.prototype.className="RegularPolygon";Oa.prototype._centroid=!0;Oa.prototype._attrsAffectingSize=["radius"];Gt(Oa);E.addGetterSetter(Oa,"radius",0,q());E.addGetterSetter(Oa,"sides",0,q());E.addGetterSetter(Oa,"cornerRadius",0,Ks(4));const Hc=Math.PI*2;class $a extends U{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,Hc,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),Hc,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}$a.prototype.className="Ring";$a.prototype._centroid=!0;$a.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Gt($a);E.addGetterSetter($a,"innerRadius",0,q());E.addGetterSetter($a,"outerRadius",0,q());class Ye extends U{constructor(t){super(t),this._updated=!0,this.anim=new Me(()=>{const n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){const n=this.animation(),s=this.frameIndex(),l=s*4,o=this.animations()[n],h=this.frameOffsets(),f=o[l+0],g=o[l+1],p=o[l+2],m=o[l+3],S=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,p,m),t.closePath(),t.fillStrokeShape(this)),S)if(h){const y=h[n],b=s*2;t.drawImage(S,f,g,p,m,y[b+0],y[b+1],p,m)}else t.drawImage(S,f,g,p,m,0,0,p,m)}_hitFunc(t){const n=this.animation(),s=this.frameIndex(),l=s*4,o=this.animations()[n],h=this.frameOffsets(),f=o[l+2],g=o[l+3];if(t.beginPath(),h){const p=h[n],m=s*2;t.rect(p[m+0],p[m+1],f,g)}else t.rect(0,0,f,g);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),n=this.animation(),s=this.animations(),l=s[n],o=l.length/4;t<o-1?this.frameIndex(t+1):this.frameIndex(0)}}Ye.prototype.className="Sprite";Gt(Ye);E.addGetterSetter(Ye,"animation");E.addGetterSetter(Ye,"animations");E.addGetterSetter(Ye,"frameOffsets");E.addGetterSetter(Ye,"image");E.addGetterSetter(Ye,"frameIndex",0,q());E.addGetterSetter(Ye,"frameRate",17,q());E.backCompat(Ye,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Da extends U{_sceneFunc(t){const n=this.innerRadius(),s=this.outerRadius(),l=this.numPoints();t.beginPath(),t.moveTo(0,0-s);for(let o=1;o<l*2;o++){const h=o%2===0?s:n,f=h*Math.sin(o*Math.PI/l),g=-1*h*Math.cos(o*Math.PI/l);t.lineTo(f,g)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Da.prototype.className="Star";Da.prototype._centroid=!0;Da.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Gt(Da);E.addGetterSetter(Da,"numPoints",5,q());E.addGetterSetter(Da,"innerRadius",0,q());E.addGetterSetter(Da,"outerRadius",0,q());function Ta(u){return[...u].reduce((t,n,s,l)=>{if(new RegExp("\\p{Emoji}","u").test(n)){const o=l[s+1];o&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(o)?(t.push(n+o),l[s+1]=""):t.push(n)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(n+(l[s+1]||""))?t.push(n+l[s+1]):s>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(n)?t[t.length-1]+=n:n&&t.push(n);return t},[])}const zn="auto",B2="center",_0="inherit",Hn="justify",U2="Change.konva",L2="2d",Bc="-",E0="left",w2="text",Y2="Text",q2="top",X2="bottom",Uc="middle",C0="normal",j2="px ",Us=" ",P2="right",Lc="rtl",V2="word",K2="char",wc="none",qr="",b0=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Q2=b0.length;function Z2(u){return u.split(",").map(t=>{t=t.trim();const n=t.indexOf(" ")>=0,s=t.indexOf('"')>=0||t.indexOf("'")>=0;return n&&!s&&(t=`"${t}"`),t}).join(", ")}let Ls;function Xr(){return Ls||(Ls=T.createCanvasElement().getContext(L2),Ls)}function J2(u){u.fillText(this._partialText,this._partialTextX,this._partialTextY)}function F2(u){u.setAttr("miterLimit",2),u.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function k2(u){return u=u||{},!u.fillLinearGradientColorStops&&!u.fillRadialGradientColorStops&&!u.fillPatternImage&&(u.fill=u.fill||"black"),u}class Nt extends U{constructor(t){super(k2(t)),this._partialTextX=0,this._partialTextY=0;for(let n=0;n<Q2;n++)this.on(b0[n]+U2,this._setTextData);this._setTextData()}_sceneFunc(t){var n,s;const l=this.textArr,o=l.length;if(!this.text())return;let h=this.padding(),f=this.fontSize(),g=this.lineHeight()*f,p=this.verticalAlign(),m=this.direction(),S=0,y=this.align(),b=this.getWidth(),_=this.letterSpacing(),G=this.charRenderFunc(),N=this.fill(),O=this.textDecoration(),A=O.indexOf("underline")!==-1,z=O.indexOf("line-through")!==-1,H;m=m===_0?t.direction:m;let V=g/2,j=Uc;if(!X.legacyTextRendering){const K=this.measureSize("M");j="alphabetic";const Z=(n=K.fontBoundingBoxAscent)!==null&&n!==void 0?n:K.actualBoundingBoxAscent,tt=(s=K.fontBoundingBoxDescent)!==null&&s!==void 0?s:K.actualBoundingBoxDescent;V=(Z-tt)/2+g/2}for(m===Lc&&t.setAttr("direction",m),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",j),t.setAttr("textAlign",E0),p===Uc?S=(this.getHeight()-o*g-h*2)/2:p===X2&&(S=this.getHeight()-o*g-h*2),t.translate(h,S+h),H=0;H<o;H++){let K=0,Z=0;const tt=l[H],it=tt.text,ot=tt.width,I=tt.lastInParagraph;if(t.save(),y===P2?K+=b-ot-h*2:y===B2&&(K+=(b-ot-h*2)/2),A){t.save(),t.beginPath();const st=X.legacyTextRendering?Math.round(f/2):Math.round(f/4),at=K,F=V+Z+st;t.moveTo(at,F);const J=y===Hn&&!I?b-h*2:ot;t.lineTo(at+Math.round(J),F),t.lineWidth=f/15;const Ut=this._getLinearGradient();t.strokeStyle=Ut||N,t.stroke(),t.restore()}if(m!==Lc&&(_!==0||y===Hn||G)){const st=it.split(" ").length-1,at=Ta(it);for(let F=0;F<at.length;F++){const J=at[F];if(J===" "&&!I&&y===Hn&&(K+=(b-h*2-ot)/st),this._partialTextX=K,this._partialTextY=V+Z,this._partialText=J,G){t.save();const k=l.slice(0,H).reduce((zt,pt)=>zt+Ta(pt.text).length,0),dt=F+k;G({char:J,index:dt,x:K,y:V+Z,lineIndex:H,column:F,isLastInLine:I,width:this.measureSize(J).width,context:t})}t.fillStrokeShape(this),G&&t.restore(),K+=this.measureSize(J).width+_}}else _!==0&&t.setAttr("letterSpacing",`${_}px`),this._partialTextX=K,this._partialTextY=V+Z,this._partialText=it,t.fillStrokeShape(this);if(z){t.save(),t.beginPath();const st=X.legacyTextRendering?0:-Math.round(f/4),at=y===Hn?0:K;t.moveTo(at,V+Z+st);const F=y===Hn&&!I?b-h*2:ot;t.lineTo(at+Math.round(F),V+Z+st),t.lineWidth=f/15;const J=this._getLinearGradient();t.strokeStyle=J||N,t.stroke(),t.restore()}t.restore(),o>1&&(V+=g)}}_hitFunc(t){const n=this.getWidth(),s=this.getHeight();t.beginPath(),t.rect(0,0,n,s),t.closePath(),t.fillStrokeShape(this)}setText(t){const n=T._isString(t)?t:t==null?"":t+"";return this._setAttr(w2,n),this}getWidth(){return this.attrs.width===zn||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===zn||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return T.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var n,s,l,o,h,f,g,p,m,S,y;let b=Xr(),_=this.fontSize(),G;b.save(),b.font=this._getContextFont(),G=b.measureText(t),b.restore();const N=_/100;return{actualBoundingBoxAscent:(n=G.actualBoundingBoxAscent)!==null&&n!==void 0?n:71.58203125*N,actualBoundingBoxDescent:(s=G.actualBoundingBoxDescent)!==null&&s!==void 0?s:0,actualBoundingBoxLeft:(l=G.actualBoundingBoxLeft)!==null&&l!==void 0?l:-7.421875*N,actualBoundingBoxRight:(o=G.actualBoundingBoxRight)!==null&&o!==void 0?o:75.732421875*N,alphabeticBaseline:(h=G.alphabeticBaseline)!==null&&h!==void 0?h:0,emHeightAscent:(f=G.emHeightAscent)!==null&&f!==void 0?f:100*N,emHeightDescent:(g=G.emHeightDescent)!==null&&g!==void 0?g:-20*N,fontBoundingBoxAscent:(p=G.fontBoundingBoxAscent)!==null&&p!==void 0?p:91*N,fontBoundingBoxDescent:(m=G.fontBoundingBoxDescent)!==null&&m!==void 0?m:21*N,hangingBaseline:(S=G.hangingBaseline)!==null&&S!==void 0?S:72.80000305175781*N,ideographicBaseline:(y=G.ideographicBaseline)!==null&&y!==void 0?y:-21*N,width:G.width,height:_}}_getContextFont(){return this.fontStyle()+Us+this.fontVariant()+Us+(this.fontSize()+j2)+Z2(this.fontFamily())}_addTextLine(t){this.align()===Hn&&(t=t.trim());const s=this._getTextWidth(t);return this.textArr.push({text:t,width:s,lastInParagraph:!1})}_getTextWidth(t){const n=this.letterSpacing(),s=t.length;return Xr().measureText(t).width+n*s}_setTextData(){let t=this.text().split(`
`),n=+this.fontSize(),s=0,l=this.lineHeight()*n,o=this.attrs.width,h=this.attrs.height,f=o!==zn&&o!==void 0,g=h!==zn&&h!==void 0,p=this.padding(),m=o-p*2,S=h-p*2,y=0,b=this.wrap(),_=b!==wc,G=b!==K2&&_,N=this.ellipsis();this.textArr=[],Xr().font=this._getContextFont();const O=N?this._getTextWidth(qr):0;for(let A=0,z=t.length;A<z;++A){let H=t[A],V=this._getTextWidth(H);if(f&&V>m)for(;H.length>0;){let j=0,K=Ta(H).length,Z="",tt=0;for(;j<K;){const it=j+K>>>1,ot=Ta(H),I=ot.slice(0,it+1).join(""),st=this._getTextWidth(I);(N&&g&&y+l>S?st+O:st)<=m?(j=it+1,Z=I,tt=st):K=it}if(Z){if(G){const I=Ta(H),st=Ta(Z),at=I[st.length],F=at===Us||at===Bc;let J;if(F&&tt<=m)J=st.length;else{const Ut=st.lastIndexOf(Us),k=st.lastIndexOf(Bc);J=Math.max(Ut,k)+1}J>0&&(j=J,Z=I.slice(0,j).join(""),tt=this._getTextWidth(Z))}if(Z=Z.trimRight(),this._addTextLine(Z),s=Math.max(s,tt),y+=l,this._shouldHandleEllipsis(y)){this._tryToAddEllipsisToLastLine();break}if(H=Ta(H).slice(j).join("").trimLeft(),H.length>0&&(V=this._getTextWidth(H),V<=m)){this._addTextLine(H),y+=l,s=Math.max(s,V);break}}else break}else this._addTextLine(H),y+=l,s=Math.max(s,V),this._shouldHandleEllipsis(y)&&A<z-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),g&&y+l>S)break}this.textHeight=n,this.textWidth=s}_shouldHandleEllipsis(t){const n=+this.fontSize(),s=this.lineHeight()*n,l=this.attrs.height,o=l!==zn&&l!==void 0,h=this.padding(),f=l-h*2;return!(this.wrap()!==wc)||o&&t+s>f}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,n=t!==zn&&t!==void 0,s=this.padding(),l=t-s*2,o=this.ellipsis(),h=this.textArr[this.textArr.length-1];!h||!o||(n&&(this._getTextWidth(h.text+qr)<l||(h.text=h.text.slice(0,h.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(h.text+qr))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return t&&n?!0:super._useBufferCanvas()}}Nt.prototype._fillFunc=J2;Nt.prototype._strokeFunc=F2;Nt.prototype.className=Y2;Nt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];Gt(Nt);E.overWriteSetter(Nt,"width",uo());E.overWriteSetter(Nt,"height",uo());E.addGetterSetter(Nt,"direction",_0);E.addGetterSetter(Nt,"fontFamily","Arial");E.addGetterSetter(Nt,"fontSize",12,q());E.addGetterSetter(Nt,"fontStyle",C0);E.addGetterSetter(Nt,"fontVariant",C0);E.addGetterSetter(Nt,"padding",0,q());E.addGetterSetter(Nt,"align",E0);E.addGetterSetter(Nt,"verticalAlign",q2);E.addGetterSetter(Nt,"lineHeight",1,q());E.addGetterSetter(Nt,"wrap",V2);E.addGetterSetter(Nt,"ellipsis",!1,ze());E.addGetterSetter(Nt,"letterSpacing",0,q());E.addGetterSetter(Nt,"text","",Fa());E.addGetterSetter(Nt,"textDecoration","");E.addGetterSetter(Nt,"charRenderFunc",void 0);const W2="",x0="normal";function T0(u){u.fillText(this.partialText,0,0)}function M0(u){u.strokeText(this.partialText,0,0)}class Kt extends U{constructor(t){super(t),this.dummyCanvas=T.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return At.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const n=this.pathLength;return t>n?null:At.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=At.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const n=this.textDecoration(),s=this.fill(),l=this.fontSize(),o=this.glyphInfo;n==="underline"&&t.beginPath();for(let h=0;h<o.length;h++){t.save();const f=o[h].p0;t.translate(f.x,f.y),t.rotate(o[h].rotation),this.partialText=o[h].text,t.fillStrokeShape(this),n==="underline"&&(h===0&&t.moveTo(0,l/2+1),t.lineTo(l,l/2+1)),t.restore()}n==="underline"&&(t.strokeStyle=s,t.lineWidth=l/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();const n=this.glyphInfo;if(n.length>=1){const s=n[0].p0;t.moveTo(s.x,s.y)}for(let s=0;s<n.length;s++){const l=n[s].p1;t.lineTo(l.x,l.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return T.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return Nt.prototype.setText.call(this,t)}_getContextFont(){return Nt.prototype._getContextFont.call(this)}_getTextSize(t){const s=this.dummyCanvas.getContext("2d");s.save(),s.font=this._getContextFont();const l=s.measureText(t);return s.restore(),{width:l.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const t=Ta(this.text()),n=[];let s=0;for(let S=0;S<t.length;S++)n.push({char:t[S],width:this._getTextSize(t[S]).width}),s+=n[S].width;const{height:l}=this._getTextSize(this.attrs.text);if(this.textWidth=s,this.textHeight=l,this.glyphInfo=[],!this.attrs.data)return null;const o=this.letterSpacing(),h=this.align(),f=this.kerningFunc(),g=Math.max(this.textWidth+((this.attrs.text||"").length-1)*o,0);let p=0;h==="center"&&(p=Math.max(0,this.pathLength/2-g/2)),h==="right"&&(p=Math.max(0,this.pathLength-g));let m=p;for(let S=0;S<n.length;S++){const y=this._getPointAtLength(m);if(!y)return;const b=n[S].char;let _=n[S].width+o;if(b===" "&&h==="justify"){const H=this.text().split(" ").length-1;_+=(this.pathLength-g)/H}const G=this._getPointAtLength(m+_);if(!G)return;const N=At.getLineLength(y.x,y.y,G.x,G.y);let O=0;if(f)try{O=f(n[S-1].char,b)*this.fontSize()}catch{O=0}y.x+=O,G.x+=O,this.textWidth+=O;const A=At.getPointOnLine(O+N/2,y.x,y.y,G.x,G.y),z=Math.atan2(G.y-y.y,G.x-y.x);this.glyphInfo.push({transposeX:A.x,transposeY:A.y,text:t[S],rotation:z,p0:y,p1:G}),m+=_}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach(function(p){t.push(p.p0.x),t.push(p.p0.y),t.push(p.p1.x),t.push(p.p1.y)});let n=t[0]||0,s=t[0]||0,l=t[1]||0,o=t[1]||0,h,f;for(let p=0;p<t.length/2;p++)h=t[p*2],f=t[p*2+1],n=Math.min(n,h),s=Math.max(s,h),l=Math.min(l,f),o=Math.max(o,f);const g=this.fontSize();return{x:n-g/2,y:l-g/2,width:s-n+g,height:o-l+g}}destroy(){return T.releaseCanvas(this.dummyCanvas),super.destroy()}}Kt.prototype._fillFunc=T0;Kt.prototype._strokeFunc=M0;Kt.prototype._fillFuncHit=T0;Kt.prototype._strokeFuncHit=M0;Kt.prototype.className="TextPath";Kt.prototype._attrsAffectingSize=["text","fontSize","data"];Gt(Kt);E.addGetterSetter(Kt,"data");E.addGetterSetter(Kt,"fontFamily","Arial");E.addGetterSetter(Kt,"fontSize",12,q());E.addGetterSetter(Kt,"fontStyle",x0);E.addGetterSetter(Kt,"align","left");E.addGetterSetter(Kt,"letterSpacing",0,q());E.addGetterSetter(Kt,"textBaseline","middle");E.addGetterSetter(Kt,"fontVariant",x0);E.addGetterSetter(Kt,"text",W2);E.addGetterSetter(Kt,"textDecoration","");E.addGetterSetter(Kt,"kerningFunc",void 0);const A0="tr-konva",I2=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(u=>u+`.${A0}`).join(" "),Yc="nodesRect",$2=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],t5={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},e5="ontouchstart"in X._global;function a5(u,t,n){if(u==="rotater")return n;t+=T.degToRad(t5[u]||0);const s=(T.radToDeg(t)%360+360)%360;return T._inRange(s,315+22.5,360)||T._inRange(s,0,22.5)?"ns-resize":T._inRange(s,45-22.5,45+22.5)?"nesw-resize":T._inRange(s,90-22.5,90+22.5)?"ew-resize":T._inRange(s,135-22.5,135+22.5)?"nwse-resize":T._inRange(s,180-22.5,180+22.5)?"ns-resize":T._inRange(s,225-22.5,225+22.5)?"nesw-resize":T._inRange(s,270-22.5,270+22.5)?"ew-resize":T._inRange(s,315-22.5,315+22.5)?"nwse-resize":(T.error("Transformer has unknown angle for cursor detection: "+s),"pointer")}const js=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function n5(u){return{x:u.x+u.width/2*Math.cos(u.rotation)+u.height/2*Math.sin(-u.rotation),y:u.y+u.height/2*Math.cos(u.rotation)+u.width/2*Math.sin(u.rotation)}}function R0(u,t,n){const s=n.x+(u.x-n.x)*Math.cos(t)-(u.y-n.y)*Math.sin(t),l=n.y+(u.x-n.x)*Math.sin(t)+(u.y-n.y)*Math.cos(t);return{...u,rotation:u.rotation+t,x:s,y:l}}function i5(u,t){const n=n5(u);return R0(u,t,n)}function s5(u,t,n){let s=t;for(let l=0;l<u.length;l++){const o=X.getAngle(u[l]),h=Math.abs(o-t)%(Math.PI*2);Math.min(h,Math.PI*2-h)<n&&(s=o)}return s}let no=0;class ft extends Ln{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(I2,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return T.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return A0+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const n=t.filter(l=>l.isAncestorOf(this)?(T.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=t=n,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(l=>{const o=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(l._attrsAffectingSize.length){const h=l._attrsAffectingSize.map(f=>f+"Change."+this._getEventNamespace()).join(" ");l.on(h,o)}l.on($2.map(h=>h+`.${this._getEventNamespace()}`).join(" "),o),l.on(`absoluteTransformChange.${this._getEventNamespace()}`,o),this._proxyDrag(l)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let n;t.on(`dragstart.${this._getEventNamespace()}`,s=>{n=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(s,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,s=>{if(!n)return;const l=t.getAbsolutePosition(),o=l.x-n.x,h=l.y-n.y;this.nodes().forEach(f=>{if(f===t||f.isDragging())return;const g=f.getAbsolutePosition();f.setAbsolutePosition({x:g.x+o,y:g.y+h}),f.startDrag(s)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Yc),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Yc,this.__getNodeRect)}__getNodeShape(t,n=this.rotation(),s){const l=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),o=t.getAbsoluteScale(s),h=t.getAbsolutePosition(s),f=l.x*o.x-t.offsetX()*o.x,g=l.y*o.y-t.offsetY()*o.y,p=(X.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),m={x:h.x+f*Math.cos(p)+g*Math.sin(-p),y:h.y+g*Math.cos(p)+f*Math.sin(p),width:l.width*o.x,height:l.height*o.y,rotation:p};return R0(m,-X.getAngle(n),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const n=[];this.nodes().map(p=>{const m=p.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),S=[{x:m.x,y:m.y},{x:m.x+m.width,y:m.y},{x:m.x+m.width,y:m.y+m.height},{x:m.x,y:m.y+m.height}],y=p.getAbsoluteTransform();S.forEach(function(b){const _=y.point(b);n.push(_)})});const s=new ve;s.rotate(-X.getAngle(this.rotation()));let l=1/0,o=1/0,h=-1/0,f=-1/0;n.forEach(function(p){const m=s.point(p);l===void 0&&(l=h=m.x,o=f=m.y),l=Math.min(l,m.x),o=Math.min(o,m.y),h=Math.max(h,m.x),f=Math.max(f,m.y)}),s.invert();const g=s.point({x:l,y:o});return{x:g.x,y:g.y,width:h-l,height:f-o,rotation:X.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),js.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){const n=new Gi({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:e5?10:"auto"}),s=this;n.on("mousedown touchstart",function(l){s._handleMouseDown(l)}),n.on("dragstart",l=>{n.stopDrag(),l.cancelBubble=!0}),n.on("dragend",l=>{l.cancelBubble=!0}),n.on("mouseenter",()=>{const l=X.getAngle(this.rotation()),o=this.rotateAnchorCursor(),h=a5(t,l,o);n.getStage().content&&(n.getStage().content.style.cursor=h),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){const t=new U({name:"back",width:0,height:0,sceneFunc(n,s){const l=s.getParent(),o=l.padding();n.beginPath(),n.rect(-o,-o,s.width()+o*2,s.height()+o*2),n.moveTo(s.width()/2,-o),l.rotateEnabled()&&l.rotateLineVisible()&&n.lineTo(s.width()/2,-l.rotateAnchorOffset()*T._sign(s.height())-o),n.fillStrokeShape(s)},hitFunc:(n,s)=>{if(!this.shouldOverdrawWholeArea())return;const l=this.padding();n.beginPath(),n.rect(-l,-l,s.width()+l*2,s.height()+l*2),n.fillStrokeShape(s)}});this.add(t),this._proxyDrag(t),t.on("dragstart",n=>{n.cancelBubble=!0}),t.on("dragmove",n=>{n.cancelBubble=!0}),t.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const n=this._getNodeRect(),s=n.width,l=n.height,o=Math.sqrt(Math.pow(s,2)+Math.pow(l,2));this.sin=Math.abs(l/o),this.cos=Math.abs(s/o),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const h=t.target.getAbsolutePosition(),f=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:f.x-h.x,y:f.y-h.y},no++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(g=>{g._fire("transformstart",{evt:t.evt,target:g})})}_handleMouseMove(t){let n,s,l;const o=this.findOne("."+this._movingAnchorName),h=o.getStage();h.setPointersPositions(t);const f=h.getPointerPosition();let g={x:f.x-this._anchorDragOffset.x,y:f.y-this._anchorDragOffset.y};const p=o.getAbsolutePosition();this.anchorDragBoundFunc()&&(g=this.anchorDragBoundFunc()(p,g,t)),o.setAbsolutePosition(g);const m=o.getAbsolutePosition();if(p.x===m.x&&p.y===m.y)return;if(this._movingAnchorName==="rotater"){const A=this._getNodeRect();n=o.x()-A.width/2,s=-o.y()+A.height/2;let z=Math.atan2(-s,n)+Math.PI/2;A.height<0&&(z-=Math.PI);const V=X.getAngle(this.rotation())+z,j=X.getAngle(this.rotationSnapTolerance()),Z=s5(this.rotationSnaps(),V,j)-A.rotation,tt=i5(A,Z);this._fitNodesInto(tt,t);return}const S=this.shiftBehavior();let y;S==="inverted"?y=this.keepRatio()&&!t.shiftKey:S==="none"?y=this.keepRatio():y=this.keepRatio()||t.shiftKey;let b=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(y){const A=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};l=Math.sqrt(Math.pow(A.x-o.x(),2)+Math.pow(A.y-o.y(),2));const z=this.findOne(".top-left").x()>A.x?-1:1,H=this.findOne(".top-left").y()>A.y?-1:1;n=l*this.cos*z,s=l*this.sin*H,this.findOne(".top-left").x(A.x-n),this.findOne(".top-left").y(A.y-s)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(o.y());else if(this._movingAnchorName==="top-right"){if(y){const A=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};l=Math.sqrt(Math.pow(o.x()-A.x,2)+Math.pow(A.y-o.y(),2));const z=this.findOne(".top-right").x()<A.x?-1:1,H=this.findOne(".top-right").y()>A.y?-1:1;n=l*this.cos*z,s=l*this.sin*H,this.findOne(".top-right").x(A.x+n),this.findOne(".top-right").y(A.y-s)}var _=o.position();this.findOne(".top-left").y(_.y),this.findOne(".bottom-right").x(_.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(o.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(o.x());else if(this._movingAnchorName==="bottom-left"){if(y){const A=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};l=Math.sqrt(Math.pow(A.x-o.x(),2)+Math.pow(o.y()-A.y,2));const z=A.x<o.x()?-1:1,H=o.y()<A.y?-1:1;n=l*this.cos*z,s=l*this.sin*H,o.x(A.x-n),o.y(A.y+s)}_=o.position(),this.findOne(".top-left").x(_.x),this.findOne(".bottom-right").y(_.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(o.y());else if(this._movingAnchorName==="bottom-right"){if(y){const A=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};l=Math.sqrt(Math.pow(o.x()-A.x,2)+Math.pow(o.y()-A.y,2));const z=this.findOne(".bottom-right").x()<A.x?-1:1,H=this.findOne(".bottom-right").y()<A.y?-1:1;n=l*this.cos*z,s=l*this.sin*H,this.findOne(".bottom-right").x(A.x+n),this.findOne(".bottom-right").y(A.y+s)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(b=this.centeredScaling()||t.altKey,b){const A=this.findOne(".top-left"),z=this.findOne(".bottom-right"),H=A.x(),V=A.y(),j=this.getWidth()-z.x(),K=this.getHeight()-z.y();z.move({x:-H,y:-V}),A.move({x:j,y:K})}const G=this.findOne(".top-left").getAbsolutePosition();n=G.x,s=G.y;const N=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),O=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:s,width:N,height:O,rotation:X.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var n;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const s=this.getNode();no--,this._fire("transformend",{evt:t,target:s}),(n=this.getLayer())===null||n===void 0||n.batchDraw(),s&&this._nodes.forEach(l=>{var o;l._fire("transformend",{evt:t,target:l}),(o=l.getLayer())===null||o===void 0||o.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,n){const s=this._getNodeRect(),l=1;if(T._inRange(t.width,-this.padding()*2-l,l)){this.update();return}if(T._inRange(t.height,-this.padding()*2-l,l)){this.update();return}const o=new ve;if(o.rotate(X.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const y=o.point({x:-this.padding()*2,y:0});t.x+=y.x,t.y+=y.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const y=o.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const y=o.point({x:0,y:-this.padding()*2});t.x+=y.x,t.y+=y.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const y=o.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const y=this.boundBoxFunc()(s,t);y?t=y:T.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const h=1e7,f=new ve;f.translate(s.x,s.y),f.rotate(s.rotation),f.scale(s.width/h,s.height/h);const g=new ve,p=t.width/h,m=t.height/h;this.flipEnabled()===!1?(g.translate(t.x,t.y),g.rotate(t.rotation),g.translate(t.width<0?t.width:0,t.height<0?t.height:0),g.scale(Math.abs(p),Math.abs(m))):(g.translate(t.x,t.y),g.rotate(t.rotation),g.scale(p,m));const S=g.multiply(f.invert());this._nodes.forEach(y=>{var b;if(!y.getStage())return;const _=y.getParent().getAbsoluteTransform(),G=y.getTransform().copy();G.translate(y.offsetX(),y.offsetY());const N=new ve;N.multiply(_.copy().invert()).multiply(S).multiply(_).multiply(G);const O=N.decompose();y.setAttrs(O),(b=y.getLayer())===null||b===void 0||b.batchDraw()}),this.rotation(T._getRotation(t.rotation)),this._nodes.forEach(y=>{this._fire("transform",{evt:n,target:y}),y._fire("transform",{evt:n,target:y})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,n){this.findOne(t).setAttrs(n)}update(){var t;const n=this._getNodeRect();this.rotation(T._getRotation(n.rotation));const s=n.width,l=n.height,o=this.enabledAnchors(),h=this.resizeEnabled(),f=this.padding(),g=this.anchorSize(),p=this.find("._anchor");p.forEach(S=>{S.setAttrs({width:g,height:g,offsetX:g/2,offsetY:g/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:g/2+f,offsetY:g/2+f,visible:h&&o.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:s/2,y:0,offsetY:g/2+f,visible:h&&o.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:s,y:0,offsetX:g/2-f,offsetY:g/2+f,visible:h&&o.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:l/2,offsetX:g/2+f,visible:h&&o.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:s,y:l/2,offsetX:g/2-f,visible:h&&o.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:l,offsetX:g/2+f,offsetY:g/2-f,visible:h&&o.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:s/2,y:l,offsetY:g/2-f,visible:h&&o.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:s,y:l,offsetX:g/2-f,offsetY:g/2-f,visible:h&&o.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:s/2,y:-this.rotateAnchorOffset()*T._sign(l)-f,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:s,height:l,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(S=>S.draggable()),x:0,y:0});const m=this.anchorStyleFunc();m&&p.forEach(S=>{m(S)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Ln.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return Y.prototype.toObject.call(this)}clone(t){return Y.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}ft.isTransforming=()=>no>0;function l5(u){return u instanceof Array||T.warn("enabledAnchors value should be an array"),u instanceof Array&&u.forEach(function(t){js.indexOf(t)===-1&&T.warn("Unknown anchor name: "+t+". Available names are: "+js.join(", "))}),u||[]}ft.prototype.className="Transformer";Gt(ft);E.addGetterSetter(ft,"enabledAnchors",js,l5);E.addGetterSetter(ft,"flipEnabled",!0,ze());E.addGetterSetter(ft,"resizeEnabled",!0);E.addGetterSetter(ft,"anchorSize",10,q());E.addGetterSetter(ft,"rotateEnabled",!0);E.addGetterSetter(ft,"rotateLineVisible",!0);E.addGetterSetter(ft,"rotationSnaps",[]);E.addGetterSetter(ft,"rotateAnchorOffset",50,q());E.addGetterSetter(ft,"rotateAnchorCursor","crosshair");E.addGetterSetter(ft,"rotationSnapTolerance",5,q());E.addGetterSetter(ft,"borderEnabled",!0);E.addGetterSetter(ft,"anchorStroke","rgb(0, 161, 255)");E.addGetterSetter(ft,"anchorStrokeWidth",1,q());E.addGetterSetter(ft,"anchorFill","white");E.addGetterSetter(ft,"anchorCornerRadius",0,q());E.addGetterSetter(ft,"borderStroke","rgb(0, 161, 255)");E.addGetterSetter(ft,"borderStrokeWidth",1,q());E.addGetterSetter(ft,"borderDash");E.addGetterSetter(ft,"keepRatio",!0);E.addGetterSetter(ft,"shiftBehavior","default");E.addGetterSetter(ft,"centeredScaling",!1);E.addGetterSetter(ft,"ignoreStroke",!1);E.addGetterSetter(ft,"padding",0,q());E.addGetterSetter(ft,"nodes");E.addGetterSetter(ft,"node");E.addGetterSetter(ft,"boundBoxFunc");E.addGetterSetter(ft,"anchorDragBoundFunc");E.addGetterSetter(ft,"anchorStyleFunc");E.addGetterSetter(ft,"shouldOverdrawWholeArea",!1);E.addGetterSetter(ft,"useSingleNodeRotation",!0);E.backCompat(ft,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class aa extends U{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,X.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}aa.prototype.className="Wedge";aa.prototype._centroid=!0;aa.prototype._attrsAffectingSize=["radius"];Gt(aa);E.addGetterSetter(aa,"radius",0,q());E.addGetterSetter(aa,"angle",0,q());E.addGetterSetter(aa,"clockwise",!1);E.backCompat(aa,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function qc(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const r5=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],o5=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function u5(u,t){const n=u.data,s=u.width,l=u.height;let o,h,f,g,p,m,S,y,b,_,G,N,O,A,z,H,V,j,K,Z;const tt=t+t+1,it=s-1,ot=l-1,I=t+1,st=I*(I+1)/2,at=new qc,F=r5[t],J=o5[t];let Ut=null,k=at,dt=null,zt=null;for(let pt=1;pt<tt;pt++)k=k.next=new qc,pt===I&&(Ut=k);k.next=at,f=h=0;for(let pt=0;pt<l;pt++){N=O=A=z=g=p=m=S=0,y=I*(H=n[h]),b=I*(V=n[h+1]),_=I*(j=n[h+2]),G=I*(K=n[h+3]),g+=st*H,p+=st*V,m+=st*j,S+=st*K,k=at;for(let Ot=0;Ot<I;Ot++)k.r=H,k.g=V,k.b=j,k.a=K,k=k.next;for(let Ot=1;Ot<I;Ot++)o=h+((it<Ot?it:Ot)<<2),g+=(k.r=H=n[o])*(Z=I-Ot),p+=(k.g=V=n[o+1])*Z,m+=(k.b=j=n[o+2])*Z,S+=(k.a=K=n[o+3])*Z,N+=H,O+=V,A+=j,z+=K,k=k.next;dt=at,zt=Ut;for(let Ot=0;Ot<s;Ot++)n[h+3]=K=S*F>>J,K!==0?(K=255/K,n[h]=(g*F>>J)*K,n[h+1]=(p*F>>J)*K,n[h+2]=(m*F>>J)*K):n[h]=n[h+1]=n[h+2]=0,g-=y,p-=b,m-=_,S-=G,y-=dt.r,b-=dt.g,_-=dt.b,G-=dt.a,o=f+((o=Ot+t+1)<it?o:it)<<2,N+=dt.r=n[o],O+=dt.g=n[o+1],A+=dt.b=n[o+2],z+=dt.a=n[o+3],g+=N,p+=O,m+=A,S+=z,dt=dt.next,y+=H=zt.r,b+=V=zt.g,_+=j=zt.b,G+=K=zt.a,N-=H,O-=V,A-=j,z-=K,zt=zt.next,h+=4;f+=s}for(let pt=0;pt<s;pt++){O=A=z=N=p=m=S=g=0,h=pt<<2,y=I*(H=n[h]),b=I*(V=n[h+1]),_=I*(j=n[h+2]),G=I*(K=n[h+3]),g+=st*H,p+=st*V,m+=st*j,S+=st*K,k=at;for(let $t=0;$t<I;$t++)k.r=H,k.g=V,k.b=j,k.a=K,k=k.next;let Ot=s;for(let $t=1;$t<=t;$t++)h=Ot+pt<<2,g+=(k.r=H=n[h])*(Z=I-$t),p+=(k.g=V=n[h+1])*Z,m+=(k.b=j=n[h+2])*Z,S+=(k.a=K=n[h+3])*Z,N+=H,O+=V,A+=j,z+=K,k=k.next,$t<ot&&(Ot+=s);h=pt,dt=at,zt=Ut;for(let $t=0;$t<l;$t++)o=h<<2,n[o+3]=K=S*F>>J,K>0?(K=255/K,n[o]=(g*F>>J)*K,n[o+1]=(p*F>>J)*K,n[o+2]=(m*F>>J)*K):n[o]=n[o+1]=n[o+2]=0,g-=y,p-=b,m-=_,S-=G,y-=dt.r,b-=dt.g,_-=dt.b,G-=dt.a,o=pt+((o=$t+I)<ot?o:ot)*s<<2,g+=N+=dt.r=n[o],p+=O+=dt.g=n[o+1],m+=A+=dt.b=n[o+2],S+=z+=dt.a=n[o+3],dt=dt.next,y+=H=zt.r,b+=V=zt.g,_+=j=zt.b,G+=K=zt.a,N-=H,O-=V,A-=j,z-=K,zt=zt.next,h+=s}}const h5=function(t){const n=Math.round(this.blurRadius());n>0&&u5(t,n)};E.addGetterSetter(Y,"blurRadius",0,q(),E.afterSetFilter);const c5=function(u){const t=this.brightness()*255,n=u.data,s=n.length;for(let l=0;l<s;l+=4)n[l]+=t,n[l+1]+=t,n[l+2]+=t};E.addGetterSetter(Y,"brightness",0,q(),E.afterSetFilter);const f5=function(u){const t=this.brightness(),n=u.data,s=n.length;for(let l=0;l<s;l+=4)n[l]=Math.min(255,n[l]*t),n[l+1]=Math.min(255,n[l+1]*t),n[l+2]=Math.min(255,n[l+2]*t)},d5=function(u){const t=Math.pow((this.contrast()+100)/100,2),n=u.data,s=n.length;let l=150,o=150,h=150;for(let f=0;f<s;f+=4)l=n[f],o=n[f+1],h=n[f+2],l/=255,l-=.5,l*=t,l+=.5,l*=255,o/=255,o-=.5,o*=t,o+=.5,o*=255,h/=255,h-=.5,h*=t,h+=.5,h*=255,l=l<0?0:l>255?255:l,o=o<0?0:o>255?255:o,h=h<0?0:h>255?255:h,n[f]=l,n[f+1]=o,n[f+2]=h};E.addGetterSetter(Y,"contrast",0,q(),E.afterSetFilter);const g5=function(u){var t,n,s,l,o,h,f,g,p;const m=u.data,S=u.width,y=u.height,b=Math.min(1,Math.max(0,(n=(t=this.embossStrength)===null||t===void 0?void 0:t.call(this))!==null&&n!==void 0?n:.5)),_=Math.min(1,Math.max(0,(l=(s=this.embossWhiteLevel)===null||s===void 0?void 0:s.call(this))!==null&&l!==void 0?l:.5)),N=(f={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(h=(o=this.embossDirection)===null||o===void 0?void 0:o.call(this))!==null&&h!==void 0?h:"top-left"])!==null&&f!==void 0?f:315,O=!!((p=(g=this.embossBlend)===null||g===void 0?void 0:g.call(this))!==null&&p!==void 0&&p),A=b*10,z=_*255,H=N*Math.PI/180,V=Math.cos(H),j=Math.sin(H),K=128/1020*A,Z=new Uint8ClampedArray(m),tt=new Float32Array(S*y);for(let at=0,F=0;F<m.length;F+=4,at++)tt[at]=.2126*Z[F]+.7152*Z[F+1]+.0722*Z[F+2];const it=[-1,0,1,-2,0,2,-1,0,1],ot=[-1,-2,-1,0,0,0,1,2,1],I=[-S-1,-S,-S+1,-1,0,1,S-1,S,S+1],st=at=>at<0?0:at>255?255:at;for(let at=1;at<y-1;at++)for(let F=1;F<S-1;F++){const J=at*S+F;let Ut=0,k=0;Ut+=tt[J+I[0]]*it[0],k+=tt[J+I[0]]*ot[0],Ut+=tt[J+I[1]]*it[1],k+=tt[J+I[1]]*ot[1],Ut+=tt[J+I[2]]*it[2],k+=tt[J+I[2]]*ot[2],Ut+=tt[J+I[3]]*it[3],k+=tt[J+I[3]]*ot[3],Ut+=tt[J+I[5]]*it[5],k+=tt[J+I[5]]*ot[5],Ut+=tt[J+I[6]]*it[6],k+=tt[J+I[6]]*ot[6],Ut+=tt[J+I[7]]*it[7],k+=tt[J+I[7]]*ot[7],Ut+=tt[J+I[8]]*it[8],k+=tt[J+I[8]]*ot[8];const dt=V*Ut+j*k,zt=st(z+dt*K),pt=J*4;if(O){const Ot=zt-z;m[pt]=st(Z[pt]+Ot),m[pt+1]=st(Z[pt+1]+Ot),m[pt+2]=st(Z[pt+2]+Ot),m[pt+3]=Z[pt+3]}else m[pt]=m[pt+1]=m[pt+2]=zt,m[pt+3]=Z[pt+3]}for(let at=0;at<S;at++){let F=at*4,J=((y-1)*S+at)*4;m[F]=Z[F],m[F+1]=Z[F+1],m[F+2]=Z[F+2],m[F+3]=Z[F+3],m[J]=Z[J],m[J+1]=Z[J+1],m[J+2]=Z[J+2],m[J+3]=Z[J+3]}for(let at=1;at<y-1;at++){let F=at*S*4,J=(at*S+(S-1))*4;m[F]=Z[F],m[F+1]=Z[F+1],m[F+2]=Z[F+2],m[F+3]=Z[F+3],m[J]=Z[J],m[J+1]=Z[J+1],m[J+2]=Z[J+2],m[J+3]=Z[J+3]}return u};E.addGetterSetter(Y,"embossStrength",.5,q(),E.afterSetFilter);E.addGetterSetter(Y,"embossWhiteLevel",.5,q(),E.afterSetFilter);E.addGetterSetter(Y,"embossDirection","top-left",void 0,E.afterSetFilter);E.addGetterSetter(Y,"embossBlend",!1,void 0,E.afterSetFilter);function jr(u,t,n,s,l){const o=n-t,h=l-s;if(o===0)return s+h/2;if(h===0)return s;let f=(u-t)/o;return f=h*f+s,f}const p5=function(u){const t=u.data,n=t.length;let s=t[0],l=s,o,h=t[1],f=h,g,p=t[2],m=p,S;const y=this.enhance();if(y===0)return;for(let z=0;z<n;z+=4)o=t[z+0],o<s?s=o:o>l&&(l=o),g=t[z+1],g<h?h=g:g>f&&(f=g),S=t[z+2],S<p?p=S:S>m&&(m=S);l===s&&(l=255,s=0),f===h&&(f=255,h=0),m===p&&(m=255,p=0);let b,_,G,N,O,A;if(y>0)b=l+y*(255-l),_=s-y*(s-0),G=f+y*(255-f),N=h-y*(h-0),O=m+y*(255-m),A=p-y*(p-0);else{const z=(l+s)*.5;b=l+y*(l-z),_=s+y*(s-z);const H=(f+h)*.5;G=f+y*(f-H),N=h+y*(h-H);const V=(m+p)*.5;O=m+y*(m-V),A=p+y*(p-V)}for(let z=0;z<n;z+=4)t[z+0]=jr(t[z+0],s,l,_,b),t[z+1]=jr(t[z+1],h,f,N,G),t[z+2]=jr(t[z+2],p,m,A,O)};E.addGetterSetter(Y,"enhance",0,q(),E.afterSetFilter);const m5=function(u){const t=u.data,n=t.length;for(let s=0;s<n;s+=4){const l=.34*t[s]+.5*t[s+1]+.16*t[s+2];t[s]=l,t[s+1]=l,t[s+2]=l}};E.addGetterSetter(Y,"hue",0,q(),E.afterSetFilter);E.addGetterSetter(Y,"saturation",0,q(),E.afterSetFilter);E.addGetterSetter(Y,"luminance",0,q(),E.afterSetFilter);const v5=function(u){const t=u.data,n=t.length,s=1,l=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,h=this.luminance()*127,f=s*l*Math.cos(o*Math.PI/180),g=s*l*Math.sin(o*Math.PI/180),p=.299*s+.701*f+.167*g,m=.587*s-.587*f+.33*g,S=.114*s-.114*f-.497*g,y=.299*s-.299*f-.328*g,b=.587*s+.413*f+.035*g,_=.114*s-.114*f+.293*g,G=.299*s-.3*f+1.25*g,N=.587*s-.586*f-1.05*g,O=.114*s+.886*f-.2*g;let A,z,H,V;for(let j=0;j<n;j+=4)A=t[j+0],z=t[j+1],H=t[j+2],V=t[j+3],t[j+0]=p*A+m*z+S*H+h,t[j+1]=y*A+b*z+_*H+h,t[j+2]=G*A+N*z+O*H+h,t[j+3]=V},y5=function(u){const t=u.data,n=t.length,s=Math.pow(2,this.value()),l=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,h=s*l*Math.cos(o*Math.PI/180),f=s*l*Math.sin(o*Math.PI/180),g=.299*s+.701*h+.167*f,p=.587*s-.587*h+.33*f,m=.114*s-.114*h-.497*f,S=.299*s-.299*h-.328*f,y=.587*s+.413*h+.035*f,b=.114*s-.114*h+.293*f,_=.299*s-.3*h+1.25*f,G=.587*s-.586*h-1.05*f,N=.114*s+.886*h-.2*f;for(let O=0;O<n;O+=4){const A=t[O+0],z=t[O+1],H=t[O+2],V=t[O+3];t[O+0]=g*A+p*z+m*H,t[O+1]=S*A+y*z+b*H,t[O+2]=_*A+G*z+N*H,t[O+3]=V}};E.addGetterSetter(Y,"hue",0,q(),E.afterSetFilter);E.addGetterSetter(Y,"saturation",0,q(),E.afterSetFilter);E.addGetterSetter(Y,"value",0,q(),E.afterSetFilter);const S5=function(u){const t=u.data,n=t.length;for(let s=0;s<n;s+=4)t[s]=255-t[s],t[s+1]=255-t[s+1],t[s+2]=255-t[s+2]},_5=function(u,t,n){const s=u.data,l=t.data,o=u.width,h=u.height,f=n.polarCenterX||o/2,g=n.polarCenterY||h/2;let p=Math.sqrt(f*f+g*g),m=o-f,S=h-g;const y=Math.sqrt(m*m+S*S);p=y>p?y:p;const b=h,_=o,G=360/_*Math.PI/180;for(let N=0;N<_;N+=1){const O=Math.sin(N*G),A=Math.cos(N*G);for(let z=0;z<b;z+=1){m=Math.floor(f+p*z/b*A),S=Math.floor(g+p*z/b*O);let H=(S*o+m)*4;const V=s[H+0],j=s[H+1],K=s[H+2],Z=s[H+3];H=(N+z*o)*4,l[H+0]=V,l[H+1]=j,l[H+2]=K,l[H+3]=Z}}},E5=function(u,t,n){const s=u.data,l=t.data,o=u.width,h=u.height,f=n.polarCenterX||o/2,g=n.polarCenterY||h/2;let p=Math.sqrt(f*f+g*g),m=o-f,S=h-g;const y=Math.sqrt(m*m+S*S);p=y>p?y:p;const b=h,_=o,G=0;let N,O;for(m=0;m<o;m+=1)for(S=0;S<h;S+=1){const A=m-f,z=S-g,H=Math.sqrt(A*A+z*z)*b/p;let V=(Math.atan2(z,A)*180/Math.PI+360+G)%360;V=V*_/360,N=Math.floor(V),O=Math.floor(H);let j=(O*o+N)*4;const K=s[j+0],Z=s[j+1],tt=s[j+2],it=s[j+3];j=(S*o+m)*4,l[j+0]=K,l[j+1]=Z,l[j+2]=tt,l[j+3]=it}},C5=function(u){const t=u.width,n=u.height;let s,l,o,h,f,g,p,m,S,y,b=Math.round(this.kaleidoscopePower());const _=Math.round(this.kaleidoscopeAngle()),G=Math.floor(t*(_%360)/360);if(b<1)return;const N=T.createCanvasElement();N.width=t,N.height=n;const O=N.getContext("2d").getImageData(0,0,t,n);T.releaseCanvas(N),_5(u,O,{polarCenterX:t/2,polarCenterY:n/2});let A=t/Math.pow(2,b);for(;A<=8;)A=A*2,b-=1;A=Math.ceil(A);let z=A,H=0,V=z,j=1;for(G+A>t&&(H=z,V=0,j=-1),l=0;l<n;l+=1)for(s=H;s!==V;s+=j)o=Math.round(s+G)%t,S=(t*l+o)*4,f=O.data[S+0],g=O.data[S+1],p=O.data[S+2],m=O.data[S+3],y=(t*l+s)*4,O.data[y+0]=f,O.data[y+1]=g,O.data[y+2]=p,O.data[y+3]=m;for(l=0;l<n;l+=1)for(z=Math.floor(A),h=0;h<b;h+=1){for(s=0;s<z+1;s+=1)S=(t*l+s)*4,f=O.data[S+0],g=O.data[S+1],p=O.data[S+2],m=O.data[S+3],y=(t*l+z*2-s-1)*4,O.data[y+0]=f,O.data[y+1]=g,O.data[y+2]=p,O.data[y+3]=m;z*=2}E5(O,u,{})};E.addGetterSetter(Y,"kaleidoscopePower",2,q(),E.afterSetFilter);E.addGetterSetter(Y,"kaleidoscopeAngle",0,q(),E.afterSetFilter);function ws(u,t,n){let s=(n*u.width+t)*4;const l=[];return l.push(u.data[s++],u.data[s++],u.data[s++],u.data[s++]),l}function _i(u,t){return Math.sqrt(Math.pow(u[0]-t[0],2)+Math.pow(u[1]-t[1],2)+Math.pow(u[2]-t[2],2))}function b5(u){const t=[0,0,0];for(let n=0;n<u.length;n++)t[0]+=u[n][0],t[1]+=u[n][1],t[2]+=u[n][2];return t[0]/=u.length,t[1]/=u.length,t[2]/=u.length,t}function x5(u,t){const n=ws(u,0,0),s=ws(u,u.width-1,0),l=ws(u,0,u.height-1),o=ws(u,u.width-1,u.height-1),h=t||10;if(_i(n,s)<h&&_i(s,o)<h&&_i(o,l)<h&&_i(l,n)<h){const f=b5([s,n,o,l]),g=[];for(let p=0;p<u.width*u.height;p++){const m=_i(f,[u.data[p*4],u.data[p*4+1],u.data[p*4+2]]);g[p]=m<h?0:255}return g}}function T5(u,t){for(let n=0;n<u.width*u.height;n++)u.data[4*n+3]=t[n]}function M5(u,t,n){const s=[1,1,1,1,0,1,1,1,1],l=Math.round(Math.sqrt(s.length)),o=Math.floor(l/2),h=[];for(let f=0;f<n;f++)for(let g=0;g<t;g++){const p=f*t+g;let m=0;for(let S=0;S<l;S++)for(let y=0;y<l;y++){const b=f+S-o,_=g+y-o;if(b>=0&&b<n&&_>=0&&_<t){const G=b*t+_,N=s[S*l+y];m+=u[G]*N}}h[p]=m===2040?255:0}return h}function A5(u,t,n){const s=[1,1,1,1,1,1,1,1,1],l=Math.round(Math.sqrt(s.length)),o=Math.floor(l/2),h=[];for(let f=0;f<n;f++)for(let g=0;g<t;g++){const p=f*t+g;let m=0;for(let S=0;S<l;S++)for(let y=0;y<l;y++){const b=f+S-o,_=g+y-o;if(b>=0&&b<n&&_>=0&&_<t){const G=b*t+_,N=s[S*l+y];m+=u[G]*N}}h[p]=m>=1020?255:0}return h}function R5(u,t,n){const s=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],l=Math.round(Math.sqrt(s.length)),o=Math.floor(l/2),h=[];for(let f=0;f<n;f++)for(let g=0;g<t;g++){const p=f*t+g;let m=0;for(let S=0;S<l;S++)for(let y=0;y<l;y++){const b=f+S-o,_=g+y-o;if(b>=0&&b<n&&_>=0&&_<t){const G=b*t+_,N=s[S*l+y];m+=u[G]*N}}h[p]=m}return h}const N5=function(u){const t=this.threshold();let n=x5(u,t);return n&&(n=M5(n,u.width,u.height),n=A5(n,u.width,u.height),n=R5(n,u.width,u.height),T5(u,n)),u};E.addGetterSetter(Y,"threshold",0,q(),E.afterSetFilter);const O5=function(u){const t=this.noise()*255,n=u.data,s=n.length,l=t/2;for(let o=0;o<s;o+=4)n[o+0]+=l-2*l*Math.random(),n[o+1]+=l-2*l*Math.random(),n[o+2]+=l-2*l*Math.random()};E.addGetterSetter(Y,"noise",.2,q(),E.afterSetFilter);const D5=function(u){let t=Math.ceil(this.pixelSize()),n=u.width,s=u.height,l=Math.ceil(n/t),o=Math.ceil(s/t),h=u.data;if(t<=0){T.error("pixelSize value can not be <= 0");return}for(let f=0;f<l;f+=1)for(let g=0;g<o;g+=1){let p=0,m=0,S=0,y=0;const b=f*t,_=b+t,G=g*t,N=G+t;let O=0;for(let A=b;A<_;A+=1)if(!(A>=n))for(let z=G;z<N;z+=1){if(z>=s)continue;const H=(n*z+A)*4;p+=h[H+0],m+=h[H+1],S+=h[H+2],y+=h[H+3],O+=1}p=p/O,m=m/O,S=S/O,y=y/O;for(let A=b;A<_;A+=1)if(!(A>=n))for(let z=G;z<N;z+=1){if(z>=s)continue;const H=(n*z+A)*4;h[H+0]=p,h[H+1]=m,h[H+2]=S,h[H+3]=y}}};E.addGetterSetter(Y,"pixelSize",8,q(),E.afterSetFilter);const G5=function(u){const t=Math.round(this.levels()*254)+1,n=u.data,s=n.length,l=255/t;for(let o=0;o<s;o+=1)n[o]=Math.floor(n[o]/l)*l};E.addGetterSetter(Y,"levels",.5,q(),E.afterSetFilter);const z5=function(u){const t=u.data,n=t.length,s=this.red(),l=this.green(),o=this.blue();for(let h=0;h<n;h+=4){const f=(.34*t[h]+.5*t[h+1]+.16*t[h+2])/255;t[h]=f*s,t[h+1]=f*l,t[h+2]=f*o,t[h+3]=t[h+3]}};E.addGetterSetter(Y,"red",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)});E.addGetterSetter(Y,"green",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)});E.addGetterSetter(Y,"blue",0,Ic,E.afterSetFilter);const H5=function(u){const t=u.data,n=t.length,s=this.red(),l=this.green(),o=this.blue(),h=this.alpha();for(let f=0;f<n;f+=4){const g=1-h;t[f]=s*h+t[f]*g,t[f+1]=l*h+t[f+1]*g,t[f+2]=o*h+t[f+2]*g}};E.addGetterSetter(Y,"red",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)});E.addGetterSetter(Y,"green",0,function(u){return this._filterUpToDate=!1,u>255?255:u<0?0:Math.round(u)});E.addGetterSetter(Y,"blue",0,Ic,E.afterSetFilter);E.addGetterSetter(Y,"alpha",1,function(u){return this._filterUpToDate=!1,u>1?1:u<0?0:u});const B5=function(u){const t=u.data,n=t.length;for(let s=0;s<n;s+=4){const l=t[s+0],o=t[s+1],h=t[s+2];t[s+0]=Math.min(255,l*.393+o*.769+h*.189),t[s+1]=Math.min(255,l*.349+o*.686+h*.168),t[s+2]=Math.min(255,l*.272+o*.534+h*.131)}},U5=function(u){const n=u.data;for(let s=0;s<n.length;s+=4){const l=n[s],o=n[s+1],h=n[s+2];.2126*l+.7152*o+.0722*h>=128&&(n[s]=255-l,n[s+1]=255-o,n[s+2]=255-h)}return u},L5=function(u){const t=this.threshold()*255,n=u.data,s=n.length;for(let l=0;l<s;l+=1)n[l]=n[l]<t?0:255};E.addGetterSetter(Y,"threshold",.5,q(),E.afterSetFilter);wn.Util._assign(wn,{Arc:ta,Arrow:Wa,Circle:Yn,Ellipse:Na,Image:Re,Label:fo,Tag:Ia,Line:ea,Path:At,Rect:Gi,RegularPolygon:Oa,Ring:$a,Sprite:Ye,Star:Da,Text:Nt,TextPath:Kt,Transformer:ft,Wedge:aa,Filters:{Blur:h5,Brightness:f5,Brighten:c5,Contrast:d5,Emboss:g5,Enhance:p5,Grayscale:m5,HSL:v5,HSV:y5,Invert:S5,Kaleidoscope:C5,Mask:N5,Noise:O5,Pixelate:D5,Posterize:G5,RGB:z5,RGBA:H5,Sepia:B5,Solarize:U5,Threshold:L5}});var Pr={exports:{}},Vr={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xc;function w5(){return Xc||(Xc=1,(function(u){u.exports=function(t){function n(e,a,i,r){return new sf(e,a,i,r)}function s(){}function l(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)a+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){var a=e,i=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(i=a.return),e=a.return;while(e)}return a.tag===3?i:null}function h(e){if(o(e)!==e)throw Error(l(188))}function f(e){var a=e.alternate;if(!a){if(a=o(e),a===null)throw Error(l(188));return a!==e?null:e}for(var i=e,r=a;;){var c=i.return;if(c===null)break;var d=c.alternate;if(d===null){if(r=c.return,r!==null){i=r;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===i)return h(c),e;if(d===r)return h(c),a;d=d.sibling}throw Error(l(188))}if(i.return!==r.return)i=c,r=d;else{for(var v=!1,C=c.child;C;){if(C===i){v=!0,i=c,r=d;break}if(C===r){v=!0,r=c,i=d;break}C=C.sibling}if(!v){for(C=d.child;C;){if(C===i){v=!0,i=d,r=c;break}if(C===r){v=!0,r=d,i=c;break}C=C.sibling}if(!v)throw Error(l(189))}}if(i.alternate!==r)throw Error(l(190))}if(i.tag!==3)throw Error(l(188));return i.stateNode.current===i?e:a}function g(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=g(e),a!==null)return a;e=e.sibling}return null}function p(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(e.tag!==4&&(a=p(e),a!==null))return a;e=e.sibling}return null}function m(e){return e===null||typeof e!="object"?null:(e=Oh&&e[Oh]||e["@@iterator"],typeof e=="function"?e:null)}function S(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===cf?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case un:return"Fragment";case tr:return"Profiler";case Rh:return"StrictMode";case ar:return"Suspense";case nr:return"SuspenseList";case sr:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case on:return"Portal";case da:return(e.displayName||"Context")+".Provider";case Nh:return(e._context.displayName||"Context")+".Consumer";case er:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ir:return a=e.displayName||null,a!==null?a:S(e.type)||"Memo";case ga:a=e._payload,e=e._init;try{return S(e(a))}catch{}}return null}function y(e){return{current:e}}function b(e){0>fn||(e.current=hr[fn],hr[fn]=null,fn--)}function _(e,a){fn++,hr[fn]=e.current,e.current=a}function G(e){return e>>>=0,e===0?32:31-(R1(e)/N1|0)|0}function N(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function O(e,a,i){var r=e.pendingLanes;if(r===0)return 0;var c=0,d=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var C=r&134217727;return C!==0?(r=C&~d,r!==0?c=N(r):(v&=C,v!==0?c=N(v):i||(i=C&~e,i!==0&&(c=N(i))))):(C=r&~d,C!==0?c=N(C):v!==0?c=N(v):i||(i=r&~e,i!==0&&(c=N(i)))),c===0?0:a!==0&&a!==c&&(a&d)===0&&(d=c&-c,i=a&-a,d>=i||d===32&&(i&4194048)!==0)?a:c}function A(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function z(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function H(){var e=rs;return rs<<=1,(rs&4194048)===0&&(rs=256),e}function V(){var e=os;return os<<=1,(os&62914560)===0&&(os=4194304),e}function j(e){for(var a=[],i=0;31>i;i++)a.push(e);return a}function K(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Z(e,a,i,r,c,d){var v=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var C=e.entanglements,R=e.expirationTimes,B=e.hiddenUpdates;for(i=v&~i;0<i;){var w=31-fe(i),P=1<<w;C[w]=0,R[w]=-1;var Q=B[w];if(Q!==null)for(B[w]=null,w=0;w<Q.length;w++){var lt=Q[w];lt!==null&&(lt.lane&=-536870913)}i&=~P}r!==0&&tt(e,r,0),d!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=d&~(v&~a))}function tt(e,a,i){e.pendingLanes|=a,e.suspendedLanes&=~a;var r=31-fe(a);e.entangledLanes|=a,e.entanglements[r]=e.entanglements[r]|1073741824|i&4194090}function it(e,a){var i=e.entangledLanes|=a;for(e=e.entanglements;i;){var r=31-fe(i),c=1<<r;c&a|e[r]&a&&(e[r]|=a),i&=~c}}function ot(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function I(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function st(e){if(typeof H1=="function"&&B1(e),de&&typeof de.setStrictMode=="function")try{de.setStrictMode(ri,e)}catch{}}function at(e){if(dr===void 0)try{throw Error()}catch(i){var a=i.stack.trim().match(/\n( *(at )?)/);dr=a&&a[1]||"",ec=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+dr+e+ec}function F(e,a){if(!e||gr)return"";gr=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(a){var P=function(){throw Error()};if(Object.defineProperty(P.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(P,[])}catch(lt){var Q=lt}Reflect.construct(e,[],P)}else{try{P.call()}catch(lt){Q=lt}e.call(P.prototype)}}else{try{throw Error()}catch(lt){Q=lt}(P=e())&&typeof P.catch=="function"&&P.catch(function(){})}}catch(lt){if(lt&&Q&&typeof lt.stack=="string")return[lt.stack,Q.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=r.DetermineComponentFrameRoot(),v=d[0],C=d[1];if(v&&C){var R=v.split(`
`),B=C.split(`
`);for(c=r=0;r<R.length&&!R[r].includes("DetermineComponentFrameRoot");)r++;for(;c<B.length&&!B[c].includes("DetermineComponentFrameRoot");)c++;if(r===R.length||c===B.length)for(r=R.length-1,c=B.length-1;1<=r&&0<=c&&R[r]!==B[c];)c--;for(;1<=r&&0<=c;r--,c--)if(R[r]!==B[c]){if(r!==1||c!==1)do if(r--,c--,0>c||R[r]!==B[c]){var w=`
`+R[r].replace(" at new "," at ");return e.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",e.displayName)),w}while(1<=r&&0<=c);break}}}finally{gr=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?at(i):""}function J(e){switch(e.tag){case 26:case 27:case 5:return at(e.type);case 16:return at("Lazy");case 13:return at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return F(e.type,!1);case 11:return F(e.type.render,!1);case 1:return F(e.type,!0);case 31:return at("Activity");default:return""}}function Ut(e){try{var a="";do a+=J(e),e=e.return;while(e);return a}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function k(e,a){if(typeof e=="object"&&e!==null){var i=ac.get(e);return i!==void 0?i:(a={value:e,source:a,stack:Ut(a)},ac.set(e,a),a)}return{value:e,source:a,stack:Ut(a)}}function dt(e,a){gn[pn++]=cs,gn[pn++]=hs,hs=e,cs=a}function zt(e,a,i){_e[Ee++]=Ze,_e[Ee++]=Je,_e[Ee++]=qa,qa=e;var r=Ze;e=Je;var c=32-fe(r)-1;r&=~(1<<c),i+=1;var d=32-fe(a)+c;if(30<d){var v=c-c%5;d=(r&(1<<v)-1).toString(32),r>>=v,c-=v,Ze=1<<32-fe(a)+c|i<<c|r,Je=d+e}else Ze=1<<d|i<<c|r,Je=e}function pt(e){e.return!==null&&(dt(e,1),zt(e,1,0))}function Ot(e){for(;e===hs;)hs=gn[--pn],gn[pn]=null,cs=gn[--pn],gn[pn]=null;for(;e===qa;)qa=_e[--Ee],_e[Ee]=null,Je=_e[--Ee],_e[Ee]=null,Ze=_e[--Ee],_e[Ee]=null}function $t(e,a){_(ma,a),_(oi,e),_(Wt,null),e=gf(a),b(Wt),_(Wt,e)}function tn(){b(Wt),b(oi),b(ma)}function Fs(e){e.memoizedState!==null&&_(fs,e);var a=Wt.current,i=pf(a,e.type);a!==i&&(_(oi,e),_(Wt,i))}function zi(e){oi.current===e&&(b(Wt),b(oi)),fs.current===e&&(b(fs),Ke?Ya._currentValue=hn:Ya._currentValue2=hn)}function na(e){var a=Error(l(418,""));throw jn(k(a,e)),pr}function po(e,a){if(!Se)throw Error(l(175));f1(e.stateNode,e.type,e.memoizedProps,a,e)||na(e)}function mo(e){for(ne=e.return;ne;)switch(ne.tag){case 5:case 13:Le=!1;return;case 27:case 3:Le=!0;return;default:ne=ne.return}}function qn(e){if(!Se||e!==ne)return!1;if(!yt)return mo(e),yt=!0,!1;var a=e.tag;if(jt?a!==3&&a!==27&&(a!==5||Ph(e.type)&&!ls(e.type,e.memoizedProps))&&Pt&&na(e):a!==3&&(a!==5||Ph(e.type)&&!ls(e.type,e.memoizedProps))&&Pt&&na(e),mo(e),a===13){if(!Se)throw Error(l(316));if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Pt=p1(e)}else Pt=jt&&a===27?i1(e.type,Pt):ne?jh(e.stateNode):null;return!0}function Xn(){Se&&(Pt=ne=null,yt=!1)}function vo(){var e=Xa;return e!==null&&(re===null?re=e:re.push.apply(re,e),Xa=null),e}function jn(e){Xa===null?Xa=[e]:Xa.push(e)}function B0(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}function ia(e,a,i){Ke?(_(ds,a._currentValue),a._currentValue=i):(_(ds,a._currentValue2),a._currentValue2=i)}function qe(e){var a=ds.current;Ke?e._currentValue=a:e._currentValue2=a,b(ds)}function ks(e,a,i){for(;e!==null;){var r=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,r!==null&&(r.childLanes|=a)):r!==null&&(r.childLanes&a)!==a&&(r.childLanes|=a),e===i)break;e=e.return}}function Ws(e,a,i,r){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var d=c.dependencies;if(d!==null){var v=c.child;d=d.firstContext;t:for(;d!==null;){var C=d;d=c;for(var R=0;R<a.length;R++)if(C.context===a[R]){d.lanes|=i,C=d.alternate,C!==null&&(C.lanes|=i),ks(d.return,i,e),r||(v=null);break t}d=C.next}}else if(c.tag===18){if(v=c.return,v===null)throw Error(l(341));v.lanes|=i,d=v.alternate,d!==null&&(d.lanes|=i),ks(v,i,e),v=null}else v=c.child;if(v!==null)v.return=c;else for(v=c;v!==null;){if(v===e){v=null;break}if(c=v.sibling,c!==null){c.return=v.return,v=c;break}v=v.return}c=v}}function Pn(e,a,i,r){e=null;for(var c=a,d=!1;c!==null;){if(!d){if((c.flags&524288)!==0)d=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var v=c.alternate;if(v===null)throw Error(l(387));if(v=v.memoizedProps,v!==null){var C=c.type;ge(c.pendingProps.value,v.value)||(e!==null?e.push(C):e=[C])}}else if(c===fs.current){if(v=c.alternate,v===null)throw Error(l(387));v.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Ya):e=[Ya])}c=c.return}e!==null&&Ws(a,e,i,r),a.flags|=262144}function Hi(e){for(e=e.firstContext;e!==null;){var a=e.context;if(!ge(Ke?a._currentValue:a._currentValue2,e.memoizedValue))return!0;e=e.next}return!1}function za(e){ja=e,Fe=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function te(e){return yo(ja,e)}function Bi(e,a){return ja===null&&za(e),yo(e,a)}function yo(e,a){var i=Ke?a._currentValue:a._currentValue2;if(a={context:a,memoizedValue:i,next:null},Fe===null){if(e===null)throw Error(l(308));Fe=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else Fe=Fe.next=a;return i}function Is(){return{controller:new U1,data:new Map,refCount:0}}function Vn(e){e.refCount--,e.refCount===0&&L1(w1,function(){e.controller.abort()})}function He(e){e!==mn&&e.next===null&&(mn===null?gs=mn=e:mn=mn.next=e),ps=!0,mr||(mr=!0,U0())}function en(e,a){if(!vr&&ps){vr=!0;do for(var i=!1,r=gs;r!==null;){if(e!==0){var c=r.pendingLanes;if(c===0)var d=0;else{var v=r.suspendedLanes,C=r.pingedLanes;d=(1<<31-fe(42|e)+1)-1,d&=c&~(v&~C),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(i=!0,bo(r,d))}else d=gt,d=O(r,r===Tt?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==wa),(d&3)===0||A(r,d)||(i=!0,bo(r,d));r=r.next}while(i);vr=!1}}function So(){_o()}function _o(){ps=mr=!1;var e=0;vn!==0&&(xf()&&(e=vn),vn=0);for(var a=De(),i=null,r=gs;r!==null;){var c=r.next,d=Eo(r,a);d===0?(r.next=null,i===null?gs=c:i.next=c,c===null&&(mn=i)):(i=r,(e!==0||(d&3)!==0)&&(ps=!0)),r=c}en(e)}function Eo(e,a){for(var i=e.suspendedLanes,r=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var v=31-fe(d),C=1<<v,R=c[v];R===-1?((C&i)===0||(C&r)!==0)&&(c[v]=z(C,a)):R<=a&&(e.expiredLanes|=C),d&=~C}if(a=Tt,i=gt,i=O(e,e===a?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==wa),r=e.callbackNode,i===0||e===a&&(Ct===2||Ct===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&cr(r),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||A(e,i)){if(a=i&-i,a===e.callbackPriority)return a;switch(r!==null&&cr(r),I(i)){case 2:case 8:i=G1;break;case 32:i=fr;break;case 268435456:i=z1;break;default:i=fr}return r=Co.bind(null,e),i=us(i,r),e.callbackPriority=a,e.callbackNode=i,a}return r!==null&&r!==null&&cr(r),e.callbackPriority=2,e.callbackNode=null,2}function Co(e,a){if(It!==0&&It!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(ni()&&e.callbackNode!==i)return null;var r=gt;return r=O(e,e===Tt?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==wa),r===0?null:(ih(e,r,a),Eo(e,De()),e.callbackNode!=null&&e.callbackNode===i?Co.bind(null,e):null)}function bo(e,a){if(ni())return null;ih(e,a,!0)}function U0(){Of?Df(function(){(ct&6)!==0?us(tc,So):_o()}):us(tc,So)}function $s(){return vn===0&&(vn=H()),vn}function L0(e,a){if(ui===null){var i=ui=[];yr=0,yn=$s(),Sn={status:"pending",value:void 0,then:function(r){i.push(r)}}}return yr++,a.then(xo,xo),a}function xo(){if(--yr===0&&ui!==null){Sn!==null&&(Sn.status="fulfilled");var e=ui;ui=null,yn=0,Sn=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function w0(e,a){var i=[],r={status:"pending",value:null,reason:null,then:function(c){i.push(c)}};return e.then(function(){r.status="fulfilled",r.value=a;for(var c=0;c<i.length;c++)(0,i[c])(a)},function(c){for(r.status="rejected",r.reason=c,c=0;c<i.length;c++)(0,i[c])(void 0)}),r}function tl(){var e=Pa.current;return e!==null?e:Tt.pooledCache}function Ui(e,a){a===null?_(Pa,Pa.current):_(Pa,a.pool)}function To(){var e=tl();return e===null?null:{parent:Ke?Ht._currentValue:Ht._currentValue2,pool:e}}function Li(e,a){if(ge(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var i=Object.keys(e),r=Object.keys(a);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var c=i[r];if(!Y1.call(a,c)||!ge(e[c],a[c]))return!1}return!0}function Mo(e){return e=e.status,e==="fulfilled"||e==="rejected"}function wi(){}function Ao(e,a,i){switch(i=e[i],i===void 0?e.push(a):i!==a&&(a.then(wi,wi),a=i),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,No(e),e;default:if(typeof a.status=="string")a.then(wi,wi);else{if(e=Tt,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=a,e.status="pending",e.then(function(r){if(a.status==="pending"){var c=a;c.status="fulfilled",c.value=r}},function(r){if(a.status==="pending"){var c=a;c.status="rejected",c.reason=r}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,No(e),e}throw _n=a,hi}}function Ro(){if(_n===null)throw Error(l(459));var e=_n;return _n=null,e}function No(e){if(e===hi||e===ms)throw Error(l(483))}function Yi(){for(var e=En,a=_r=En=0;a<e;){var i=Ce[a];Ce[a++]=null;var r=Ce[a];Ce[a++]=null;var c=Ce[a];Ce[a++]=null;var d=Ce[a];if(Ce[a++]=null,r!==null&&c!==null){var v=r.pending;v===null?c.next=c:(c.next=v.next,v.next=c),r.pending=c}d!==0&&Oo(i,c,d)}}function qi(e,a,i,r){Ce[En++]=e,Ce[En++]=a,Ce[En++]=i,Ce[En++]=r,_r|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function el(e,a,i,r){return qi(e,a,i,r),Xi(e)}function an(e,a){return qi(e,null,null,a),Xi(e)}function Oo(e,a,i){e.lanes|=i;var r=e.alternate;r!==null&&(r.lanes|=i);for(var c=!1,d=e.return;d!==null;)d.childLanes|=i,r=d.alternate,r!==null&&(r.childLanes|=i),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(c=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,c&&a!==null&&(c=31-fe(i),e=d.hiddenUpdates,r=e[c],r===null?e[c]=[a]:r.push(a),a.lane=i|536870912),d):null}function Xi(e){if(50<mi)throw mi=0,Dr=null,Error(l(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}function al(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nl(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function sa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function la(e,a,i){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(ct&2)!==0){var c=r.pending;return c===null?a.next=a:(a.next=c.next,c.next=a),r.pending=a,a=Xi(e),Oo(e,null,i),a}return qi(e,r,a,i),Xi(e)}function Kn(e,a,i){if(a=a.updateQueue,a!==null&&(a=a.shared,(i&4194048)!==0)){var r=a.lanes;r&=e.pendingLanes,i|=r,a.lanes=i,it(e,i)}}function il(e,a){var i=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var c=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var v={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};d===null?c=d=v:d=d.next=v,i=i.next}while(i!==null);d===null?c=d=a:d=d.next=a}else c=d=a;i={baseState:r.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:r.shared,callbacks:r.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=a:e.next=a,i.lastBaseUpdate=a}function Qn(){if(Er){var e=Sn;if(e!==null)throw e}}function Zn(e,a,i,r){Er=!1;var c=e.updateQueue;va=!1;var d=c.firstBaseUpdate,v=c.lastBaseUpdate,C=c.shared.pending;if(C!==null){c.shared.pending=null;var R=C,B=R.next;R.next=null,v===null?d=B:v.next=B,v=R;var w=e.alternate;w!==null&&(w=w.updateQueue,C=w.lastBaseUpdate,C!==v&&(C===null?w.firstBaseUpdate=B:C.next=B,w.lastBaseUpdate=R))}if(d!==null){var P=c.baseState;v=0,w=B=R=null,C=d;do{var Q=C.lane&-536870913,lt=Q!==C.lane;if(lt?(gt&Q)===Q:(r&Q)===Q){Q!==0&&Q===yn&&(Er=!0),w!==null&&(w=w.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});t:{var Te=e,vi=C;Q=a;var Qa=i;switch(vi.tag){case 1:if(Te=vi.payload,typeof Te=="function"){P=Te.call(Qa,P,Q);break t}P=Te;break t;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=vi.payload,Q=typeof Te=="function"?Te.call(Qa,P,Q):Te,Q==null)break t;P=$l({},P,Q);break t;case 2:va=!0}}Q=C.callback,Q!==null&&(e.flags|=64,lt&&(e.flags|=8192),lt=c.callbacks,lt===null?c.callbacks=[Q]:lt.push(Q))}else lt={lane:Q,tag:C.tag,payload:C.payload,callback:C.callback,next:null},w===null?(B=w=lt,R=P):w=w.next=lt,v|=Q;if(C=C.next,C===null){if(C=c.shared.pending,C===null)break;lt=C,C=lt.next,lt.next=null,c.lastBaseUpdate=lt,c.shared.pending=null}}while(!0);w===null&&(R=P),c.baseState=R,c.firstBaseUpdate=B,c.lastBaseUpdate=w,d===null&&(c.shared.lanes=0),_a|=v,e.lanes=v,e.memoizedState=P}}function Do(e,a){if(typeof e!="function")throw Error(l(191,e));e.call(a)}function Go(e,a){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Do(i[e],a)}function zo(e,a){e=We,_(ys,e),_(Cn,a),We=e|a.baseLanes}function sl(){_(ys,We),_(Cn,Cn.current)}function ll(){We=ys.current,b(Cn),b(ys)}function Lt(){throw Error(l(321))}function rl(e,a){if(a===null)return!1;for(var i=0;i<a.length&&i<e.length;i++)if(!ge(e[i],a[i]))return!1;return!0}function ol(e,a,i,r,c,d){return ya=d,rt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,et.H=e===null||e.memoizedState===null?ic:sc,Va=!1,d=i(r,c),Va=!1,bn&&(d=Bo(a,i,r,c)),Ho(e),d}function Ho(e){et.H=Es;var a=bt!==null&&bt.next!==null;if(ya=0,qt=bt=rt=null,Ss=!1,ci=0,xn=null,a)throw Error(l(300));e===null||Zt||(e=e.dependencies,e!==null&&Hi(e)&&(Zt=!0))}function Bo(e,a,i,r){rt=e;var c=0;do{if(bn&&(xn=null),ci=0,bn=!1,25<=c)throw Error(l(301));if(c+=1,qt=bt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}et.H=X1,d=a(i,r)}while(bn);return d}function Y0(){var e=et.H,a=e.useState()[0];return a=typeof a.then=="function"?Jn(a):a,e=e.useState()[0],(bt!==null?bt.memoizedState:null)!==e&&(rt.flags|=1024),a}function ul(){var e=_s!==0;return _s=0,e}function hl(e,a,i){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~i}function cl(e){if(Ss){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}Ss=!1}ya=0,qt=bt=rt=null,bn=!1,ci=_s=0,xn=null}function ie(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?rt.memoizedState=qt=e:qt=qt.next=e,qt}function Yt(){if(bt===null){var e=rt.alternate;e=e!==null?e.memoizedState:null}else e=bt.next;var a=qt===null?rt.memoizedState:qt.next;if(a!==null)qt=a,bt=e;else{if(e===null)throw rt.alternate===null?Error(l(467)):Error(l(310));bt=e,e={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},qt===null?rt.memoizedState=qt=e:qt=qt.next=e}return qt}function fl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jn(e){var a=ci;return ci+=1,xn===null&&(xn=[]),e=Ao(xn,e,a),a=rt,(qt===null?a.memoizedState:qt.next)===null&&(a=a.alternate,et.H=a===null||a.memoizedState===null?ic:sc),e}function ji(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Jn(e);if(e.$$typeof===da)return te(e)}throw Error(l(438,String(e)))}function dl(e){var a=null,i=rt.updateQueue;if(i!==null&&(a=i.memoCache),a==null){var r=rt.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(a={data:r.data.map(function(c){return c.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),i===null&&(i=fl(),rt.updateQueue=i),i.memoCache=a,i=a.data[a.index],i===void 0)for(i=a.data[a.index]=Array(e),r=0;r<e;r++)i[r]=hf;return a.index++,i}function Xe(e,a){return typeof a=="function"?a(e):a}function Pi(e){var a=Yt();return gl(a,bt,e)}function gl(e,a,i){var r=e.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=i;var c=e.baseQueue,d=r.pending;if(d!==null){if(c!==null){var v=c.next;c.next=d.next,d.next=v}a.baseQueue=c=d,r.pending=null}if(d=e.baseState,c===null)e.memoizedState=d;else{a=c.next;var C=v=null,R=null,B=a,w=!1;do{var P=B.lane&-536870913;if(P!==B.lane?(gt&P)===P:(ya&P)===P){var Q=B.revertLane;if(Q===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),P===yn&&(w=!0);else if((ya&Q)===Q){B=B.next,Q===yn&&(w=!0);continue}else P={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},R===null?(C=R=P,v=d):R=R.next=P,rt.lanes|=Q,_a|=Q;P=B.action,Va&&i(d,P),d=B.hasEagerState?B.eagerState:i(d,P)}else Q={lane:P,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},R===null?(C=R=Q,v=d):R=R.next=Q,rt.lanes|=P,_a|=P;B=B.next}while(B!==null&&B!==a);if(R===null?v=d:R.next=C,!ge(d,e.memoizedState)&&(Zt=!0,w&&(i=Sn,i!==null)))throw i;e.memoizedState=d,e.baseState=v,e.baseQueue=R,r.lastRenderedState=d}return c===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function pl(e){var a=Yt(),i=a.queue;if(i===null)throw Error(l(311));i.lastRenderedReducer=e;var r=i.dispatch,c=i.pending,d=a.memoizedState;if(c!==null){i.pending=null;var v=c=c.next;do d=e(d,v.action),v=v.next;while(v!==c);ge(d,a.memoizedState)||(Zt=!0),a.memoizedState=d,a.baseQueue===null&&(a.baseState=d),i.lastRenderedState=d}return[d,r]}function Uo(e,a,i){var r=rt,c=Yt(),d=yt;if(d){if(i===void 0)throw Error(l(407));i=i()}else i=a();var v=!ge((bt||c).memoizedState,i);v&&(c.memoizedState=i,Zt=!0),c=c.queue;var C=Yo.bind(null,r,c,e);if(Fn(2048,8,C,[e]),c.getSnapshot!==a||v||qt!==null&&qt.memoizedState.tag&1){if(r.flags|=2048,nn(9,Vi(),wo.bind(null,r,c,i,a),null),Tt===null)throw Error(l(349));d||(ya&124)!==0||Lo(r,a,i)}return i}function Lo(e,a,i){e.flags|=16384,e={getSnapshot:a,value:i},a=rt.updateQueue,a===null?(a=fl(),rt.updateQueue=a,a.stores=[e]):(i=a.stores,i===null?a.stores=[e]:i.push(e))}function wo(e,a,i,r){a.value=i,a.getSnapshot=r,qo(a)&&Xo(e)}function Yo(e,a,i){return i(function(){qo(a)&&Xo(e)})}function qo(e){var a=e.getSnapshot;e=e.value;try{var i=a();return!ge(e,i)}catch{return!0}}function Xo(e){var a=an(e,2);a!==null&&he(a,e,2)}function ml(e){var a=ie();if(typeof e=="function"){var i=e;if(e=i(),Va){st(!0);try{i()}finally{st(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xe,lastRenderedState:e},a}function jo(e,a,i,r){return e.baseState=i,gl(e,bt,typeof r=="function"?r:Xe)}function q0(e,a,i,r,c){if(Qi(e))throw Error(l(485));if(e=a.action,e!==null){var d={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};et.T!==null?i(!0):d.isTransition=!1,r(d),i=a.pending,i===null?(d.next=a.pending=d,Po(a,d)):(d.next=i.next,a.pending=i.next=d)}}function Po(e,a){var i=a.action,r=a.payload,c=e.state;if(a.isTransition){var d=et.T,v={};et.T=v;try{var C=i(c,r),R=et.S;R!==null&&R(v,C),Vo(e,a,C)}catch(B){vl(e,a,B)}finally{et.T=d}}else try{d=i(c,r),Vo(e,a,d)}catch(B){vl(e,a,B)}}function Vo(e,a,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(r){Ko(e,a,r)},function(r){return vl(e,a,r)}):Ko(e,a,i)}function Ko(e,a,i){a.status="fulfilled",a.value=i,Qo(a),e.state=i,a=e.pending,a!==null&&(i=a.next,i===a?e.pending=null:(i=i.next,a.next=i,Po(e,i)))}function vl(e,a,i){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do a.status="rejected",a.reason=i,Qo(a),a=a.next;while(a!==r)}e.action=null}function Qo(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function Zo(e,a){return a}function Jo(e,a){if(yt){var i=Tt.formState;if(i!==null){t:{var r=rt;if(yt){if(Pt){var c=a1(Pt,Le);if(c){Pt=jh(c),r=n1(c);break t}}na(r)}r=!1}r&&(a=i[0])}}i=ie(),i.memoizedState=i.baseState=a,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zo,lastRenderedState:a},i.queue=r,i=fu.bind(null,rt,r),r.dispatch=i,r=ml(!1);var d=El.bind(null,rt,!1,r.queue);return r=ie(),c={state:a,dispatch:null,action:e,pending:null},r.queue=c,i=q0.bind(null,rt,c,d,i),c.dispatch=i,r.memoizedState=e,[a,i,!1]}function Fo(e){var a=Yt();return ko(a,bt,e)}function ko(e,a,i){if(a=gl(e,a,Zo)[0],e=Pi(Xe)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var r=Jn(a)}catch(v){throw v===hi?ms:v}else r=a;a=Yt();var c=a.queue,d=c.dispatch;return i!==a.memoizedState&&(rt.flags|=2048,nn(9,Vi(),X0.bind(null,c,i),null)),[r,d,e]}function X0(e,a){e.action=a}function Wo(e){var a=Yt(),i=bt;if(i!==null)return ko(a,i,e);Yt(),a=a.memoizedState,i=Yt();var r=i.queue.dispatch;return i.memoizedState=e,[a,r,!1]}function nn(e,a,i,r){return e={tag:e,create:i,deps:r,inst:a,next:null},a=rt.updateQueue,a===null&&(a=fl(),rt.updateQueue=a),i=a.lastEffect,i===null?a.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,a.lastEffect=e),e}function Vi(){return{destroy:void 0,resource:void 0}}function Io(){return Yt().memoizedState}function Ki(e,a,i,r){var c=ie();r=r===void 0?null:r,rt.flags|=e,c.memoizedState=nn(1|a,Vi(),i,r)}function Fn(e,a,i,r){var c=Yt();r=r===void 0?null:r;var d=c.memoizedState.inst;bt!==null&&r!==null&&rl(r,bt.memoizedState.deps)?c.memoizedState=nn(a,d,i,r):(rt.flags|=e,c.memoizedState=nn(1|a,d,i,r))}function $o(e,a){Ki(8390656,8,e,a)}function tu(e,a){Fn(2048,8,e,a)}function eu(e,a){return Fn(4,2,e,a)}function au(e,a){return Fn(4,4,e,a)}function nu(e,a){if(typeof a=="function"){e=e();var i=a(e);return function(){typeof i=="function"?i():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function iu(e,a,i){i=i!=null?i.concat([e]):null,Fn(4,4,nu.bind(null,a,e),i)}function yl(){}function su(e,a){var i=Yt();a=a===void 0?null:a;var r=i.memoizedState;return a!==null&&rl(a,r[1])?r[0]:(i.memoizedState=[e,a],e)}function lu(e,a){var i=Yt();a=a===void 0?null:a;var r=i.memoizedState;if(a!==null&&rl(a,r[1]))return r[0];if(r=e(),Va){st(!0);try{e()}finally{st(!1)}}return i.memoizedState=[r,a],r}function Sl(e,a,i){return i===void 0||(ya&1073741824)!==0?e.memoizedState=a:(e.memoizedState=i,e=nh(),rt.lanes|=e,_a|=e,i)}function ru(e,a,i,r){return ge(i,a)?i:Cn.current!==null?(e=Sl(e,i,r),ge(e,a)||(Zt=!0),e):(ya&42)===0?(Zt=!0,e.memoizedState=i):(e=nh(),rt.lanes|=e,_a|=e,a)}function ou(e,a,i,r,c){var d=Qe();Qt(d!==0&&8>d?d:8);var v=et.T,C={};et.T=C,El(e,!1,a,i);try{var R=c(),B=et.S;if(B!==null&&B(C,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var w=w0(R,r);kn(e,a,w,ue(e))}else kn(e,a,r,ue(e))}catch(P){kn(e,a,{then:function(){},status:"rejected",reason:P},ue())}finally{Qt(d),et.T=v}}function uu(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:hn,baseState:hn,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xe,lastRenderedState:hn},next:null};var i={};return a.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xe,lastRenderedState:i},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function _l(){return te(Ya)}function hu(){return Yt().memoizedState}function cu(){return Yt().memoizedState}function j0(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var i=ue();e=sa(i);var r=la(a,e,i);r!==null&&(he(r,a,i),Kn(r,a,i)),a={cache:Is()},e.payload=a;return}a=a.return}}function P0(e,a,i){var r=ue();i={lane:r,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},Qi(e)?du(a,i):(i=el(e,a,i,r),i!==null&&(he(i,e,r),gu(i,a,r)))}function fu(e,a,i){var r=ue();kn(e,a,i,r)}function kn(e,a,i,r){var c={lane:r,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(Qi(e))du(a,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=a.lastRenderedReducer,d!==null))try{var v=a.lastRenderedState,C=d(v,i);if(c.hasEagerState=!0,c.eagerState=C,ge(C,v))return qi(e,a,c,0),Tt===null&&Yi(),!1}catch{}finally{}if(i=el(e,a,c,r),i!==null)return he(i,e,r),gu(i,a,r),!0}return!1}function El(e,a,i,r){if(r={lane:2,revertLane:$s(),action:r,hasEagerState:!1,eagerState:null,next:null},Qi(e)){if(a)throw Error(l(479))}else a=el(e,i,r,2),a!==null&&he(a,e,2)}function Qi(e){var a=e.alternate;return e===rt||a!==null&&a===rt}function du(e,a){bn=Ss=!0;var i=e.pending;i===null?a.next=a:(a.next=i.next,i.next=a),e.pending=a}function gu(e,a,i){if((i&4194048)!==0){var r=a.lanes;r&=e.pendingLanes,i|=r,a.lanes=i,it(e,i)}}function Zi(e){var a=fi;return fi+=1,Tn===null&&(Tn=[]),Ao(Tn,e,a)}function Wn(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function Ji(e,a){throw a.$$typeof===of?Error(l(525)):(e=Object.prototype.toString.call(a),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function pu(e){var a=e._init;return a(e._payload)}function mu(e){function a(M,x){if(e){var D=M.deletions;D===null?(M.deletions=[x],M.flags|=16):D.push(x)}}function i(M,x){if(!e)return null;for(;x!==null;)a(M,x),x=x.sibling;return null}function r(M){for(var x=new Map;M!==null;)M.key!==null?x.set(M.key,M):x.set(M.index,M),M=M.sibling;return x}function c(M,x){return M=Ve(M,x),M.index=0,M.sibling=null,M}function d(M,x,D){return M.index=D,e?(D=M.alternate,D!==null?(D=D.index,D<x?(M.flags|=67108866,x):D):(M.flags|=67108866,x)):(M.flags|=1048576,x)}function v(M){return e&&M.alternate===null&&(M.flags|=67108866),M}function C(M,x,D,L){return x===null||x.tag!==6?(x=kl(D,M.mode,L),x.return=M,x):(x=c(x,D),x.return=M,x)}function R(M,x,D,L){var W=D.type;return W===un?w(M,x,D.props.children,L,D.key):x!==null&&(x.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===ga&&pu(W)===x.type)?(x=c(x,D.props),Wn(x,D),x.return=M,x):(x=ns(D.type,D.key,D.props,null,M.mode,L),Wn(x,D),x.return=M,x)}function B(M,x,D,L){return x===null||x.tag!==4||x.stateNode.containerInfo!==D.containerInfo||x.stateNode.implementation!==D.implementation?(x=Wl(D,M.mode,L),x.return=M,x):(x=c(x,D.children||[]),x.return=M,x)}function w(M,x,D,L,W){return x===null||x.tag!==7?(x=La(D,M.mode,L,W),x.return=M,x):(x=c(x,D),x.return=M,x)}function P(M,x,D){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=kl(""+x,M.mode,D),x.return=M,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case is:return D=ns(x.type,x.key,x.props,null,M.mode,D),Wn(D,x),D.return=M,D;case on:return x=Wl(x,M.mode,D),x.return=M,x;case ga:var L=x._init;return x=L(x._payload),P(M,x,D)}if(ss(x)||m(x))return x=La(x,M.mode,D,null),x.return=M,x;if(typeof x.then=="function")return P(M,Zi(x),D);if(x.$$typeof===da)return P(M,Bi(M,x),D);Ji(M,x)}return null}function Q(M,x,D,L){var W=x!==null?x.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return W!==null?null:C(M,x,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case is:return D.key===W?R(M,x,D,L):null;case on:return D.key===W?B(M,x,D,L):null;case ga:return W=D._init,D=W(D._payload),Q(M,x,D,L)}if(ss(D)||m(D))return W!==null?null:w(M,x,D,L,null);if(typeof D.then=="function")return Q(M,x,Zi(D),L);if(D.$$typeof===da)return Q(M,x,Bi(M,D),L);Ji(M,D)}return null}function lt(M,x,D,L,W){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return M=M.get(D)||null,C(x,M,""+L,W);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case is:return M=M.get(L.key===null?D:L.key)||null,R(x,M,L,W);case on:return M=M.get(L.key===null?D:L.key)||null,B(x,M,L,W);case ga:var Rt=L._init;return L=Rt(L._payload),lt(M,x,D,L,W)}if(ss(L)||m(L))return M=M.get(D)||null,w(x,M,L,W,null);if(typeof L.then=="function")return lt(M,x,D,Zi(L),W);if(L.$$typeof===da)return lt(M,x,D,Bi(x,L),W);Ji(x,L)}return null}function Te(M,x,D,L){for(var W=null,Rt=null,nt=x,mt=x=0,Ft=null;nt!==null&&mt<D.length;mt++){nt.index>mt?(Ft=nt,nt=null):Ft=nt.sibling;var vt=Q(M,nt,D[mt],L);if(vt===null){nt===null&&(nt=Ft);break}e&&nt&&vt.alternate===null&&a(M,nt),x=d(vt,x,mt),Rt===null?W=vt:Rt.sibling=vt,Rt=vt,nt=Ft}if(mt===D.length)return i(M,nt),yt&&dt(M,mt),W;if(nt===null){for(;mt<D.length;mt++)nt=P(M,D[mt],L),nt!==null&&(x=d(nt,x,mt),Rt===null?W=nt:Rt.sibling=nt,Rt=nt);return yt&&dt(M,mt),W}for(nt=r(nt);mt<D.length;mt++)Ft=lt(nt,M,mt,D[mt],L),Ft!==null&&(e&&Ft.alternate!==null&&nt.delete(Ft.key===null?mt:Ft.key),x=d(Ft,x,mt),Rt===null?W=Ft:Rt.sibling=Ft,Rt=Ft);return e&&nt.forEach(function(ba){return a(M,ba)}),yt&&dt(M,mt),W}function vi(M,x,D,L){if(D==null)throw Error(l(151));for(var W=null,Rt=null,nt=x,mt=x=0,Ft=null,vt=D.next();nt!==null&&!vt.done;mt++,vt=D.next()){nt.index>mt?(Ft=nt,nt=null):Ft=nt.sibling;var ba=Q(M,nt,vt.value,L);if(ba===null){nt===null&&(nt=Ft);break}e&&nt&&ba.alternate===null&&a(M,nt),x=d(ba,x,mt),Rt===null?W=ba:Rt.sibling=ba,Rt=ba,nt=Ft}if(vt.done)return i(M,nt),yt&&dt(M,mt),W;if(nt===null){for(;!vt.done;mt++,vt=D.next())vt=P(M,vt.value,L),vt!==null&&(x=d(vt,x,mt),Rt===null?W=vt:Rt.sibling=vt,Rt=vt);return yt&&dt(M,mt),W}for(nt=r(nt);!vt.done;mt++,vt=D.next())vt=lt(nt,M,mt,vt.value,L),vt!==null&&(e&&vt.alternate!==null&&nt.delete(vt.key===null?mt:vt.key),x=d(vt,x,mt),Rt===null?W=vt:Rt.sibling=vt,Rt=vt);return e&&nt.forEach(function(V1){return a(M,V1)}),yt&&dt(M,mt),W}function Qa(M,x,D,L){if(typeof D=="object"&&D!==null&&D.type===un&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case is:t:{for(var W=D.key;x!==null;){if(x.key===W){if(W=D.type,W===un){if(x.tag===7){i(M,x.sibling),L=c(x,D.props.children),L.return=M,M=L;break t}}else if(x.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===ga&&pu(W)===x.type){i(M,x.sibling),L=c(x,D.props),Wn(L,D),L.return=M,M=L;break t}i(M,x);break}else a(M,x);x=x.sibling}D.type===un?(L=La(D.props.children,M.mode,L,D.key),L.return=M,M=L):(L=ns(D.type,D.key,D.props,null,M.mode,L),Wn(L,D),L.return=M,M=L)}return v(M);case on:t:{for(W=D.key;x!==null;){if(x.key===W)if(x.tag===4&&x.stateNode.containerInfo===D.containerInfo&&x.stateNode.implementation===D.implementation){i(M,x.sibling),L=c(x,D.children||[]),L.return=M,M=L;break t}else{i(M,x);break}else a(M,x);x=x.sibling}L=Wl(D,M.mode,L),L.return=M,M=L}return v(M);case ga:return W=D._init,D=W(D._payload),Qa(M,x,D,L)}if(ss(D))return Te(M,x,D,L);if(m(D)){if(W=m(D),typeof W!="function")throw Error(l(150));return D=W.call(D),vi(M,x,D,L)}if(typeof D.then=="function")return Qa(M,x,Zi(D),L);if(D.$$typeof===da)return Qa(M,x,Bi(M,D),L);Ji(M,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,x!==null&&x.tag===6?(i(M,x.sibling),L=c(x,D),L.return=M,M=L):(i(M,x),L=kl(D,M.mode,L),L.return=M,M=L),v(M)):i(M,x)}return function(M,x,D,L){try{fi=0;var W=Qa(M,x,D,L);return Tn=null,W}catch(nt){if(nt===hi||nt===ms)throw nt;var Rt=n(29,nt,null,M.mode);return Rt.lanes=L,Rt.return=M,Rt}finally{}}}function ra(e){var a=e.alternate;_(Vt,Vt.current&1),_(be,e),we===null&&(a===null||Cn.current!==null||a.memoizedState!==null)&&(we=e)}function vu(e){if(e.tag===22){if(_(Vt,Vt.current),_(be,e),we===null){var a=e.alternate;a!==null&&a.memoizedState!==null&&(we=e)}}else oa()}function oa(){_(Vt,Vt.current),_(be,be.current)}function je(e){b(be),we===e&&(we=null),b(Vt)}function Fi(e){for(var a=e;a!==null;){if(a.tag===13){var i=a.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||rr(i)||or(i)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Cl(e,a,i,r){a=e.memoizedState,i=i(r,a),i=i==null?a:$l({},a,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}function yu(e,a,i,r,c,d,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,d,v):a.prototype&&a.prototype.isPureReactComponent?!Li(i,r)||!Li(c,d):!0}function Su(e,a,i,r){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(i,r),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(i,r),a.state!==e&&Cr.enqueueReplaceState(a,a.state,null)}function Ha(e,a){var i=a;if("ref"in a){i={};for(var r in a)r!=="ref"&&(i[r]=a[r])}if(e=e.defaultProps){i===a&&(i=$l({},i));for(var c in e)i[c]===void 0&&(i[c]=e[c])}return i}function ki(e,a){try{var i=e.onUncaughtError;i(a.value,{componentStack:a.stack})}catch(r){setTimeout(function(){throw r})}}function _u(e,a,i){try{var r=e.onCaughtError;r(i.value,{componentStack:i.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function bl(e,a,i){return i=sa(i),i.tag=3,i.payload={element:null},i.callback=function(){ki(e,a)},i}function Eu(e){return e=sa(e),e.tag=3,e}function Cu(e,a,i,r){var c=i.type.getDerivedStateFromError;if(typeof c=="function"){var d=r.value;e.payload=function(){return c(d)},e.callback=function(){_u(a,i,r)}}var v=i.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){_u(a,i,r),typeof c!="function"&&(Ea===null?Ea=new Set([this]):Ea.add(this));var C=r.stack;this.componentDidCatch(r.value,{componentStack:C!==null?C:""})})}function V0(e,a,i,r,c){if(i.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(a=i.alternate,a!==null&&Pn(a,i,c,!0),i=be.current,i!==null){switch(i.tag){case 13:return we===null?Ql():i.alternate===null&&Bt===0&&(Bt=3),i.flags&=-257,i.flags|=65536,i.lanes=c,r===vs?i.flags|=16384:(a=i.updateQueue,a===null?i.updateQueue=new Set([r]):a.add(r),Jl(e,r,c)),!1;case 22:return i.flags|=65536,r===vs?i.flags|=16384:(a=i.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([r])},i.updateQueue=a):(i=a.retryQueue,i===null?a.retryQueue=new Set([r]):i.add(r)),Jl(e,r,c)),!1}throw Error(l(435,i.tag))}return Jl(e,r,c),Ql(),!1}if(yt)return a=be.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=c,r!==pr&&(e=Error(l(422),{cause:r}),jn(k(e,i)))):(r!==pr&&(a=Error(l(423),{cause:r}),jn(k(a,i))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,r=k(r,i),c=bl(e.stateNode,r,c),il(e,c),Bt!==4&&(Bt=2)),!1;var d=Error(l(520),{cause:r});if(d=k(d,i),gi===null?gi=[d]:gi.push(d),Bt!==4&&(Bt=2),a===null)return!0;r=k(r,i),i=a;do{switch(i.tag){case 3:return i.flags|=65536,e=c&-c,i.lanes|=e,e=bl(i.stateNode,r,e),il(i,e),!1;case 1:if(a=i.type,d=i.stateNode,(i.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ea===null||!Ea.has(d))))return i.flags|=65536,c&=-c,i.lanes|=c,c=Eu(c),Cu(c,e,i,r),il(i,c),!1}i=i.return}while(i!==null);return!1}function kt(e,a,i,r){a.child=e===null?lc(a,null,i,r):Mn(a,e.child,i,r)}function bu(e,a,i,r,c){i=i.render;var d=a.ref;if("ref"in r){var v={};for(var C in r)C!=="ref"&&(v[C]=r[C])}else v=r;return za(a),r=ol(e,a,i,v,d,c),C=ul(),e!==null&&!Zt?(hl(e,a,c),Pe(e,a,c)):(yt&&C&&pt(a),a.flags|=1,kt(e,a,r,c),a.child)}function xu(e,a,i,r,c){if(e===null){var d=i.type;return typeof d=="function"&&!Fl(d)&&d.defaultProps===void 0&&i.compare===null?(a.tag=15,a.type=d,Tu(e,a,d,r,c)):(e=ns(i.type,null,r,a,a.mode,c),e.ref=a.ref,e.return=a,a.child=e)}if(d=e.child,!Ol(e,c)){var v=d.memoizedProps;if(i=i.compare,i=i!==null?i:Li,i(v,r)&&e.ref===a.ref)return Pe(e,a,c)}return a.flags|=1,e=Ve(d,r),e.ref=a.ref,e.return=a,a.child=e}function Tu(e,a,i,r,c){if(e!==null){var d=e.memoizedProps;if(Li(d,r)&&e.ref===a.ref)if(Zt=!1,a.pendingProps=r=d,Ol(e,c))(e.flags&131072)!==0&&(Zt=!0);else return a.lanes=e.lanes,Pe(e,a,c)}return xl(e,a,i,r,c)}function Mu(e,a,i){var r=a.pendingProps,c=r.children,d=e!==null?e.memoizedState:null;if(r.mode==="hidden"){if((a.flags&128)!==0){if(r=d!==null?d.baseLanes|i:i,e!==null){for(c=a.child=e.child,d=0;c!==null;)d=d|c.lanes|c.childLanes,c=c.sibling;a.childLanes=d&~r}else a.childLanes=0,a.child=null;return Au(e,a,r,i)}if((i&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ui(a,d!==null?d.cachePool:null),d!==null?zo(a,d):sl(),vu(a);else return a.lanes=a.childLanes=536870912,Au(e,a,d!==null?d.baseLanes|i:i,i)}else d!==null?(Ui(a,d.cachePool),zo(a,d),oa(),a.memoizedState=null):(e!==null&&Ui(a,null),sl(),oa());return kt(e,a,c,i),a.child}function Au(e,a,i,r){var c=tl();return c=c===null?null:{parent:Ke?Ht._currentValue:Ht._currentValue2,pool:c},a.memoizedState={baseLanes:i,cachePool:c},e!==null&&Ui(a,null),sl(),vu(a),e!==null&&Pn(e,a,r,!0),null}function Wi(e,a){var i=a.ref;if(i===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(l(284));(e===null||e.ref!==i)&&(a.flags|=4194816)}}function xl(e,a,i,r,c){return za(a),i=ol(e,a,i,r,void 0,c),r=ul(),e!==null&&!Zt?(hl(e,a,c),Pe(e,a,c)):(yt&&r&&pt(a),a.flags|=1,kt(e,a,i,c),a.child)}function Ru(e,a,i,r,c,d){return za(a),a.updateQueue=null,i=Bo(a,r,i,c),Ho(e),r=ul(),e!==null&&!Zt?(hl(e,a,d),Pe(e,a,d)):(yt&&r&&pt(a),a.flags|=1,kt(e,a,i,d),a.child)}function Nu(e,a,i,r,c){if(za(a),a.stateNode===null){var d=dn,v=i.contextType;typeof v=="object"&&v!==null&&(d=te(v)),d=new i(r,d),a.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Cr,a.stateNode=d,d._reactInternals=a,d=a.stateNode,d.props=r,d.state=a.memoizedState,d.refs={},al(a),v=i.contextType,d.context=typeof v=="object"&&v!==null?te(v):dn,d.state=a.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(Cl(a,i,v,r),d.state=a.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Cr.enqueueReplaceState(d,d.state,null),Zn(a,r,d,c),Qn(),d.state=a.memoizedState),typeof d.componentDidMount=="function"&&(a.flags|=4194308),r=!0}else if(e===null){d=a.stateNode;var C=a.memoizedProps,R=Ha(i,C);d.props=R;var B=d.context,w=i.contextType;v=dn,typeof w=="object"&&w!==null&&(v=te(w));var P=i.getDerivedStateFromProps;w=typeof P=="function"||typeof d.getSnapshotBeforeUpdate=="function",C=a.pendingProps!==C,w||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(C||B!==v)&&Su(a,d,r,v),va=!1;var Q=a.memoizedState;d.state=Q,Zn(a,r,d,c),Qn(),B=a.memoizedState,C||Q!==B||va?(typeof P=="function"&&(Cl(a,i,P,r),B=a.memoizedState),(R=va||yu(a,i,R,r,Q,B,v))?(w||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(a.flags|=4194308)):(typeof d.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=r,a.memoizedState=B),d.props=r,d.state=B,d.context=v,r=R):(typeof d.componentDidMount=="function"&&(a.flags|=4194308),r=!1)}else{d=a.stateNode,nl(e,a),v=a.memoizedProps,w=Ha(i,v),d.props=w,P=a.pendingProps,Q=d.context,B=i.contextType,R=dn,typeof B=="object"&&B!==null&&(R=te(B)),C=i.getDerivedStateFromProps,(B=typeof C=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==P||Q!==R)&&Su(a,d,r,R),va=!1,Q=a.memoizedState,d.state=Q,Zn(a,r,d,c),Qn();var lt=a.memoizedState;v!==P||Q!==lt||va||e!==null&&e.dependencies!==null&&Hi(e.dependencies)?(typeof C=="function"&&(Cl(a,i,C,r),lt=a.memoizedState),(w=va||yu(a,i,w,r,Q,lt,R)||e!==null&&e.dependencies!==null&&Hi(e.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(r,lt,R),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(r,lt,R)),typeof d.componentDidUpdate=="function"&&(a.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&Q===e.memoizedState||(a.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&Q===e.memoizedState||(a.flags|=1024),a.memoizedProps=r,a.memoizedState=lt),d.props=r,d.state=lt,d.context=R,r=w):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&Q===e.memoizedState||(a.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&Q===e.memoizedState||(a.flags|=1024),r=!1)}return d=r,Wi(e,a),r=(a.flags&128)!==0,d||r?(d=a.stateNode,i=r&&typeof i.getDerivedStateFromError!="function"?null:d.render(),a.flags|=1,e!==null&&r?(a.child=Mn(a,e.child,null,c),a.child=Mn(a,null,i,c)):kt(e,a,i,c),a.memoizedState=d.state,e=a.child):e=Pe(e,a,c),e}function Ou(e,a,i,r){return Xn(),a.flags|=256,kt(e,a,i,r),a.child}function Tl(e){return{baseLanes:e,cachePool:To()}}function Ml(e,a,i){return e=e!==null?e.childLanes&~i:0,a&&(e|=xe),e}function Du(e,a,i){var r=a.pendingProps,c=!1,d=(a.flags&128)!==0,v;if((v=d)||(v=e!==null&&e.memoizedState===null?!1:(Vt.current&2)!==0),v&&(c=!0,a.flags&=-129),v=(a.flags&32)!==0,a.flags&=-33,e===null){if(yt){if(c?ra(a):oa(),yt){var C=Pt,R;(R=C)&&(C=c1(C,Le),C!==null?(a.memoizedState={dehydrated:C,treeContext:qa!==null?{id:Ze,overflow:Je}:null,retryLane:536870912,hydrationErrors:null},R=n(18,null,null,0),R.stateNode=C,R.return=a,a.child=R,ne=a,Pt=null,R=!0):R=!1),R||na(a)}if(C=a.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return or(C)?a.lanes=32:a.lanes=536870912,null;je(a)}return C=r.children,r=r.fallback,c?(oa(),c=a.mode,C=Ii({mode:"hidden",children:C},c),r=La(r,c,i,null),C.return=a,r.return=a,C.sibling=r,a.child=C,c=a.child,c.memoizedState=Tl(i),c.childLanes=Ml(e,v,i),a.memoizedState=br,r):(ra(a),Al(a,C))}if(R=e.memoizedState,R!==null&&(C=R.dehydrated,C!==null)){if(d)a.flags&256?(ra(a),a.flags&=-257,a=Rl(e,a,i)):a.memoizedState!==null?(oa(),a.child=e.child,a.flags|=128,a=null):(oa(),c=r.fallback,C=a.mode,r=Ii({mode:"visible",children:r.children},C),c=La(c,C,i,null),c.flags|=2,r.return=a,c.return=a,r.sibling=c,a.child=r,Mn(a,e.child,null,i),r=a.child,r.memoizedState=Tl(i),r.childLanes=Ml(e,v,i),a.memoizedState=br,a=c);else if(ra(a),or(C))v=t1(C).digest,r=Error(l(419)),r.stack="",r.digest=v,jn({value:r,source:null,stack:null}),a=Rl(e,a,i);else if(Zt||Pn(e,a,i,!1),v=(i&e.childLanes)!==0,Zt||v){if(v=Tt,v!==null&&(r=i&-i,r=(r&42)!==0?1:ot(r),r=(r&(v.suspendedLanes|i))!==0?0:r,r!==0&&r!==R.retryLane))throw R.retryLane=r,an(e,r),he(v,e,r),oc;rr(C)||Ql(),a=Rl(e,a,i)}else rr(C)?(a.flags|=192,a.child=e.child,a=null):(e=R.treeContext,Se&&(Pt=r1(C),ne=a,yt=!0,Xa=null,Le=!1,e!==null&&(_e[Ee++]=Ze,_e[Ee++]=Je,_e[Ee++]=qa,Ze=e.id,Je=e.overflow,qa=a)),a=Al(a,r.children),a.flags|=4096);return a}return c?(oa(),c=r.fallback,C=a.mode,R=e.child,d=R.sibling,r=Ve(R,{mode:"hidden",children:r.children}),r.subtreeFlags=R.subtreeFlags&65011712,d!==null?c=Ve(d,c):(c=La(c,C,i,null),c.flags|=2),c.return=a,r.return=a,r.sibling=c,a.child=r,r=c,c=a.child,C=e.child.memoizedState,C===null?C=Tl(i):(R=C.cachePool,R!==null?(d=Ke?Ht._currentValue:Ht._currentValue2,R=R.parent!==d?{parent:d,pool:d}:R):R=To(),C={baseLanes:C.baseLanes|i,cachePool:R}),c.memoizedState=C,c.childLanes=Ml(e,v,i),a.memoizedState=br,r):(ra(a),i=e.child,e=i.sibling,i=Ve(i,{mode:"visible",children:r.children}),i.return=a,i.sibling=null,e!==null&&(v=a.deletions,v===null?(a.deletions=[e],a.flags|=16):v.push(e)),a.child=i,a.memoizedState=null,i)}function Al(e,a){return a=Ii({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function Ii(e,a){return e=n(22,e,null,a),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Rl(e,a,i){return Mn(a,e.child,null,i),e=Al(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function Gu(e,a,i){e.lanes|=a;var r=e.alternate;r!==null&&(r.lanes|=a),ks(e.return,a,i)}function Nl(e,a,i,r,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:c}:(d.isBackwards=a,d.rendering=null,d.renderingStartTime=0,d.last=r,d.tail=i,d.tailMode=c)}function zu(e,a,i){var r=a.pendingProps,c=r.revealOrder,d=r.tail;if(kt(e,a,r.children,i),r=Vt.current,(r&2)!==0)r=r&1|2,a.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gu(e,i,a);else if(e.tag===19)Gu(e,i,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break t;for(;e.sibling===null;){if(e.return===null||e.return===a)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(_(Vt,r),c){case"forwards":for(i=a.child,c=null;i!==null;)e=i.alternate,e!==null&&Fi(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=a.child,a.child=null):(c=i.sibling,i.sibling=null),Nl(a,!1,c,i,d);break;case"backwards":for(i=null,c=a.child,a.child=null;c!==null;){if(e=c.alternate,e!==null&&Fi(e)===null){a.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}Nl(a,!0,i,null,d);break;case"together":Nl(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Pe(e,a,i){if(e!==null&&(a.dependencies=e.dependencies),_a|=a.lanes,(i&a.childLanes)===0)if(e!==null){if(Pn(e,a,i,!1),(i&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(l(153));if(a.child!==null){for(e=a.child,i=Ve(e,e.pendingProps),a.child=i,i.return=a;e.sibling!==null;)e=e.sibling,i=i.sibling=Ve(e,e.pendingProps),i.return=a;i.sibling=null}return a.child}function Ol(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&Hi(e)))}function K0(e,a,i){switch(a.tag){case 3:$t(a,a.stateNode.containerInfo),ia(a,Ht,e.memoizedState.cache),Xn();break;case 27:case 5:Fs(a);break;case 4:$t(a,a.stateNode.containerInfo);break;case 10:ia(a,a.type,a.memoizedProps.value);break;case 13:var r=a.memoizedState;if(r!==null)return r.dehydrated!==null?(ra(a),a.flags|=128,null):(i&a.child.childLanes)!==0?Du(e,a,i):(ra(a),e=Pe(e,a,i),e!==null?e.sibling:null);ra(a);break;case 19:var c=(e.flags&128)!==0;if(r=(i&a.childLanes)!==0,r||(Pn(e,a,i,!1),r=(i&a.childLanes)!==0),c){if(r)return zu(e,a,i);a.flags|=128}if(c=a.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),_(Vt,Vt.current),r)break;return null;case 22:case 23:return a.lanes=0,Mu(e,a,i);case 24:ia(a,Ht,e.memoizedState.cache)}return Pe(e,a,i)}function Hu(e,a,i){if(e!==null)if(e.memoizedProps!==a.pendingProps)Zt=!0;else{if(!Ol(e,i)&&(a.flags&128)===0)return Zt=!1,K0(e,a,i);Zt=(e.flags&131072)!==0}else Zt=!1,yt&&(a.flags&1048576)!==0&&zt(a,cs,a.index);switch(a.lanes=0,a.tag){case 16:t:{e=a.pendingProps;var r=a.elementType,c=r._init;if(r=c(r._payload),a.type=r,typeof r=="function")Fl(r)?(e=Ha(r,e),a.tag=1,a=Nu(null,a,r,e,i)):(a.tag=0,a=xl(null,a,r,e,i));else{if(r!=null){if(c=r.$$typeof,c===er){a.tag=11,a=bu(null,a,r,e,i);break t}else if(c===ir){a.tag=14,a=xu(null,a,r,e,i);break t}}throw a=S(r)||r,Error(l(306,a,""))}}return a;case 0:return xl(e,a,a.type,a.pendingProps,i);case 1:return r=a.type,c=Ha(r,a.pendingProps),Nu(e,a,r,c,i);case 3:t:{if($t(a,a.stateNode.containerInfo),e===null)throw Error(l(387));var d=a.pendingProps;c=a.memoizedState,r=c.element,nl(e,a),Zn(a,d,null,i);var v=a.memoizedState;if(d=v.cache,ia(a,Ht,d),d!==c.cache&&Ws(a,[Ht],i,!0),Qn(),d=v.element,Se&&c.isDehydrated)if(c={element:d,isDehydrated:!1,cache:v.cache},a.updateQueue.baseState=c,a.memoizedState=c,a.flags&256){a=Ou(e,a,d,i);break t}else if(d!==r){r=k(Error(l(424)),a),jn(r),a=Ou(e,a,d,i);break t}else for(Se&&(Pt=l1(a.stateNode.containerInfo),ne=a,yt=!0,Xa=null,Le=!0),i=lc(a,null,d,i),a.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Xn(),d===r){a=Pe(e,a,i);break t}kt(e,a,d,i)}a=a.child}return a;case 26:if(Oe)return Wi(e,a),e===null?(i=Kh(a.type,null,a.pendingProps,null))?a.memoizedState=i:yt||(a.stateNode=b1(a.type,a.pendingProps,ma.current,a)):a.memoizedState=Kh(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:if(jt)return Fs(a),e===null&&jt&&yt&&(r=a.stateNode=Wh(a.type,a.pendingProps,ma.current,Wt.current,!1),ne=a,Le=!0,Pt=o1(a.type,r,Pt)),kt(e,a,a.pendingProps.children,i),Wi(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&yt&&(_1(a.type,a.pendingProps,Wt.current),(c=r=Pt)&&(r=u1(r,a.type,a.pendingProps,Le),r!==null?(a.stateNode=r,ne=a,Pt=s1(r),Le=!1,c=!0):c=!1),c||na(a)),Fs(a),c=a.type,d=a.pendingProps,v=e!==null?e.memoizedProps:null,r=d.children,ls(c,d)?r=null:v!==null&&ls(c,v)&&(a.flags|=32),a.memoizedState!==null&&(c=ol(e,a,Y0,null,null,i),Ke?Ya._currentValue=c:Ya._currentValue2=c),Wi(e,a),kt(e,a,r,i),a.child;case 6:return e===null&&yt&&(E1(a.pendingProps,Wt.current),(e=i=Pt)&&(i=h1(i,a.pendingProps,Le),i!==null?(a.stateNode=i,ne=a,Pt=null,e=!0):e=!1),e||na(a)),null;case 13:return Du(e,a,i);case 4:return $t(a,a.stateNode.containerInfo),r=a.pendingProps,e===null?a.child=Mn(a,null,r,i):kt(e,a,r,i),a.child;case 11:return bu(e,a,a.type,a.pendingProps,i);case 7:return kt(e,a,a.pendingProps,i),a.child;case 8:return kt(e,a,a.pendingProps.children,i),a.child;case 12:return kt(e,a,a.pendingProps.children,i),a.child;case 10:return r=a.pendingProps,ia(a,a.type,r.value),kt(e,a,r.children,i),a.child;case 9:return c=a.type._context,r=a.pendingProps.children,za(a),c=te(c),r=r(c),a.flags|=1,kt(e,a,r,i),a.child;case 14:return xu(e,a,a.type,a.pendingProps,i);case 15:return Tu(e,a,a.type,a.pendingProps,i);case 19:return zu(e,a,i);case 31:return r=a.pendingProps,i=a.mode,r={mode:r.mode,children:r.children},e===null?(i=Ii(r,i),i.ref=a.ref,a.child=i,i.return=a,a=i):(i=Ve(e.child,r),i.ref=a.ref,a.child=i,i.return=a,a=i),a;case 22:return Mu(e,a,i);case 24:return za(a),r=te(Ht),e===null?(c=tl(),c===null&&(c=Tt,d=Is(),c.pooledCache=d,d.refCount++,d!==null&&(c.pooledCacheLanes|=i),c=d),a.memoizedState={parent:r,cache:c},al(a),ia(a,Ht,c)):((e.lanes&i)!==0&&(nl(e,a),Zn(a,null,null,i),Qn()),c=e.memoizedState,d=a.memoizedState,c.parent!==r?(c={parent:r,cache:r},a.memoizedState=c,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=c),ia(a,Ht,r)):(r=d.cache,ia(a,Ht,r),r!==c.cache&&Ws(a,[Ht],i,!0))),kt(e,a,a.pendingProps.children,i),a.child;case 29:throw a.pendingProps}throw Error(l(156,a.tag))}function oe(e){e.flags|=4}function Bu(e,a){if(e!==null&&e.child===a.child)return!1;if((a.flags&16)!==0)return!0;for(e=a.child;e!==null;){if((e.flags&13878)!==0||(e.subtreeFlags&13878)!==0)return!0;e=e.sibling}return!1}function Dl(e,a,i,r){if(ee)for(i=a.child;i!==null;){if(i.tag===5||i.tag===6)lr(e,i.stateNode);else if(!(i.tag===4||jt&&i.tag===27)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return;i=i.return}i.sibling.return=i.return,i=i.sibling}else if(pa)for(var c=a.child;c!==null;){if(c.tag===5){var d=c.stateNode;i&&r&&(d=qh(d,c.type,c.memoizedProps)),lr(e,d)}else if(c.tag===6)d=c.stateNode,i&&r&&(d=Xh(d,c.memoizedProps)),lr(e,d);else if(c.tag!==4){if(c.tag===22&&c.memoizedState!==null)d=c.child,d!==null&&(d.return=c),Dl(e,c,!0,!0);else if(c.child!==null){c.child.return=c,c=c.child;continue}}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}}function Uu(e,a,i,r){var c=!1;if(pa)for(var d=a.child;d!==null;){if(d.tag===5){var v=d.stateNode;i&&r&&(v=qh(v,d.type,d.memoizedProps)),wh(e,v)}else if(d.tag===6)v=d.stateNode,i&&r&&(v=Xh(v,d.memoizedProps)),wh(e,v);else if(d.tag!==4){if(d.tag===22&&d.memoizedState!==null)c=d.child,c!==null&&(c.return=d),Uu(e,d,!0,!0),c=!0;else if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return c;d=d.return}d.sibling.return=d.return,d=d.sibling}return c}function Lu(e,a){if(pa&&Bu(e,a)){e=a.stateNode;var i=e.containerInfo,r=Lh();Uu(r,a,!1,!1),e.pendingChildren=r,oe(a),$f(i,r)}}function Gl(e,a,i,r){if(ee)e.memoizedProps!==r&&oe(a);else if(pa){var c=e.stateNode,d=e.memoizedProps;if((e=Bu(e,a))||d!==r){var v=Wt.current;d=If(c,i,d,r,!e,null),d===c?a.stateNode=c:(Gh(d,i,r,v)&&oe(a),a.stateNode=d,e?Dl(d,a,!1,!1):oe(a))}else a.stateNode=c}}function zl(e,a,i){if(Mf(a,i)){if(e.flags|=16777216,!Hh(a,i))if(oh())e.flags|=8192;else throw _n=vs,Sr}else e.flags&=-16777217}function wu(e,a){if(T1(a)){if(e.flags|=16777216,!kh(a))if(oh())e.flags|=8192;else throw _n=vs,Sr}else e.flags&=-16777217}function $i(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?V():536870912,e.lanes|=a,Nn|=a)}function In(e,a){if(!yt)switch(e.tailMode){case"hidden":a=e.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Dt(e){var a=e.alternate!==null&&e.alternate.child===e.child,i=0,r=0;if(a)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,r|=c.subtreeFlags&65011712,r|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,r|=c.subtreeFlags,r|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=r,e.childLanes=i,a}function Q0(e,a,i){var r=a.pendingProps;switch(Ot(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(a),null;case 1:return Dt(a),null;case 3:return i=a.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),qe(Ht),tn(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(qn(a)?oe(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,vo())),Lu(e,a),Dt(a),null;case 26:if(Oe){i=a.type;var c=a.memoizedState;return e===null?(oe(a),c!==null?(Dt(a),wu(a,c)):(Dt(a),zl(a,i,r))):c?c!==e.memoizedState?(oe(a),Dt(a),wu(a,c)):(Dt(a),a.flags&=-16777217):(ee?e.memoizedProps!==r&&oe(a):Gl(e,a,i,r),Dt(a),zl(a,i,r)),null}case 27:if(jt){if(zi(a),i=ma.current,c=a.type,e!==null&&a.stateNode!=null)ee?e.memoizedProps!==r&&oe(a):Gl(e,a,c,r);else{if(!r){if(a.stateNode===null)throw Error(l(166));return Dt(a),null}e=Wt.current,qn(a)?po(a,e):(e=Wh(c,r,i,e,!0),a.stateNode=e,oe(a))}return Dt(a),null}case 5:if(zi(a),i=a.type,e!==null&&a.stateNode!=null)Gl(e,a,i,r);else{if(!r){if(a.stateNode===null)throw Error(l(166));return Dt(a),null}e=Wt.current,qn(a)?po(a,e):(c=yf(i,r,ma.current,e,a),Dl(c,a,!1,!1),a.stateNode=c,Gh(c,i,r,e)&&oe(a))}return Dt(a),zl(a,a.type,a.pendingProps),null;case 6:if(e&&a.stateNode!=null)i=e.memoizedProps,ee?i!==r&&oe(a):pa&&(i!==r?(a.stateNode=zh(r,ma.current,Wt.current,a),oe(a)):a.stateNode=e.stateNode);else{if(typeof r!="string"&&a.stateNode===null)throw Error(l(166));if(e=ma.current,i=Wt.current,qn(a)){if(!Se)throw Error(l(176));if(e=a.stateNode,i=a.memoizedProps,r=null,c=ne,c!==null)switch(c.tag){case 27:case 5:r=c.memoizedProps}d1(e,i,a,r)||na(a)}else a.stateNode=zh(r,e,i,a)}return Dt(a),null;case 13:if(r=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=qn(a),r!==null&&r.dehydrated!==null){if(e===null){if(!c)throw Error(l(318));if(!Se)throw Error(l(344));if(c=a.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));g1(c,a)}else Xn(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dt(a),c=!1}else c=vo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return a.flags&256?(je(a),a):(je(a),null)}if(je(a),(a.flags&128)!==0)return a.lanes=i,a;if(i=r!==null,e=e!==null&&e.memoizedState!==null,i){r=a.child,c=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(c=r.alternate.memoizedState.cachePool.pool);var d=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==c&&(r.flags|=2048)}return i!==e&&i&&(a.child.flags|=8192),$i(a,a.updateQueue),Dt(a),null;case 4:return tn(),Lu(e,a),e===null&&Cf(a.stateNode.containerInfo),Dt(a),null;case 10:return qe(a.type),Dt(a),null;case 19:if(b(Vt),c=a.memoizedState,c===null)return Dt(a),null;if(r=(a.flags&128)!==0,d=c.rendering,d===null)if(r)In(c,!1);else{if(Bt!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(d=Fi(e),d!==null){for(a.flags|=128,In(c,!1),e=d.updateQueue,a.updateQueue=e,$i(a,e),a.subtreeFlags=0,e=i,i=a.child;i!==null;)Ch(i,e),i=i.sibling;return _(Vt,Vt.current&1|2),a.child}e=e.sibling}c.tail!==null&&De()>pi&&(a.flags|=128,r=!0,In(c,!1),a.lanes=4194304)}else{if(!r)if(e=Fi(d),e!==null){if(a.flags|=128,r=!0,e=e.updateQueue,a.updateQueue=e,$i(a,e),In(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!yt)return Dt(a),null}else 2*De()-c.renderingStartTime>pi&&i!==536870912&&(a.flags|=128,r=!0,In(c,!1),a.lanes=4194304);c.isBackwards?(d.sibling=a.child,a.child=d):(e=c.last,e!==null?e.sibling=d:a.child=d,c.last=d)}return c.tail!==null?(a=c.tail,c.rendering=a,c.tail=a.sibling,c.renderingStartTime=De(),a.sibling=null,e=Vt.current,_(Vt,r?e&1|2:e&1),a):(Dt(a),null);case 22:case 23:return je(a),ll(),r=a.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(a.flags|=8192):r&&(a.flags|=8192),r?(i&536870912)!==0&&(a.flags&128)===0&&(Dt(a),a.subtreeFlags&6&&(a.flags|=8192)):Dt(a),i=a.updateQueue,i!==null&&$i(a,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==i&&(a.flags|=2048),e!==null&&b(Pa),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),a.memoizedState.cache!==i&&(a.flags|=2048),qe(Ht),Dt(a),null;case 25:return null;case 30:return null}throw Error(l(156,a.tag))}function Z0(e,a){switch(Ot(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return qe(Ht),tn(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return zi(a),null;case 13:if(je(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(l(340));Xn()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return b(Vt),null;case 4:return tn(),null;case 10:return qe(a.type),null;case 22:case 23:return je(a),ll(),e!==null&&b(Pa),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return qe(Ht),null;case 25:return null;default:return null}}function Yu(e,a){switch(Ot(a),a.tag){case 3:qe(Ht),tn();break;case 26:case 27:case 5:zi(a);break;case 4:tn();break;case 13:je(a);break;case 19:b(Vt);break;case 10:qe(a.type);break;case 22:case 23:je(a),ll(),e!==null&&b(Pa);break;case 24:qe(Ht)}}function $n(e,a){try{var i=a.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var c=r.next;i=c;do{if((i.tag&e)===e){r=void 0;var d=i.create,v=i.inst;r=d(),v.destroy=r}i=i.next}while(i!==c)}}catch(C){Et(a,a.return,C)}}function ua(e,a,i){try{var r=a.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var d=c.next;r=d;do{if((r.tag&e)===e){var v=r.inst,C=v.destroy;if(C!==void 0){v.destroy=void 0,c=a;var R=i,B=C;try{B()}catch(w){Et(c,R,w)}}}r=r.next}while(r!==d)}}catch(w){Et(a,a.return,w)}}function qu(e){var a=e.updateQueue;if(a!==null){var i=e.stateNode;try{Go(a,i)}catch(r){Et(e,e.return,r)}}}function Xu(e,a,i){i.props=Ha(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(r){Et(e,a,r)}}function ti(e,a){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var r=ii(e.stateNode);break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof i=="function"?e.refCleanup=i(r):i.current=r}}catch(c){Et(e,a,c)}}function Be(e,a){var i=e.ref,r=e.refCleanup;if(i!==null)if(typeof r=="function")try{r()}catch(c){Et(e,a,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(c){Et(e,a,c)}else i.current=null}function ju(e){var a=e.type,i=e.memoizedProps,r=e.stateNode;try{Xf(r,a,i,e)}catch(c){Et(e,e.return,c)}}function Hl(e,a,i){try{jf(e.stateNode,e.type,i,a,e)}catch(r){Et(e,e.return,r)}}function Pu(e){return e.tag===5||e.tag===3||(Oe?e.tag===26:!1)||(jt?e.tag===27&&cn(e.type):!1)||e.tag===4}function Bl(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Pu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(jt&&e.tag===27&&cn(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ul(e,a,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,a?Vf(i,e,a):Yf(i,e);else if(r!==4&&(jt&&r===27&&cn(e.type)&&(i=e.stateNode,a=null),e=e.child,e!==null))for(Ul(e,a,i),e=e.sibling;e!==null;)Ul(e,a,i),e=e.sibling}function ts(e,a,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,a?Pf(i,e,a):wf(i,e);else if(r!==4&&(jt&&r===27&&cn(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(ts(e,a,i),e=e.sibling;e!==null;)ts(e,a,i),e=e.sibling}function Vu(e,a,i){e=e.containerInfo;try{Yh(e,i)}catch(r){Et(a,a.return,r)}}function Ku(e){var a=e.stateNode,i=e.memoizedProps;try{A1(e.type,i,a,e)}catch(r){Et(e,e.return,r)}}function J0(e,a){for(mf(e.containerInfo),Jt=a;Jt!==null;)if(e=Jt,a=e.child,(e.subtreeFlags&1024)!==0&&a!==null)a.return=e,Jt=a;else for(;Jt!==null;){e=Jt;var i=e.alternate;switch(a=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&i!==null){a=void 0;var r=e,c=i.memoizedProps;i=i.memoizedState;var d=r.stateNode;try{var v=Ha(r.type,c,r.elementType===r.type);a=d.getSnapshotBeforeUpdate(v,i),d.__reactInternalSnapshotBeforeUpdate=a}catch(C){Et(r,r.return,C)}}break;case 3:(a&1024)!==0&&ee&&Wf(e.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(l(163))}if(a=e.sibling,a!==null){a.return=e.return,Jt=a;break}Jt=e.return}}function Qu(e,a,i){var r=i.flags;switch(i.tag){case 0:case 11:case 15:ha(e,i),r&4&&$n(5,i);break;case 1:if(ha(e,i),r&4)if(e=i.stateNode,a===null)try{e.componentDidMount()}catch(v){Et(i,i.return,v)}else{var c=Ha(i.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(c,a,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Et(i,i.return,v)}}r&64&&qu(i),r&512&&ti(i,i.return);break;case 3:if(ha(e,i),r&64&&(e=i.updateQueue,e!==null)){if(a=null,i.child!==null)switch(i.child.tag){case 27:case 5:a=ii(i.child.stateNode);break;case 1:a=i.child.stateNode}try{Go(e,a)}catch(v){Et(i,i.return,v)}}break;case 27:jt&&a===null&&r&4&&Ku(i);case 26:case 5:ha(e,i),a===null&&r&4&&ju(i),r&512&&ti(i,i.return);break;case 12:ha(e,i);break;case 13:ha(e,i),r&4&&Ju(e,i),r&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=ef.bind(null,i),e1(e,i))));break;case 22:if(r=i.memoizedState!==null||ke,!r){a=a!==null&&a.memoizedState!==null||wt,c=ke;var d=wt;ke=r,(wt=a)&&!d?ca(e,i,(i.subtreeFlags&8772)!==0):ha(e,i),ke=c,wt=d}break;case 30:break;default:ha(e,i)}}function Zu(e){var a=e.alternate;a!==null&&(e.alternate=null,Zu(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&Tf(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ne(e,a,i){for(i=i.child;i!==null;)Ll(e,a,i),i=i.sibling}function Ll(e,a,i){if(de&&typeof de.onCommitFiberUnmount=="function")try{de.onCommitFiberUnmount(ri,i)}catch{}switch(i.tag){case 26:if(Oe){wt||Be(i,a),Ne(e,a,i),i.memoizedState?Zh(i.memoizedState):i.stateNode&&Fh(i.stateNode);break}case 27:if(jt){wt||Be(i,a);var r=Xt,c=le;cn(i.type)&&(Xt=i.stateNode,le=!1),Ne(e,a,i),Ih(i.stateNode),Xt=r,le=c;break}case 5:wt||Be(i,a);case 6:if(ee){if(r=Xt,c=le,Xt=null,Ne(e,a,i),Xt=r,le=c,Xt!==null)if(le)try{Qf(Xt,i.stateNode)}catch(d){Et(i,a,d)}else try{Kf(Xt,i.stateNode)}catch(d){Et(i,a,d)}}else Ne(e,a,i);break;case 18:ee&&Xt!==null&&(le?S1(Xt,i.stateNode):y1(Xt,i.stateNode));break;case 4:ee?(r=Xt,c=le,Xt=i.stateNode.containerInfo,le=!0,Ne(e,a,i),Xt=r,le=c):(pa&&Vu(i.stateNode,i,Lh()),Ne(e,a,i));break;case 0:case 11:case 14:case 15:wt||ua(2,i,a),wt||ua(4,i,a),Ne(e,a,i);break;case 1:wt||(Be(i,a),r=i.stateNode,typeof r.componentWillUnmount=="function"&&Xu(i,a,r)),Ne(e,a,i);break;case 21:Ne(e,a,i);break;case 22:wt=(r=wt)||i.memoizedState!==null,Ne(e,a,i),wt=r;break;default:Ne(e,a,i)}}function Ju(e,a){if(Se&&a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{v1(e)}catch(i){Et(a,a.return,i)}}function F0(e){switch(e.tag){case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new uc),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new uc),a;default:throw Error(l(435,e.tag))}}function wl(e,a){var i=F0(e);a.forEach(function(r){var c=af.bind(null,e,r);i.has(r)||(i.add(r),r.then(c,c))})}function ae(e,a){var i=a.deletions;if(i!==null)for(var r=0;r<i.length;r++){var c=i[r],d=e,v=a;if(ee){var C=v;t:for(;C!==null;){switch(C.tag){case 27:if(jt){if(cn(C.type)){Xt=C.stateNode,le=!1;break t}break}case 5:Xt=C.stateNode,le=!1;break t;case 3:case 4:Xt=C.stateNode.containerInfo,le=!0;break t}C=C.return}if(Xt===null)throw Error(l(160));Ll(d,v,c),Xt=null,le=!1}else Ll(d,v,c);d=c.alternate,d!==null&&(d.return=null),c.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Fu(a,e),a=a.sibling}function Fu(e,a){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ae(a,e),se(e),r&4&&(ua(3,e,e.return),$n(3,e),ua(5,e,e.return));break;case 1:ae(a,e),se(e),r&512&&(wt||i===null||Be(i,i.return)),r&64&&ke&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?r:i.concat(r))));break;case 26:if(Oe){var c=Ge;if(ae(a,e),se(e),r&512&&(wt||i===null||Be(i,i.return)),r&4){r=i!==null?i.memoizedState:null;var d=e.memoizedState;i===null?d===null?e.stateNode===null?e.stateNode=C1(c,e.type,e.memoizedProps,e):Jh(c,e.type,e.stateNode):e.stateNode=Qh(c,d,e.memoizedProps):r!==d?(r===null?i.stateNode!==null&&Fh(i.stateNode):Zh(r),d===null?Jh(c,e.type,e.stateNode):Qh(c,d,e.memoizedProps)):d===null&&e.stateNode!==null&&Hl(e,e.memoizedProps,i.memoizedProps)}break}case 27:if(jt){ae(a,e),se(e),r&512&&(wt||i===null||Be(i,i.return)),i!==null&&r&4&&Hl(e,e.memoizedProps,i.memoizedProps);break}case 5:if(ae(a,e),se(e),r&512&&(wt||i===null||Be(i,i.return)),ee){if(e.flags&32){c=e.stateNode;try{Uh(c)}catch(w){Et(e,e.return,w)}}r&4&&e.stateNode!=null&&(c=e.memoizedProps,Hl(e,c,i!==null?i.memoizedProps:c)),r&1024&&(xr=!0)}break;case 6:if(ae(a,e),se(e),r&4&&ee){if(e.stateNode===null)throw Error(l(162));r=e.memoizedProps,i=i!==null?i.memoizedProps:r,c=e.stateNode;try{qf(c,i,r)}catch(w){Et(e,e.return,w)}}break;case 3:if(Oe?(x1(),c=Ge,Ge=ur(a.containerInfo),ae(a,e),Ge=c):ae(a,e),se(e),r&4){if(ee&&Se&&i!==null&&i.memoizedState.isDehydrated)try{m1(a.containerInfo)}catch(w){Et(e,e.return,w)}if(pa){r=a.containerInfo,i=a.pendingChildren;try{Yh(r,i)}catch(w){Et(e,e.return,w)}}}xr&&(xr=!1,ku(e));break;case 4:Oe?(i=Ge,Ge=ur(e.stateNode.containerInfo),ae(a,e),se(e),Ge=i):(ae(a,e),se(e)),r&4&&pa&&Vu(e.stateNode,e,e.stateNode.pendingChildren);break;case 12:ae(a,e),se(e);break;case 13:ae(a,e),se(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Rr=De()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,wl(e,r)));break;case 22:c=e.memoizedState!==null;var v=i!==null&&i.memoizedState!==null,C=ke,R=wt;if(ke=C||c,wt=R||v,ae(a,e),wt=R,ke=C,se(e),r&8192&&(a=e.stateNode,a._visibility=c?a._visibility&-2:a._visibility|1,c&&(i===null||v||ke||wt||Ba(e)),ee)){t:if(i=null,ee)for(a=e;;){if(a.tag===5||Oe&&a.tag===26){if(i===null){v=i=a;try{d=v.stateNode,c?Zf(d):Ff(v.stateNode,v.memoizedProps)}catch(w){Et(v,v.return,w)}}}else if(a.tag===6){if(i===null){v=a;try{var B=v.stateNode;c?Jf(B):kf(B,v.memoizedProps)}catch(w){Et(v,v.return,w)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break t;for(;a.sibling===null;){if(a.return===null||a.return===e)break t;i===a&&(i=null),a=a.return}i===a&&(i=null),a.sibling.return=a.return,a=a.sibling}}r&4&&(r=e.updateQueue,r!==null&&(i=r.retryQueue,i!==null&&(r.retryQueue=null,wl(e,i))));break;case 19:ae(a,e),se(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,wl(e,r)));break;case 30:break;case 21:break;default:ae(a,e),se(e)}}function se(e){var a=e.flags;if(a&2){try{if(ee){for(var i,r=e.return;r!==null;){if(Pu(r)){i=r;break}r=r.return}if(i==null)throw Error(l(160));switch(i.tag){case 27:if(jt){var c=i.stateNode,d=Bl(e);ts(e,d,c);break}case 5:var v=i.stateNode;i.flags&32&&(Uh(v),i.flags&=-33);var C=Bl(e);ts(e,C,v);break;case 3:case 4:var R=i.stateNode.containerInfo,B=Bl(e);Ul(e,B,R);break;default:throw Error(l(161))}}}catch(w){Et(e,e.return,w)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function ku(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;ku(a),a.tag===5&&a.flags&1024&&Nf(a.stateNode),e=e.sibling}}function ha(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Qu(e,a.alternate,a),a=a.sibling}function Ba(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:ua(4,a,a.return),Ba(a);break;case 1:Be(a,a.return);var i=a.stateNode;typeof i.componentWillUnmount=="function"&&Xu(a,a.return,i),Ba(a);break;case 27:jt&&Ih(a.stateNode);case 26:case 5:Be(a,a.return),Ba(a);break;case 22:a.memoizedState===null&&Ba(a);break;case 30:Ba(a);break;default:Ba(a)}e=e.sibling}}function ca(e,a,i){for(i=i&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var r=a.alternate,c=e,d=a,v=d.flags;switch(d.tag){case 0:case 11:case 15:ca(c,d,i),$n(4,d);break;case 1:if(ca(c,d,i),r=d,c=r.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(B){Et(r,r.return,B)}if(r=d,c=r.updateQueue,c!==null){var C=r.stateNode;try{var R=c.shared.hiddenCallbacks;if(R!==null)for(c.shared.hiddenCallbacks=null,c=0;c<R.length;c++)Do(R[c],C)}catch(B){Et(r,r.return,B)}}i&&v&64&&qu(d),ti(d,d.return);break;case 27:jt&&Ku(d);case 26:case 5:ca(c,d,i),i&&r===null&&v&4&&ju(d),ti(d,d.return);break;case 12:ca(c,d,i);break;case 13:ca(c,d,i),i&&v&4&&Ju(c,d);break;case 22:d.memoizedState===null&&ca(c,d,i),ti(d,d.return);break;case 30:break;default:ca(c,d,i)}a=a.sibling}}function Yl(e,a){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Vn(i))}function ql(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Vn(e))}function Ue(e,a,i,r){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Wu(e,a,i,r),a=a.sibling}function Wu(e,a,i,r){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Ue(e,a,i,r),c&2048&&$n(9,a);break;case 1:Ue(e,a,i,r);break;case 3:Ue(e,a,i,r),c&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Vn(e)));break;case 12:if(c&2048){Ue(e,a,i,r),e=a.stateNode;try{var d=a.memoizedProps,v=d.id,C=d.onPostCommit;typeof C=="function"&&C(v,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){Et(a,a.return,R)}}else Ue(e,a,i,r);break;case 13:Ue(e,a,i,r);break;case 23:break;case 22:d=a.stateNode,v=a.alternate,a.memoizedState!==null?d._visibility&2?Ue(e,a,i,r):ei(e,a):d._visibility&2?Ue(e,a,i,r):(d._visibility|=2,sn(e,a,i,r,(a.subtreeFlags&10256)!==0)),c&2048&&Yl(v,a);break;case 24:Ue(e,a,i,r),c&2048&&ql(a.alternate,a);break;default:Ue(e,a,i,r)}}function sn(e,a,i,r,c){for(c=c&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var d=e,v=a,C=i,R=r,B=v.flags;switch(v.tag){case 0:case 11:case 15:sn(d,v,C,R,c),$n(8,v);break;case 23:break;case 22:var w=v.stateNode;v.memoizedState!==null?w._visibility&2?sn(d,v,C,R,c):ei(d,v):(w._visibility|=2,sn(d,v,C,R,c)),c&&B&2048&&Yl(v.alternate,v);break;case 24:sn(d,v,C,R,c),c&&B&2048&&ql(v.alternate,v);break;default:sn(d,v,C,R,c)}a=a.sibling}}function ei(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var i=e,r=a,c=r.flags;switch(r.tag){case 22:ei(i,r),c&2048&&Yl(r.alternate,r);break;case 24:ei(i,r),c&2048&&ql(r.alternate,r);break;default:ei(i,r)}a=a.sibling}}function Ua(e){if(e.subtreeFlags&An)for(e=e.child;e!==null;)Iu(e),e=e.sibling}function Iu(e){switch(e.tag){case 26:Ua(e),e.flags&An&&(e.memoizedState!==null?M1(Ge,e.memoizedState,e.memoizedProps):Bh(e.type,e.memoizedProps));break;case 5:Ua(e),e.flags&An&&Bh(e.type,e.memoizedProps);break;case 3:case 4:if(Oe){var a=Ge;Ge=ur(e.stateNode.containerInfo),Ua(e),Ge=a}else Ua(e);break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=An,An=16777216,Ua(e),An=a):Ua(e));break;default:Ua(e)}}function $u(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function ai(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var r=a[i];Jt=r,eh(r,e)}$u(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)th(e),e=e.sibling}function th(e){switch(e.tag){case 0:case 11:case 15:ai(e),e.flags&2048&&ua(9,e,e.return);break;case 3:ai(e);break;case 12:ai(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,es(e)):ai(e);break;default:ai(e)}}function es(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var r=a[i];Jt=r,eh(r,e)}$u(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:ua(8,a,a.return),es(a);break;case 22:i=a.stateNode,i._visibility&2&&(i._visibility&=-3,es(a));break;default:es(a)}e=e.sibling}}function eh(e,a){for(;Jt!==null;){var i=Jt;switch(i.tag){case 0:case 11:case 15:ua(8,i,a);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var r=i.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Vn(i.memoizedState.cache)}if(r=i.child,r!==null)r.return=i,Jt=r;else t:for(i=e;Jt!==null;){r=Jt;var c=r.sibling,d=r.return;if(Zu(r),r===i){Jt=null;break t}if(c!==null){c.return=d,Jt=c;break t}Jt=d}}}function Xl(e){var a=Ef(e);if(a!=null){if(typeof a.memoizedProps["data-testname"]!="string")throw Error(l(364));return a}if(e=Gf(e),e===null)throw Error(l(362));return e.stateNode.current}function jl(e,a){var i=e.tag;switch(a.$$typeof){case Cs:if(e.type===a.value)return!0;break;case bs:t:{for(a=a.value,e=[e,0],i=0;i<e.length;){var r=e[i++],c=r.tag,d=e[i++],v=a[d];if(c!==5&&c!==26&&c!==27||!li(r)){for(;v!=null&&jl(r,v);)d++,v=a[d];if(d===a.length){a=!0;break t}else for(r=r.child;r!==null;)e.push(r,d),r=r.sibling}}a=!1}return a;case xs:if((i===5||i===26||i===27)&&Bf(e.stateNode,a.value))return!0;break;case Ms:if((i===5||i===6||i===26||i===27)&&(e=Hf(e),e!==null&&0<=e.indexOf(a.value)))return!0;break;case Ts:if((i===5||i===26||i===27)&&(e=e.memoizedProps["data-testname"],typeof e=="string"&&e.toLowerCase()===a.value.toLowerCase()))return!0;break;default:throw Error(l(365))}return!1}function Pl(e){switch(e.$$typeof){case Cs:return"<"+(S(e.value)||"Unknown")+">";case bs:return":has("+(Pl(e)||"")+")";case xs:return'[role="'+e.value+'"]';case Ms:return'"'+e.value+'"';case Ts:return'[data-testname="'+e.value+'"]';default:throw Error(l(365))}}function ah(e,a){var i=[];e=[e,0];for(var r=0;r<e.length;){var c=e[r++],d=c.tag,v=e[r++],C=a[v];if(d!==5&&d!==26&&d!==27||!li(c)){for(;C!=null&&jl(c,C);)v++,C=a[v];if(v===a.length)i.push(c);else for(c=c.child;c!==null;)e.push(c,v),c=c.sibling}}return i}function Vl(e,a){if(!si)throw Error(l(363));e=Xl(e),e=ah(e,a),a=[],e=Array.from(e);for(var i=0;i<e.length;){var r=e[i++],c=r.tag;if(c===5||c===26||c===27)li(r)||a.push(r.stateNode);else for(r=r.child;r!==null;)e.push(r),r=r.sibling}return a}function ue(){if((ct&2)!==0&&gt!==0)return gt&-gt;if(et.T!==null){var e=yn;return e!==0?e:$s()}return bf()}function nh(){xe===0&&(xe=(gt&536870912)===0||yt?H():536870912);var e=be.current;return e!==null&&(e.flags|=32),xe}function he(e,a,i){(e===Tt&&(Ct===2||Ct===9)||e.cancelPendingCommit!==null)&&(ln(e,0),fa(e,gt,xe,!1)),K(e,i),((ct&2)===0||e!==Tt)&&(e===Tt&&((ct&2)===0&&(Ka|=i),Bt===4&&fa(e,gt,xe,!1)),He(e))}function ih(e,a,i){if((ct&6)!==0)throw Error(l(327));var r=!i&&(a&124)===0&&(a&e.expiredLanes)===0||A(e,a),c=r?I0(e,a):Zl(e,a,!0),d=r;do{if(c===0){Rn&&!r&&fa(e,a,0,!1);break}else{if(i=e.current.alternate,d&&!k0(i)){c=Zl(e,a,!1),d=!1;continue}if(c===2){if(d=a,e.errorRecoveryDisabledLanes&d)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){a=v;t:{var C=e;c=gi;var R=Se&&C.current.memoizedState.isDehydrated;if(R&&(ln(C,v).flags|=256),v=Zl(C,v,!1),v!==2){if(Tr&&!R){C.errorRecoveryDisabledLanes|=d,Ka|=d,c=4;break t}d=re,re=c,d!==null&&(re===null?re=d:re.push.apply(re,d))}c=v}if(d=!1,c!==2)continue}}if(c===1){ln(e,0),fa(e,a,0,!0);break}t:{switch(r=e,d=c,d){case 0:case 1:throw Error(l(345));case 4:if((a&4194048)!==a)break;case 6:fa(r,a,xe,!Sa);break t;case 2:re=null;break;case 3:case 5:break;default:throw Error(l(329))}if((a&62914560)===a&&(c=Rr+300-De(),10<c)){if(fa(r,a,xe,!Sa),O(r,0,!0)!==0)break t;r.timeoutHandle=Sf(sh.bind(null,r,i,re,As,Ar,a,xe,Ka,Nn,Sa,d,2,-0,0),c);break t}sh(r,i,re,As,Ar,a,xe,Ka,Nn,Sa,d,0,-0,0)}}break}while(!0);He(e)}function sh(e,a,i,r,c,d,v,C,R,B,w,P,Q,lt){if(e.timeoutHandle=wa,P=a.subtreeFlags,(P&8192||(P&16785408)===16785408)&&(Af(),Iu(a),P=Rf(),P!==null)){e.cancelPendingCommit=P(gh.bind(null,e,a,d,i,r,c,v,C,R,w,1,Q,lt)),fa(e,d,v,!B);return}gh(e,a,d,i,r,c,v,C,R)}function k0(e){for(var a=e;;){var i=a.tag;if((i===0||i===11||i===15)&&a.flags&16384&&(i=a.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var r=0;r<i.length;r++){var c=i[r],d=c.getSnapshot;c=c.value;try{if(!ge(d(),c))return!1}catch{return!1}}if(i=a.child,a.subtreeFlags&16384&&i!==null)i.return=a,a=i;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function fa(e,a,i,r){a&=~Mr,a&=~Ka,e.suspendedLanes|=a,e.pingedLanes&=~a,r&&(e.warmLanes|=a),r=e.expirationTimes;for(var c=a;0<c;){var d=31-fe(c),v=1<<d;r[d]=-1,c&=~v}i!==0&&tt(e,i,a)}function lh(){return(ct&6)===0?(en(0),!1):!0}function Kl(){if(ht!==null){if(Ct===0)var e=ht.return;else e=ht,Fe=ja=null,cl(e),Tn=null,fi=0,e=ht;for(;e!==null;)Yu(e.alternate,e),e=e.return;ht=null}}function ln(e,a){var i=e.timeoutHandle;i!==wa&&(e.timeoutHandle=wa,_f(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Kl(),Tt=e,ht=i=Ve(e.current,null),gt=a,Ct=0,pe=null,Sa=!1,Rn=A(e,a),Tr=!1,Nn=xe=Mr=Ka=_a=Bt=0,re=gi=null,Ar=!1,(a&8)!==0&&(a|=a&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=a;0<r;){var c=31-fe(r),d=1<<c;a|=e[c],r&=~d}return We=a,Yi(),i}function rh(e,a){rt=null,et.H=Es,a===hi||a===ms?(a=Ro(),Ct=3):a===Sr?(a=Ro(),Ct=4):Ct=a===oc?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,pe=a,ht===null&&(Bt=1,ki(e,k(a,e.current)))}function oh(){var e=be.current;return e===null?!0:(gt&4194048)===gt?we===null:(gt&62914560)===gt||(gt&536870912)!==0?e===we:!1}function uh(){var e=et.H;return et.H=Es,e===null?Es:e}function hh(){var e=et.A;return et.A=j1,e}function Ql(){Bt=4,Sa||(gt&4194048)!==gt&&be.current!==null||(Rn=!0),(_a&134217727)===0&&(Ka&134217727)===0||Tt===null||fa(Tt,gt,xe,!1)}function Zl(e,a,i){var r=ct;ct|=2;var c=uh(),d=hh();(Tt!==e||gt!==a)&&(As=null,ln(e,a)),a=!1;var v=Bt;t:do try{if(Ct!==0&&ht!==null){var C=ht,R=pe;switch(Ct){case 8:Kl(),v=6;break t;case 3:case 2:case 9:case 6:be.current===null&&(a=!0);var B=Ct;if(Ct=0,pe=null,rn(e,C,R,B),i&&Rn){v=0;break t}break;default:B=Ct,Ct=0,pe=null,rn(e,C,R,B)}}W0(),v=Bt;break}catch(w){rh(e,w)}while(!0);return a&&e.shellSuspendCounter++,Fe=ja=null,ct=r,et.H=c,et.A=d,ht===null&&(Tt=null,gt=0,Yi()),v}function W0(){for(;ht!==null;)ch(ht)}function I0(e,a){var i=ct;ct|=2;var r=uh(),c=hh();Tt!==e||gt!==a?(As=null,pi=De()+500,ln(e,a)):Rn=A(e,a);t:do try{if(Ct!==0&&ht!==null){a=ht;var d=pe;e:switch(Ct){case 1:Ct=0,pe=null,rn(e,a,d,1);break;case 2:case 9:if(Mo(d)){Ct=0,pe=null,fh(a);break}a=function(){Ct!==2&&Ct!==9||Tt!==e||(Ct=7),He(e)},d.then(a,a);break t;case 3:Ct=7;break t;case 4:Ct=5;break t;case 7:Mo(d)?(Ct=0,pe=null,fh(a)):(Ct=0,pe=null,rn(e,a,d,7));break;case 5:var v=null;switch(ht.tag){case 26:v=ht.memoizedState;case 5:case 27:var C=ht,R=C.type,B=C.pendingProps;if(v?kh(v):Hh(R,B)){Ct=0,pe=null;var w=C.sibling;if(w!==null)ht=w;else{var P=C.return;P!==null?(ht=P,as(P)):ht=null}break e}}Ct=0,pe=null,rn(e,a,d,5);break;case 6:Ct=0,pe=null,rn(e,a,d,6);break;case 8:Kl(),Bt=6;break t;default:throw Error(l(462))}}$0();break}catch(Q){rh(e,Q)}while(!0);return Fe=ja=null,et.H=r,et.A=c,ct=i,ht!==null?0:(Tt=null,gt=0,Yi(),Bt)}function $0(){for(;ht!==null&&!O1();)ch(ht)}function ch(e){var a=Hu(e.alternate,e,We);e.memoizedProps=e.pendingProps,a===null?as(e):ht=a}function fh(e){var a=e,i=a.alternate;switch(a.tag){case 15:case 0:a=Ru(i,a,a.pendingProps,a.type,void 0,gt);break;case 11:a=Ru(i,a,a.pendingProps,a.type.render,a.ref,gt);break;case 5:cl(a);default:Yu(i,a),a=ht=Ch(a,We),a=Hu(i,a,We)}e.memoizedProps=e.pendingProps,a===null?as(e):ht=a}function rn(e,a,i,r){Fe=ja=null,cl(a),Tn=null,fi=0;var c=a.return;try{if(V0(e,c,a,i,gt)){Bt=1,ki(e,k(i,e.current)),ht=null;return}}catch(d){if(c!==null)throw ht=c,d;Bt=1,ki(e,k(i,e.current)),ht=null;return}a.flags&32768?(yt||r===1?e=!0:Rn||(gt&536870912)!==0?e=!1:(Sa=e=!0,(r===2||r===9||r===3||r===6)&&(r=be.current,r!==null&&r.tag===13&&(r.flags|=16384))),dh(a,e)):as(a)}function as(e){var a=e;do{if((a.flags&32768)!==0){dh(a,Sa);return}e=a.return;var i=Q0(a.alternate,a,We);if(i!==null){ht=i;return}if(a=a.sibling,a!==null){ht=a;return}ht=a=e}while(a!==null);Bt===0&&(Bt=5)}function dh(e,a){do{var i=Z0(e.alternate,e);if(i!==null){i.flags&=32767,ht=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!a&&(e=e.sibling,e!==null)){ht=e;return}ht=e=i}while(e!==null);Bt=6,ht=null}function gh(e,a,i,r,c,d,v,C,R){e.cancelPendingCommit=null;do ni();while(It!==0);if((ct&6)!==0)throw Error(l(327));if(a!==null){if(a===e.current)throw Error(l(177));if(d=a.lanes|a.childLanes,d|=_r,Z(e,i,d,v,C,R),e===Tt&&(ht=Tt=null,gt=0),On=a,Ca=e,Dn=i,Nr=d,Or=c,hc=r,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,nf(fr,function(){return Sh(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||r){r=et.T,et.T=null,c=Qe(),Qt(2),v=ct,ct|=4;try{J0(e,a,i)}finally{ct=v,Qt(c),et.T=r}}It=1,ph(),mh(),vh()}}function ph(){if(It===1){It=0;var e=Ca,a=On,i=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||i){i=et.T,et.T=null;var r=Qe();Qt(2);var c=ct;ct|=4;try{Fu(a,e),vf(e.containerInfo)}finally{ct=c,Qt(r),et.T=i}}e.current=a,It=2}}function mh(){if(It===2){It=0;var e=Ca,a=On,i=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||i){i=et.T,et.T=null;var r=Qe();Qt(2);var c=ct;ct|=4;try{Qu(e,a.alternate,a)}finally{ct=c,Qt(r),et.T=i}}It=3}}function vh(){if(It===4||It===3){It=0,D1();var e=Ca,a=On,i=Dn,r=hc;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?It=5:(It=0,On=Ca=null,yh(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Ea=null),I(i),a=a.stateNode,de&&typeof de.onCommitFiberRoot=="function")try{de.onCommitFiberRoot(ri,a,void 0,(a.current.flags&128)===128)}catch{}if(r!==null){a=et.T,c=Qe(),Qt(2),et.T=null;try{for(var d=e.onRecoverableError,v=0;v<r.length;v++){var C=r[v];d(C.value,{componentStack:C.stack})}}finally{et.T=a,Qt(c)}}(Dn&3)!==0&&ni(),He(e),c=e.pendingLanes,(i&4194090)!==0&&(c&42)!==0?e===Dr?mi++:(mi=0,Dr=e):mi=0,en(0)}}function yh(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,Vn(a)))}function ni(e){return ph(),mh(),vh(),Sh()}function Sh(){if(It!==5)return!1;var e=Ca,a=Nr;Nr=0;var i=I(Dn),r=32>i?32:i;i=et.T;var c=Qe();try{Qt(r),et.T=null,r=Or,Or=null;var d=Ca,v=Dn;if(It=0,On=Ca=null,Dn=0,(ct&6)!==0)throw Error(l(331));var C=ct;if(ct|=4,th(d.current),Wu(d,d.current,v,r),ct=C,en(0,!1),de&&typeof de.onPostCommitFiberRoot=="function")try{de.onPostCommitFiberRoot(ri,d)}catch{}return!0}finally{Qt(c),et.T=i,yh(e,a)}}function _h(e,a,i){a=k(i,a),a=bl(e.stateNode,a,2),e=la(e,a,2),e!==null&&(K(e,2),He(e))}function Et(e,a,i){if(e.tag===3)_h(e,e,i);else for(;a!==null;){if(a.tag===3){_h(a,e,i);break}else if(a.tag===1){var r=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ea===null||!Ea.has(r))){e=k(i,e),i=Eu(2),r=la(a,i,2),r!==null&&(Cu(i,r,a,e),K(r,2),He(r));break}}a=a.return}}function Jl(e,a,i){var r=e.pingCache;if(r===null){r=e.pingCache=new P1;var c=new Set;r.set(a,c)}else c=r.get(a),c===void 0&&(c=new Set,r.set(a,c));c.has(i)||(Tr=!0,c.add(i),e=tf.bind(null,e,a,i),a.then(e,e))}function tf(e,a,i){var r=e.pingCache;r!==null&&r.delete(a),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Tt===e&&(gt&i)===i&&(Bt===4||Bt===3&&(gt&62914560)===gt&&300>De()-Rr?(ct&2)===0&&ln(e,0):Mr|=i,Nn===gt&&(Nn=0)),He(e)}function Eh(e,a){a===0&&(a=V()),e=an(e,a),e!==null&&(K(e,a),He(e))}function ef(e){var a=e.memoizedState,i=0;a!==null&&(i=a.retryLane),Eh(e,i)}function af(e,a){var i=0;switch(e.tag){case 13:var r=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(l(314))}r!==null&&r.delete(a),Eh(e,i)}function nf(e,a){return us(e,a)}function sf(e,a,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ve(e,a){var i=e.alternate;return i===null?(i=n(e.tag,a,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=a,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,a=e.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Ch(e,a){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,a=i.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function ns(e,a,i,r,c,d){var v=0;if(r=e,typeof e=="function")Fl(e)&&(v=1);else if(typeof e=="string")v=Oe&&jt?Vh(e,i,Wt.current)?26:$h(e)?27:5:Oe?Vh(e,i,Wt.current)?26:5:jt&&$h(e)?27:5;else t:switch(e){case sr:return e=n(31,i,a,c),e.elementType=sr,e.lanes=d,e;case un:return La(i.children,c,d,a);case Rh:v=8,c|=24;break;case tr:return e=n(12,i,a,c|2),e.elementType=tr,e.lanes=d,e;case ar:return e=n(13,i,a,c),e.elementType=ar,e.lanes=d,e;case nr:return e=n(19,i,a,c),e.elementType=nr,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case uf:case da:v=10;break t;case Nh:v=9;break t;case er:v=11;break t;case ir:v=14;break t;case ga:v=16,r=null;break t}v=29,i=Error(l(130,e===null?"null":typeof e,"")),r=null}return a=n(v,i,a,c),a.elementType=e,a.type=r,a.lanes=d,a}function La(e,a,i,r){return e=n(7,e,r,a),e.lanes=i,e}function kl(e,a,i){return e=n(6,e,null,a),e.lanes=i,e}function Wl(e,a,i){return a=n(4,e.children!==null?e.children:[],e.key,a),a.lanes=i,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}function lf(e,a,i,r,c,d,v,C){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=wa,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=j(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=j(0),this.hiddenUpdates=j(null),this.identifierPrefix=r,this.onUncaughtError=c,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function bh(e,a,i,r,c,d,v,C,R,B,w,P){return e=new lf(e,a,i,v,C,R,B,P),a=1,d===!0&&(a|=24),d=n(3,null,null,a),e.current=d,d.stateNode=e,a=Is(),a.refCount++,e.pooledCache=a,a.refCount++,d.memoizedState={element:r,isDehydrated:i,cache:a},al(d),e}function xh(e){return e?(e=dn,e):dn}function Th(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=f(a),e=e!==null?g(e):null,e===null?null:ii(e.stateNode)}function Mh(e,a,i,r,c,d){c=xh(c),r.context===null?r.context=c:r.pendingContext=c,r=sa(a),r.payload={element:i},d=d===void 0?null:d,d!==null&&(r.callback=d),i=la(e,r,a),i!==null&&(he(i,e,a),Kn(i,e,a))}function Ah(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<a?i:a}}function Il(e,a){Ah(e,a),(e=e.alternate)&&Ah(e,a)}var ut={},rf=K1(),ce=Wc(),$l=Object.assign,of=Symbol.for("react.element"),is=Symbol.for("react.transitional.element"),on=Symbol.for("react.portal"),un=Symbol.for("react.fragment"),Rh=Symbol.for("react.strict_mode"),tr=Symbol.for("react.profiler"),uf=Symbol.for("react.provider"),Nh=Symbol.for("react.consumer"),da=Symbol.for("react.context"),er=Symbol.for("react.forward_ref"),ar=Symbol.for("react.suspense"),nr=Symbol.for("react.suspense_list"),ir=Symbol.for("react.memo"),ga=Symbol.for("react.lazy"),sr=Symbol.for("react.activity"),hf=Symbol.for("react.memo_cache_sentinel"),Oh=Symbol.iterator,cf=Symbol.for("react.client.reference"),ss=Array.isArray,et=rf.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ff=t.rendererVersion,df=t.rendererPackageName,Dh=t.extraDevToolsConfig,ii=t.getPublicInstance,gf=t.getRootHostContext,pf=t.getChildHostContext,mf=t.prepareForCommit,vf=t.resetAfterCommit,yf=t.createInstance;t.cloneMutableInstance;var lr=t.appendInitialChild,Gh=t.finalizeInitialChildren,ls=t.shouldSetTextContent,zh=t.createTextInstance;t.cloneMutableTextInstance;var Sf=t.scheduleTimeout,_f=t.cancelTimeout,wa=t.noTimeout,Ke=t.isPrimaryRenderer;t.warnsIfNotActing;var ee=t.supportsMutation,pa=t.supportsPersistence,Se=t.supportsHydration,Ef=t.getInstanceFromNode;t.beforeActiveInstanceBlur;var Cf=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var Qt=t.setCurrentUpdatePriority,Qe=t.getCurrentUpdatePriority,bf=t.resolveUpdatePriority;t.trackSchedulerEvent,t.resolveEventType,t.resolveEventTimeStamp;var xf=t.shouldAttemptEagerTransition,Tf=t.detachDeletedInstance;t.requestPostPaintCallback;var Mf=t.maySuspendCommit,Hh=t.preloadInstance,Af=t.startSuspendingCommit,Bh=t.suspendInstance;t.suspendOnActiveViewTransition;var Rf=t.waitForCommitToBeReady,hn=t.NotPendingTransition,Ya=t.HostTransitionContext,Nf=t.resetFormInstance;t.bindToConsole;var Of=t.supportsMicrotasks,Df=t.scheduleMicrotask,si=t.supportsTestSelectors,Gf=t.findFiberRoot,zf=t.getBoundingRect,Hf=t.getTextContent,li=t.isHiddenSubtree,Bf=t.matchAccessibilityRole,Uf=t.setFocusIfFocusable,Lf=t.setupIntersectionObserver,wf=t.appendChild,Yf=t.appendChildToContainer,qf=t.commitTextUpdate,Xf=t.commitMount,jf=t.commitUpdate,Pf=t.insertBefore,Vf=t.insertInContainerBefore,Kf=t.removeChild,Qf=t.removeChildFromContainer,Uh=t.resetTextContent,Zf=t.hideInstance,Jf=t.hideTextInstance,Ff=t.unhideInstance,kf=t.unhideTextInstance;t.cancelViewTransitionName,t.cancelRootViewTransitionName,t.restoreRootViewTransitionName,t.cloneRootViewTransitionContainer,t.removeRootViewTransitionClone,t.measureClonedInstance,t.hasInstanceChanged,t.hasInstanceAffectedParent,t.startViewTransition,t.startGestureTransition,t.stopGestureTransition,t.getCurrentGestureOffset,t.subscribeToGestureDirection,t.createViewTransitionInstance;var Wf=t.clearContainer;t.createFragmentInstance,t.updateFragmentInstanceFiber,t.commitNewChildToFragmentInstance,t.deleteChildFromFragmentInstance;var If=t.cloneInstance,Lh=t.createContainerChildSet,wh=t.appendChildToContainerChildSet,$f=t.finalizeContainerChildren,Yh=t.replaceContainerChildren,qh=t.cloneHiddenInstance,Xh=t.cloneHiddenTextInstance,rr=t.isSuspenseInstancePending,or=t.isSuspenseInstanceFallback,t1=t.getSuspenseInstanceFallbackErrorDetails,e1=t.registerSuspenseInstanceRetry,a1=t.canHydrateFormStateMarker,n1=t.isFormStateMarkerMatching,jh=t.getNextHydratableSibling,i1=t.getNextHydratableSiblingAfterSingleton,s1=t.getFirstHydratableChild,l1=t.getFirstHydratableChildWithinContainer,r1=t.getFirstHydratableChildWithinSuspenseInstance,o1=t.getFirstHydratableChildWithinSingleton,u1=t.canHydrateInstance,h1=t.canHydrateTextInstance,c1=t.canHydrateSuspenseInstance,f1=t.hydrateInstance,d1=t.hydrateTextInstance,g1=t.hydrateSuspenseInstance,p1=t.getNextHydratableInstanceAfterSuspenseInstance,m1=t.commitHydratedContainer,v1=t.commitHydratedSuspenseInstance,y1=t.clearSuspenseBoundary,S1=t.clearSuspenseBoundaryFromContainer,Ph=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var _1=t.validateHydratableInstance,E1=t.validateHydratableTextInstance,Oe=t.supportsResources,Vh=t.isHostHoistableType,ur=t.getHoistableRoot,Kh=t.getResource,Qh=t.acquireResource,Zh=t.releaseResource,C1=t.hydrateHoistable,Jh=t.mountHoistable,Fh=t.unmountHoistable,b1=t.createHoistableInstance,x1=t.prepareToCommitHoistables,T1=t.mayResourceSuspendCommit,kh=t.preloadResource,M1=t.suspendResource,jt=t.supportsSingletons,Wh=t.resolveSingletonInstance,A1=t.acquireSingletonInstance,Ih=t.releaseSingletonInstance,$h=t.isHostSingletonType,cn=t.isSingletonScope,hr=[],fn=-1,dn={},fe=Math.clz32?Math.clz32:G,R1=Math.log,N1=Math.LN2,rs=256,os=4194304,us=ce.unstable_scheduleCallback,cr=ce.unstable_cancelCallback,O1=ce.unstable_shouldYield,D1=ce.unstable_requestPaint,De=ce.unstable_now,tc=ce.unstable_ImmediatePriority,G1=ce.unstable_UserBlockingPriority,fr=ce.unstable_NormalPriority,z1=ce.unstable_IdlePriority,H1=ce.log,B1=ce.unstable_setDisableYieldValue,ri=null,de=null,dr,ec,gr=!1,ac=new WeakMap,gn=[],pn=0,hs=null,cs=0,_e=[],Ee=0,qa=null,Ze=1,Je="",Wt=y(null),oi=y(null),ma=y(null),fs=y(null),ne=null,Pt=null,yt=!1,Xa=null,Le=!1,pr=Error(l(519)),ge=typeof Object.is=="function"?Object.is:B0,ds=y(null),ja=null,Fe=null,U1=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(i,r){e.push(r)}};this.abort=function(){a.aborted=!0,e.forEach(function(i){return i()})}},L1=ce.unstable_scheduleCallback,w1=ce.unstable_NormalPriority,Ht={$$typeof:da,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},gs=null,mn=null,mr=!1,ps=!1,vr=!1,vn=0,ui=null,yr=0,yn=0,Sn=null,nc=et.S;et.S=function(e,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&L0(e,a),nc!==null&&nc(e,a)};var Pa=y(null),Y1=Object.prototype.hasOwnProperty,hi=Error(l(460)),Sr=Error(l(474)),ms=Error(l(542)),vs={then:function(){}},_n=null,Ce=[],En=0,_r=0,va=!1,Er=!1,Cn=y(null),ys=y(0),ya=0,rt=null,bt=null,qt=null,Ss=!1,bn=!1,Va=!1,_s=0,ci=0,xn=null,q1=0,Es={readContext:te,use:ji,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useLayoutEffect:Lt,useInsertionEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useSyncExternalStore:Lt,useId:Lt,useHostTransitionStatus:Lt,useFormState:Lt,useActionState:Lt,useOptimistic:Lt,useMemoCache:Lt,useCacheRefresh:Lt},ic={readContext:te,use:ji,useCallback:function(e,a){return ie().memoizedState=[e,a===void 0?null:a],e},useContext:te,useEffect:$o,useImperativeHandle:function(e,a,i){i=i!=null?i.concat([e]):null,Ki(4194308,4,nu.bind(null,a,e),i)},useLayoutEffect:function(e,a){return Ki(4194308,4,e,a)},useInsertionEffect:function(e,a){Ki(4,2,e,a)},useMemo:function(e,a){var i=ie();a=a===void 0?null:a;var r=e();if(Va){st(!0);try{e()}finally{st(!1)}}return i.memoizedState=[r,a],r},useReducer:function(e,a,i){var r=ie();if(i!==void 0){var c=i(a);if(Va){st(!0);try{i(a)}finally{st(!1)}}}else c=a;return r.memoizedState=r.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},r.queue=e,e=e.dispatch=P0.bind(null,rt,e),[r.memoizedState,e]},useRef:function(e){var a=ie();return e={current:e},a.memoizedState=e},useState:function(e){e=ml(e);var a=e.queue,i=fu.bind(null,rt,a);return a.dispatch=i,[e.memoizedState,i]},useDebugValue:yl,useDeferredValue:function(e,a){var i=ie();return Sl(i,e,a)},useTransition:function(){var e=ml(!1);return e=ou.bind(null,rt,e.queue,!0,!1),ie().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,i){var r=rt,c=ie();if(yt){if(i===void 0)throw Error(l(407));i=i()}else{if(i=a(),Tt===null)throw Error(l(349));(gt&124)!==0||Lo(r,a,i)}c.memoizedState=i;var d={value:i,getSnapshot:a};return c.queue=d,$o(Yo.bind(null,r,d,e),[e]),r.flags|=2048,nn(9,Vi(),wo.bind(null,r,d,i,a),null),i},useId:function(){var e=ie(),a=Tt.identifierPrefix;if(yt){var i=Je,r=Ze;i=(r&~(1<<32-fe(r)-1)).toString(32)+i,a=""+a+"R"+i,i=_s++,0<i&&(a+="H"+i.toString(32)),a+=""}else i=q1++,a=""+a+"r"+i.toString(32)+"";return e.memoizedState=a},useHostTransitionStatus:_l,useFormState:Jo,useActionState:Jo,useOptimistic:function(e){var a=ie();a.memoizedState=a.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=i,a=El.bind(null,rt,!0,i),i.dispatch=a,[e,a]},useMemoCache:dl,useCacheRefresh:function(){return ie().memoizedState=j0.bind(null,rt)}},sc={readContext:te,use:ji,useCallback:su,useContext:te,useEffect:tu,useImperativeHandle:iu,useInsertionEffect:eu,useLayoutEffect:au,useMemo:lu,useReducer:Pi,useRef:Io,useState:function(){return Pi(Xe)},useDebugValue:yl,useDeferredValue:function(e,a){var i=Yt();return ru(i,bt.memoizedState,e,a)},useTransition:function(){var e=Pi(Xe)[0],a=Yt().memoizedState;return[typeof e=="boolean"?e:Jn(e),a]},useSyncExternalStore:Uo,useId:hu,useHostTransitionStatus:_l,useFormState:Fo,useActionState:Fo,useOptimistic:function(e,a){var i=Yt();return jo(i,bt,e,a)},useMemoCache:dl,useCacheRefresh:cu},X1={readContext:te,use:ji,useCallback:su,useContext:te,useEffect:tu,useImperativeHandle:iu,useInsertionEffect:eu,useLayoutEffect:au,useMemo:lu,useReducer:pl,useRef:Io,useState:function(){return pl(Xe)},useDebugValue:yl,useDeferredValue:function(e,a){var i=Yt();return bt===null?Sl(i,e,a):ru(i,bt.memoizedState,e,a)},useTransition:function(){var e=pl(Xe)[0],a=Yt().memoizedState;return[typeof e=="boolean"?e:Jn(e),a]},useSyncExternalStore:Uo,useId:hu,useHostTransitionStatus:_l,useFormState:Wo,useActionState:Wo,useOptimistic:function(e,a){var i=Yt();return bt!==null?jo(i,bt,e,a):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:dl,useCacheRefresh:cu},Tn=null,fi=0,Mn=mu(!0),lc=mu(!1),be=y(null),we=null,Vt=y(0),Cr={enqueueSetState:function(e,a,i){e=e._reactInternals;var r=ue(),c=sa(r);c.payload=a,i!=null&&(c.callback=i),a=la(e,c,r),a!==null&&(he(a,e,r),Kn(a,e,r))},enqueueReplaceState:function(e,a,i){e=e._reactInternals;var r=ue(),c=sa(r);c.tag=1,c.payload=a,i!=null&&(c.callback=i),a=la(e,c,r),a!==null&&(he(a,e,r),Kn(a,e,r))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var i=ue(),r=sa(i);r.tag=2,a!=null&&(r.callback=a),a=la(e,r,i),a!==null&&(he(a,e,i),Kn(a,e,i))}},rc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},oc=Error(l(461)),Zt=!1,br={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},ke=!1,wt=!1,xr=!1,uc=typeof WeakSet=="function"?WeakSet:Set,Jt=null,Xt=null,le=!1,Ge=null,An=8192,j1={getCacheForType:function(e){var a=te(Ht),i=a.data.get(e);return i===void 0&&(i=e(),a.data.set(e,i)),i}},Cs=0,bs=1,xs=2,Ts=3,Ms=4;if(typeof Symbol=="function"&&Symbol.for){var di=Symbol.for;Cs=di("selector.component"),bs=di("selector.has_pseudo_class"),xs=di("selector.role"),Ts=di("selector.test_id"),Ms=di("selector.text")}var P1=typeof WeakMap=="function"?WeakMap:Map,ct=0,Tt=null,ht=null,gt=0,Ct=0,pe=null,Sa=!1,Rn=!1,Tr=!1,We=0,Bt=0,_a=0,Ka=0,Mr=0,xe=0,Nn=0,gi=null,re=null,Ar=!1,Rr=0,pi=1/0,As=null,Ea=null,It=0,Ca=null,On=null,Dn=0,Nr=0,Or=null,hc=null,mi=0,Dr=null;return ut.attemptContinuousHydration=function(e){if(e.tag===13){var a=an(e,67108864);a!==null&&he(a,e,67108864),Il(e,67108864)}},ut.attemptHydrationAtCurrentPriority=function(e){if(e.tag===13){var a=ue();a=ot(a);var i=an(e,a);i!==null&&he(i,e,a),Il(e,a)}},ut.attemptSynchronousHydration=function(e){switch(e.tag){case 3:if(e=e.stateNode,e.current.memoizedState.isDehydrated){var a=N(e.pendingLanes);if(a!==0){for(e.pendingLanes|=2,e.entangledLanes|=2;a;){var i=1<<31-fe(a);e.entanglements[1]|=i,a&=~i}He(e),(ct&6)===0&&(pi=De()+500,en(0))}}break;case 13:a=an(e,2),a!==null&&he(a,e,2),lh(),Il(e,2)}},ut.batchedUpdates=function(e,a){return e(a)},ut.createComponentSelector=function(e){return{$$typeof:Cs,value:e}},ut.createContainer=function(e,a,i,r,c,d,v,C,R,B){return bh(e,a,!1,null,i,r,d,v,C,R,B,null)},ut.createHasPseudoClassSelector=function(e){return{$$typeof:bs,value:e}},ut.createHydrationContainer=function(e,a,i,r,c,d,v,C,R,B,w,P,Q){return e=bh(i,r,!0,e,c,d,C,R,B,w,P,Q),e.context=xh(null),i=e.current,r=ue(),r=ot(r),c=sa(r),c.callback=a??null,la(i,c,r),a=r,e.current.lanes=a,K(e,a),He(e),e},ut.createPortal=function(e,a,i){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:on,key:r==null?null:""+r,children:e,containerInfo:a,implementation:i}},ut.createRoleSelector=function(e){return{$$typeof:xs,value:e}},ut.createTestNameSelector=function(e){return{$$typeof:Ts,value:e}},ut.createTextSelector=function(e){return{$$typeof:Ms,value:e}},ut.defaultOnCaughtError=function(e){console.error(e)},ut.defaultOnRecoverableError=function(e){rc(e)},ut.defaultOnUncaughtError=function(e){rc(e)},ut.deferredUpdates=function(e){var a=et.T,i=Qe();try{return Qt(32),et.T=null,e()}finally{Qt(i),et.T=a}},ut.discreteUpdates=function(e,a,i,r,c){var d=et.T,v=Qe();try{return Qt(2),et.T=null,e(a,i,r,c)}finally{Qt(v),et.T=d,ct===0&&(pi=De()+500)}},ut.findAllNodes=Vl,ut.findBoundingRects=function(e,a){if(!si)throw Error(l(363));a=Vl(e,a),e=[];for(var i=0;i<a.length;i++)e.push(zf(a[i]));for(a=e.length-1;0<a;a--){i=e[a];for(var r=i.x,c=r+i.width,d=i.y,v=d+i.height,C=a-1;0<=C;C--)if(a!==C){var R=e[C],B=R.x,w=B+R.width,P=R.y,Q=P+R.height;if(r>=B&&d>=P&&c<=w&&v<=Q){e.splice(a,1);break}else if(r!==B||i.width!==R.width||Q<d||P>v){if(!(d!==P||i.height!==R.height||w<r||B>c)){B>r&&(R.width+=B-r,R.x=r),w<c&&(R.width=c-B),e.splice(a,1);break}}else{P>d&&(R.height+=P-d,R.y=d),Q<v&&(R.height=v-P),e.splice(a,1);break}}}return e},ut.findHostInstance=Th,ut.findHostInstanceWithNoPortals=function(e){return e=f(e),e=e!==null?p(e):null,e===null?null:ii(e.stateNode)},ut.findHostInstanceWithWarning=function(e){return Th(e)},ut.flushPassiveEffects=ni,ut.flushSyncFromReconciler=function(e){var a=ct;ct|=1;var i=et.T,r=Qe();try{if(Qt(2),et.T=null,e)return e()}finally{Qt(r),et.T=i,ct=a,(ct&6)===0&&en(0)}},ut.flushSyncWork=lh,ut.focusWithin=function(e,a){if(!si)throw Error(l(363));for(e=Xl(e),a=ah(e,a),a=Array.from(a),e=0;e<a.length;){var i=a[e++],r=i.tag;if(!li(i)){if((r===5||r===26||r===27)&&Uf(i.stateNode))return!0;for(i=i.child;i!==null;)a.push(i),i=i.sibling}}return!1},ut.getFindAllNodesFailureDescription=function(e,a){if(!si)throw Error(l(363));var i=0,r=[];e=[Xl(e),0];for(var c=0;c<e.length;){var d=e[c++],v=d.tag,C=e[c++],R=a[C];if((v!==5&&v!==26&&v!==27||!li(d))&&(jl(d,R)&&(r.push(Pl(R)),C++,C>i&&(i=C)),C<a.length))for(d=d.child;d!==null;)e.push(d,C),d=d.sibling}if(i<a.length){for(e=[];i<a.length;i++)e.push(Pl(a[i]));return`findAllNodes was able to match part of the selector:
  `+(r.join(" > ")+`

No matching component was found for:
  `)+e.join(" > ")}return null},ut.getPublicRootInstance=function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 27:case 5:return ii(e.child.stateNode);default:return e.child.stateNode}},ut.injectIntoDevTools=function(){var e={bundleType:0,version:ff,rendererPackageName:df,currentDispatcherRef:et,reconcilerVersion:"19.1.0"};if(Dh!==null&&(e.rendererConfig=Dh),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")e=!1;else{var a=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(a.isDisabled||!a.supportsFiber)e=!0;else{try{ri=a.inject(e),de=a}catch{}e=!!a.checkDCE}}return e},ut.isAlreadyRendering=function(){return(ct&6)!==0},ut.observeVisibleRects=function(e,a,i,r){if(!si)throw Error(l(363));e=Vl(e,a);var c=Lf(e,i,r).disconnect;return{disconnect:function(){c()}}},ut.shouldError=function(){return null},ut.shouldSuspend=function(){return!1},ut.startHostTransition=function(e,a,i,r){if(e.tag!==5)throw Error(l(476));var c=uu(e).queue;ou(e,c,a,hn,i===null?s:function(){var d=uu(e).next.queue;return kn(e,d,{},ue()),i(r)})},ut.updateContainer=function(e,a,i,r){var c=a.current,d=ue();return Mh(c,d,e,a,i,r),d},ut.updateContainerSync=function(e,a,i,r){return Mh(a.current,2,e,a,i,r),2},ut},u.exports.default=u.exports,Object.defineProperty(u.exports,"__esModule",{value:!0})})(Vr)),Vr.exports}var jc;function Y5(){return jc||(jc=1,Pr.exports=w5()),Pr.exports}var q5=Y5();const X5=Q1(q5);var Kr={exports:{}},Ie={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pc;function j5(){return Pc||(Pc=1,Ie.ConcurrentRoot=1,Ie.ContinuousEventPriority=8,Ie.DefaultEventPriority=32,Ie.DiscreteEventPriority=2,Ie.IdleEventPriority=268435456,Ie.LegacyRoot=0,Ie.NoEventPriority=0),Ie}var Vc;function P5(){return Vc||(Vc=1,Kr.exports=j5()),Kr.exports}var Zs=P5();const Kc={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Qc=!1,Zc=!1;const Ps=".react-konva-event",V5=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,K5=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,Q5={};function Js(u,t,n=Q5){if(!Qc&&"zIndex"in t&&(console.warn(K5),Qc=!0),!Zc&&t.draggable){var s=t.x!==void 0||t.y!==void 0,l=t.onDragEnd||t.onDragMove;s&&!l&&(console.warn(V5),Zc=!0)}for(var o in n)if(!Kc[o]){var h=o.slice(0,2)==="on",f=n[o]!==t[o];if(h&&f){var g=o.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),u.off(g,n[o])}var p=!t.hasOwnProperty(o);p&&u.setAttr(o,void 0)}var m=t._useStrictMode,S={},y=!1;const b={};for(var o in t)if(!Kc[o]){var h=o.slice(0,2)==="on",_=n[o]!==t[o];if(h&&_){var g=o.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),t[o]&&(b[g]=t[o])}!h&&(t[o]!==n[o]||m&&t[o]!==u.getAttr(o))&&(y=!0,S[o]=t[o])}y&&(u.setAttrs(S),Ga(u));for(var g in b)u.off(g+Ps),u.on(g+Ps,b[g])}function Ga(u){if(!X.autoDrawEnabled){var t=u.getLayer()||u.getStage();t&&t.batchDraw()}}var Qr=Wc();const N0={},Z5={};wn.Node.prototype._applyProps=Js;let O0=Zs.DefaultEventPriority;function J5(u,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}u.add(t),Ga(u)}function F5(u,t,n){let s=wn[u];s||(console.error(`Konva has no node with the type ${u}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${u}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),s=wn.Group);const l={},o={};for(var h in t)if(h!=="ref"){var f=h.slice(0,2)==="on";f?o[h]=t[h]:l[h]=t[h]}const g=new s(l);return Js(g,o),g}function k5(u,t,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${u}"`)}function W5(u,t,n){return!1}function I5(u){return u}function $5(){return null}function t4(){return null}function e4(u,t,n,s){return Z5}function a4(){}function n4(u){}function i4(u,t){return!1}function s4(){return N0}function l4(){return N0}const r4=setTimeout,o4=clearTimeout,u4=!0,h4=u=>{u()},c4=-1;function f4(u,t){return!1}const d4=!1,g4=!1,p4=!0,m4=!1,v4=!1;function y4(u,t){t.parent===u?t.moveToTop():u.add(t),Ga(u)}function S4(u,t){t.parent===u?t.moveToTop():u.add(t),Ga(u)}function D0(u,t,n){t._remove(),u.add(t),t.setZIndex(n.getZIndex()),Ga(u)}function _4(u,t,n){D0(u,t,n)}function E4(u,t){t.destroy(),t.off(Ps),Ga(u)}function C4(u,t){t.destroy(),t.off(Ps),Ga(u)}function b4(u,t,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function x4(u,t,n){}function T4(u,t,n,s){Js(u,s,n)}function M4(u){u.hide(),Ga(u)}function A4(u){}function R4(u,t){(t.visible==null||t.visible)&&u.show()}function N4(u,t){}function O4(u){}function D4(){}function G4(){return Zs.DefaultEventPriority}function z4(){}function H4(){return null}function B4(u){O0=u}function U4(){return O0}function L4(){return Zs.DiscreteEventPriority}function w4(){return!1}function Y4(){}function q4(){return!1}function X4(){return!0}function j4(){}function P4(){}function V4(){return null}const K4=null;function Q4(){}const Z4=Object.freeze(Object.defineProperty({__proto__:null,NotPendingTransition:K4,appendChild:y4,appendChildToContainer:S4,appendInitialChild:J5,cancelTimeout:o4,clearContainer:O4,commitMount:x4,commitTextUpdate:b4,commitUpdate:T4,createInstance:F5,createTextInstance:k5,detachDeletedInstance:D4,finalizeInitialChildren:W5,getChildHostContext:l4,getCurrentEventPriority:G4,getCurrentUpdatePriority:U4,getInstanceFromScope:H4,getPublicInstance:I5,getRootHostContext:s4,hideInstance:M4,hideTextInstance:A4,idlePriority:Qr.unstable_IdlePriority,insertBefore:D0,insertInContainerBefore:_4,isPrimaryRenderer:d4,maySuspendCommit:q4,noTimeout:c4,now:Qr.unstable_now,preloadInstance:X4,prepareForCommit:$5,preparePortalMount:t4,prepareScopeUpdate:z4,prepareUpdate:e4,removeChild:E4,removeChildFromContainer:C4,requestPostPaintCallback:Y4,resetAfterCommit:a4,resetFormInstance:Q4,resetTextContent:n4,resolveUpdatePriority:L4,run:Qr.unstable_runWithPriority,scheduleMicrotask:h4,scheduleTimeout:r4,setCurrentUpdatePriority:B4,shouldAttemptEagerTransition:w4,shouldDeprioritizeSubtree:i4,shouldSetTextContent:f4,startSuspendingCommit:j4,supportsHydration:v4,supportsMicrotasks:u4,supportsMutation:p4,supportsPersistence:m4,suspendInstance:P4,unhideInstance:R4,unhideTextInstance:N4,waitForCommitToBeReady:V4,warnsIfNotActing:g4},Symbol.toStringTag,{value:"Module"}));function G0(u,t,n){if(!u)return;if(n(u)===!0)return u;let s=u.child;for(;s;){const l=G0(s,t,n);if(l)return l;s=s.sibling}}function z0(u){try{return Object.defineProperties(u,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return u}}const go=z0(Ae.createContext(null));class H0 extends Ae.Component{render(){return Ae.createElement(go.Provider,{value:this._reactInternals},this.props.children)}}function J4(){const u=Ae.useContext(go);if(u===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=Ae.useId();return Ae.useMemo(()=>{for(const n of[u,u?.alternate]){if(!n)continue;const s=G0(n,!1,l=>{let o=l.memoizedState;for(;o;){if(o.memoizedState===t)return!0;o=o.next}});if(s)return s}},[u,t])}const F4=Symbol.for("react.context"),k4=u=>u!==null&&typeof u=="object"&&"$$typeof"in u&&u.$$typeof===F4;function W4(){const u=J4(),[t]=Ae.useState(()=>new Map);t.clear();let n=u;for(;n;){const s=n.type;k4(s)&&s!==go&&!t.has(s)&&t.set(s,Ae.use(z0(s))),n=n.return}return t}function I4(){const u=W4();return Ae.useMemo(()=>Array.from(u.keys()).reduce((t,n)=>s=>Ae.createElement(t,null,Ae.createElement(n.Provider,{...s,value:u.get(n)})),t=>Ae.createElement(H0,{...t})),[u])}if(_t.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function $4(u){const t=_t.useRef({});return _t.useLayoutEffect(()=>{t.current=u}),_t.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const t3=()=>{const u=_t.useRef(0);return _t.useMemo(()=>{u.current++},[]),u.current>1},e3=u=>{const t=_t.useRef(null),n=_t.useRef(null),s=_t.useRef(null),l=$4(u),o=I4(),h=_t.useRef(!1),f=p=>{const{forwardedRef:m}=u;m&&(typeof m=="function"?m(p):m.current=p)},g=t3();return _t.useLayoutEffect(()=>h.current&&g?()=>{h.current=!1,f(null),Bn.updateContainer(null,s.current,null),n.current.destroy()}:(h.current=!0,n.current=new wn.Stage({width:u.width,height:u.height,container:t.current}),f(n.current),s.current=Bn.createContainer(n.current,Zs.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),Bn.updateContainer(_t.createElement(o,{},u.children),s.current,null,()=>{}),()=>{g||(f(null),Bn.updateContainer(null,s.current,null),n.current.destroy())}),[]),_t.useLayoutEffect(()=>{f(n.current),Js(n.current,u,l),Bn.updateContainer(_t.createElement(o,{},u.children),s.current,null)}),_t.createElement("div",{ref:t,id:u.id,accessKey:u.accessKey,className:u.className,role:u.role,style:u.style,tabIndex:u.tabIndex,title:u.title})},a3="Layer",n3="Rect",i3="Line",Bn=X5(Z4);Bn.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:_t.version,rendererPackageName:"react-konva"});const s3=_t.forwardRef((u,t)=>_t.createElement(H0,{},_t.createElement(e3,{...u,forwardedRef:t})));function l3({className:u,children:t,lines:n,...s}){const[l,o]=_t.useState(null),h=J1(l);return $.jsx("div",{ref:o,className:io("w-full max-w-80 aspect-square relative border-4 border-primary shadow-2xl",u),children:!!h&&h.width>0&&$.jsx(s3,{width:h.width,height:h.height,className:"absolute inset-0",...s,children:$.jsxs(a3,{children:[$.jsx(n3,{x:0,y:0,width:h.width,height:h.height,fill:"white"}),n?.map((f,g)=>$.jsx(i3,{points:f.points,stroke:"black",strokeWidth:10,tension:.5,lineCap:"round"},g)),t]})})})}function r3(){const[u,t]=_t.useState([]),[n,s]=_t.useState(!1),l=f=>{s(!0);const g=f.target.getStage()?.getPointerPosition();g&&t([...u,{points:[g.x,g.y]}])},o=f=>{if(!n)return;const p=f.target.getStage()?.getPointerPosition();if(!p)return;const m=u[u.length-1];m.points=m.points.concat([p.x,p.y]),t([...u.slice(0,-1),m])},h=()=>s(!1);return{lines:u,handlers:{onMouseDown:l,onMousemove:o,onMouseup:h,onTouchStart:l,onTouchMove:o,onTouchEnd:h},reset:()=>t([]),setLines:t}}function o3(u){const t=u[0]+u[2]+u[3],n=u[1]+u[9],s=u[4]+u[8],l=u[6]+u[7],o=u[5];return{ravenclaw:t,gryffindor:n,hufflepuff:s,slytherin:l,deatheater:o}}function u3({img:u,model:t}){return I1(()=>{const n=ad(u,1),s=t.model.layers[0].batchInputShape[1];if(s==null)throw new Error("Something went wrong. Expected image size is null");const l=$1.resizeNearestNeighbor(n,[s,s],!0).div(255).expandDims(),o=t.model.predict(l);if(Array.isArray(o)||!(o instanceof td))throw new Error("Something went wrong. Unexpected result type");const h=o.dataSync();return o3(h)})}function h3(u){const t=_t.useRef(null);return _t.useEffect(()=>{const n=t.current;n&&(u&&!n.open?n.showModal():!u&&n.open&&n.close())},[u]),t}function Jc({className:u,open:t,children:n,...s}){const l=h3(t);return $.jsxs("dialog",{ref:l,className:io("modal",u),...s,children:[$.jsx("div",{className:"modal-box",children:n}),$.jsx("form",{method:"dialog",className:"modal-backdrop",children:$.jsx("button",{children:"close"})})]})}const c3="/tensorflow-js-examples/assets/dark-mark-qYeJ9UQb.webp",f3="/tensorflow-js-examples/assets/sorting-hat-C-Ok4PCj.webp",d3="model/sorting-hat/model.json",Fc="indexeddb://sorting-hat",Ys={gryffindor:"gryffindor",hufflepuff:"hufflepuff",ravenclaw:"ravenclaw",slytherin:"slytherin"},g3="/tensorflow-js-examples/assets/Gryffindor_crest-CSvvJtfd.webp",p3="/tensorflow-js-examples/assets/Hufflepuff_crest-CxulIwN-.webp",m3="/tensorflow-js-examples/assets/Ravenclaw_Crest_1-_qkHWslS.webp",v3="/tensorflow-js-examples/assets/Slytherin_Crest-Cu_AY6yk.webp",y3=[{name:Ys.gryffindor,crest:g3,color:"#a50000"},{name:Ys.hufflepuff,crest:p3,color:"#ffb81c"},{name:Ys.ravenclaw,crest:m3,color:"#0e1a40"},{name:Ys.slytherin,crest:v3,color:"#2a623d"}];function S3({predictions:u,deathEaterThreshold:t=.8,...n}){return u&&u?.deatheater>=t?$.jsx(Jc,{...n,children:$.jsxs("div",{className:"relative flex flex-col items-center gap-6 p-6 rounded-2xl bg-gradient-to-b from-[#2a0000] to-black text-center text-white shadow-2xl",children:[$.jsx("img",{src:c3,alt:"Dark Mark",className:"w-32 h-auto animate-pulse drop-shadow-[0_0_20px_red]"}),$.jsx("h2",{className:"text-3xl font-bold text-red-500",children:" Dark Path Ahead!"}),$.jsx("p",{className:"text-gray-300",children:"The Sorting Hat senses a strong pull toward the Death Eaters..."})]})}):$.jsx(Jc,{...n,children:$.jsxs("div",{className:"relative flex flex-col items-center justify-center gap-6 p-6 bg-gradient-to-b from-[#1a1a2e] to-[#16213e] rounded-2xl shadow-2xl",children:[$.jsx("img",{src:f3,alt:"Sorting Hat",className:"w-2/3 h-auto drop-shadow-lg"}),$.jsx("h2",{className:"text-3xl font-bold text-white",children:"Congratulations!"}),$.jsx("p",{className:"text-gray-300",children:"The Sorting Hat has made its choice..."}),$.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mt-4",children:y3.sort((s,l)=>(u?.[l.name]??0)-(u?.[s.name]??0)).map(({name:s,crest:l,color:o})=>$.jsxs("div",{className:"flex flex-col items-center",style:{opacity:u?.[s]??0},children:[$.jsx("img",{src:l,alt:s,className:"w-24 h-24 drop-shadow-md"}),$.jsx("span",{className:"mt-2 font-semibold capitalize text-white drop-shadow-[0_0_6px_var(--tw-shadow-color)]",style:{opacity:u?.[s]??0,"--tw-shadow-color":o},children:s})]},s))})]})})}const kc=["tiger","squirrel","snake","snail","raccoon","skull","parrot","owl","bird","lion"];async function _3(){await ed();try{return{model:await cc(Fc),classes:kc}}catch{const u=await cc(d3);return await u.save(Fc),{model:u,classes:kc}}}function E3(){return k1({queryKey:["sorting-hat-model"],queryFn:async()=>await _3(),staleTime:1/0,gcTime:1/0})}function C3(){const[u,t]=_t.useState(null),n=_t.useRef(null),{lines:s,handlers:l,reset:o,setLines:h}=r3(),{isLoading:f,data:g,error:p}=E3();return $.jsxs("section",{className:io("p-4 flex flex-col gap-4 items-center",(f||!!p)&&"prose text-center"),children:[$.jsxs("div",{className:"prose",children:[$.jsx("h2",{children:"Sorting Hat Challenge"}),$.jsx("p",{children:"You can draw some image on the canvas and the sorting hat will try to predict your house."})]}),f?$.jsxs($.Fragment,{children:[$.jsx("p",{children:"Wait before model data will load..."}),$.jsx("p",{className:"loading loading-bars loading-xl"})]}):$.jsxs($.Fragment,{children:[!!p&&$.jsxs($.Fragment,{children:[$.jsx("h4",{children:"Oops, something went wrong"}),$.jsx("p",{className:"text-error",children:p.message}),$.jsx("p",{children:"Try to refresh the page"})]}),!p&&!!g&&$.jsxs($.Fragment,{children:[!!u&&$.jsx(fd,{}),$.jsx(S3,{className:"[&_.modal-box]:p-0 [&_.modal-box]:bg-transparent",open:!!u,onClose:()=>t(null),predictions:u}),$.jsx(l3,{ref:n,...l,lines:s}),$.jsxs("div",{className:"join",children:[$.jsx("button",{disabled:!s.length,onClick:()=>h(m=>m.slice(0,-1)),className:"btn join-item btn-neutral",children:$.jsx(dd,{})}),$.jsx("button",{disabled:!s.length,onClick:o,className:"btn join-item btn-neutral",children:"Reset"}),$.jsx("button",{disabled:!s.length,className:"btn btn-primary join-item",onClick:()=>{n.current?.toImage().then(m=>{g&&t(u3({model:g,img:m}))})},children:"Get Started"})]})]})]}),$.jsx(F1,{className:"w-full"})]})}function U3(){return $.jsx(W1,{children:$.jsx(C3,{})})}export{U3 as default};
